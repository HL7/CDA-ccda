<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL HL7, OR ANY OF ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

Generated from fhir-cda-validation version 1.0.0 on Mon Jul 22 2024
Includes validation of Value Sets with fewer than 1000 concepts
More information may be found at https://github.com/HL7/fhir-cda-validation
-->
<schema xmlns="http://purl.oclc.org/dsdl/schematron">
  <ns prefix="sch" uri="http://purl.oclc.org/dsdl/schematron"/>
  <ns prefix="cda" uri="urn:hl7-org:v3"/>
  <ns prefix="xsi" uri="http://www.w3.org/2001/XMLSchema-instance"/>
  <ns prefix="sdtc" uri="urn:hl7-org:sdtc"/>
  <phase id="errors">
    <active pattern="ActivitiesSection-errors"/>
    <active pattern="AdmissionDiagnosisSection-errors"/>
    <active pattern="AdmissionMedication-errors"/>
    <active pattern="AdmissionMedicationsSectionEntriesOptional-errors"/>
    <active pattern="AdvanceDirectiveObservation-errors"/>
    <active pattern="AdvanceDirectiveOrganizer-errors"/>
    <active pattern="AdvanceDirectivesSection-errors"/>
    <active pattern="AgeObservation-errors"/>
    <active pattern="AllergiesAndIntolerancesSection-errors"/>
    <active pattern="AllergyConcernAct-errors"/>
    <active pattern="AllergyIntoleranceObservation-errors"/>
    <active pattern="AllergyStatusObservation-errors"/>
    <active pattern="AnesthesiaSection-errors"/>
    <active pattern="AssessmentScaleObservation-errors"/>
    <active pattern="AssessmentScaleSupportingObservation-errors"/>
    <active pattern="AssessmentSection-errors"/>
    <active pattern="AssessmentandPlanSection-errors"/>
    <active pattern="AuthorParticipation-errors"/>
    <active pattern="AuthorizationActivity-errors"/>
    <active pattern="AverageBloodPressureOrganizer-errors"/>
    <active pattern="BasicIndustryObservation-errors"/>
    <active pattern="BasicOccupationObservation-errors"/>
    <active pattern="BirthSexObservation-errors"/>
    <active pattern="BrandNameObservation-errors"/>
    <active pattern="CareExperiencePreference-errors"/>
    <active pattern="CarePlan-errors"/>
    <active pattern="CareTeamMemberAct-errors"/>
    <active pattern="CareTeamMemberScheduleObservation-errors"/>
    <active pattern="CareTeamOrganizer-errors"/>
    <active pattern="CareTeamTypeObservation-errors"/>
    <active pattern="CareTeamsSection-errors"/>
    <active pattern="CaregiverCharacteristics-errors"/>
    <active pattern="CatalogNumberObservation-errors"/>
    <active pattern="CharacteristicsofHomeEnvironment-errors"/>
    <active pattern="ChiefComplaintSection-errors"/>
    <active pattern="ChiefComplaintandReasonforVisitSection-errors"/>
    <active pattern="CommentActivity-errors"/>
    <active pattern="CompanyNameObservation-errors"/>
    <active pattern="ComplicationsSection-errors"/>
    <active pattern="ConsultationNote-errors"/>
    <active pattern="ContinuityofCareDocumentCCD-errors"/>
    <active pattern="CourseofCareSection-errors"/>
    <active pattern="CoverageActivity-errors"/>
    <active pattern="CriticalityObservation-errors"/>
    <active pattern="CulturalandReligiousObservation-errors"/>
    <active pattern="DateOfDiagnosisAct-errors"/>
    <active pattern="DeceasedObservation-errors"/>
    <active pattern="DeviceIdentifierObservation-errors"/>
    <active pattern="DisabilityStatusObservation-errors"/>
    <active pattern="DischargeDiagnosisSection-errors"/>
    <active pattern="DischargeMedication-errors"/>
    <active pattern="DischargeMedicationsSection-errors"/>
    <active pattern="DischargeSummary-errors"/>
    <active pattern="DistinctIdentificationCodeObservation-errors"/>
    <active pattern="DrugMonitoringAct-errors"/>
    <active pattern="DrugVehicle-errors"/>
    <active pattern="EncounterActivity-errors"/>
    <active pattern="EncounterDiagnosis-errors"/>
    <active pattern="EncountersSection-errors"/>
    <active pattern="EntryReference-errors"/>
    <active pattern="EstimatedDateofDelivery-errors"/>
    <active pattern="ExpirationDateObservation-errors"/>
    <active pattern="ExternalDocumentReference-errors"/>
    <active pattern="FamilyHistoryDeathObservation-errors"/>
    <active pattern="FamilyHistoryObservation-errors"/>
    <active pattern="FamilyHistoryOrganizer-errors"/>
    <active pattern="FamilyHistorySection-errors"/>
    <active pattern="FunctionalStatusObservation-errors"/>
    <active pattern="FunctionalStatusOrganizer-errors"/>
    <active pattern="FunctionalStatusSection-errors"/>
    <active pattern="GenderIdentityObservation-errors"/>
    <active pattern="GeneralStatusSection-errors"/>
    <active pattern="GoalObservation-errors"/>
    <active pattern="GoalsSection-errors"/>
    <active pattern="HandoffCommunicationParticipants-errors"/>
    <active pattern="HealthConcernAct-errors"/>
    <active pattern="HealthConcernsSection-errors"/>
    <active pattern="HealthStatusEvaluationsandOutcomesSection-errors"/>
    <active pattern="HealthStatusObservation-errors"/>
    <active pattern="HighestPressureUlcerStage-errors"/>
    <active pattern="HistoryandPhysical-errors"/>
    <active pattern="HistoryofPresentIllnessSection-errors"/>
    <active pattern="HospitalAdmissionDiagnosis-errors"/>
    <active pattern="HospitalConsultationsSection-errors"/>
    <active pattern="HospitalCourseSection-errors"/>
    <active pattern="HospitalDischargeDiagnosis-errors"/>
    <active pattern="HospitalDischargeInstructionsSection-errors"/>
    <active pattern="HospitalDischargePhysicalSection-errors"/>
    <active pattern="HospitalDischargeStudiesSummarySection-errors"/>
    <active pattern="ImmunizationActivity-errors"/>
    <active pattern="ImmunizationMedicationInformation-errors"/>
    <active pattern="ImmunizationNotGivenReason-errors"/>
    <active pattern="ImmunizationsSection-errors"/>
    <active pattern="ImplantableDeviceStatusObservation-errors"/>
    <active pattern="Indication-errors"/>
    <active pattern="Instruction-errors"/>
    <active pattern="InstructionsSection-errors"/>
    <active pattern="InterventionAct-errors"/>
    <active pattern="LatexSafetyObservation-errors"/>
    <active pattern="LongitudinalCareWoundObservation-errors"/>
    <active pattern="LotOrBatchNumberObservation-errors"/>
    <active pattern="MRISafetyObservation-errors"/>
    <active pattern="ManufacturingDateObservation-errors"/>
    <active pattern="MedicalEquipmentOrganizer-errors"/>
    <active pattern="MedicalEquipmentSection-errors"/>
    <active pattern="MedicalGeneralHistorySection-errors"/>
    <active pattern="MedicationActivity-errors"/>
    <active pattern="MedicationAdherence-errors"/>
    <active pattern="MedicationDispense-errors"/>
    <active pattern="MedicationFreeTextSig-errors"/>
    <active pattern="MedicationInformation-errors"/>
    <active pattern="MedicationSupplyOrder-errors"/>
    <active pattern="MedicationsAdministeredSection-errors"/>
    <active pattern="MedicationsSection-errors"/>
    <active pattern="MentalStatusObservation-errors"/>
    <active pattern="MentalStatusOrganizer-errors"/>
    <active pattern="MentalStatusSection-errors"/>
    <active pattern="ModelNumberObservation-errors"/>
    <active pattern="NonMedicinalSupplyActivity-errors"/>
    <active pattern="NoteActivity-errors"/>
    <active pattern="NotesSection-errors"/>
    <active pattern="NumberofPressureUlcersObservation-errors"/>
    <active pattern="NutritionAssessment-errors"/>
    <active pattern="NutritionRecommendation-errors"/>
    <active pattern="NutritionSection-errors"/>
    <active pattern="NutritionalStatusObservation-errors"/>
    <active pattern="ObjectiveSection-errors"/>
    <active pattern="OperativeNote-errors"/>
    <active pattern="OperativeNoteFluidsSection-errors"/>
    <active pattern="OperativeNoteSurgicalProcedureSection-errors"/>
    <active pattern="OutcomeObservation-errors"/>
    <active pattern="PastMedicalHistory-errors"/>
    <active pattern="PatientReferralAct-errors"/>
    <active pattern="PayersSection-errors"/>
    <active pattern="PhysicalExamSection-errors"/>
    <active pattern="PlannedCoverage-errors"/>
    <active pattern="PlannedEncounter-errors"/>
    <active pattern="PlannedImmunizationActivity-errors"/>
    <active pattern="PlannedInterventionAct-errors"/>
    <active pattern="PlannedMedicationActivity-errors"/>
    <active pattern="PlannedProcedure-errors"/>
    <active pattern="PlannedProcedureSection-errors"/>
    <active pattern="PlannedSupply-errors"/>
    <active pattern="PlanofTreatmentSection-errors"/>
    <active pattern="PolicyActivity-errors"/>
    <active pattern="PostoperativeDiagnosisSection-errors"/>
    <active pattern="PostprocedureDiagnosis-errors"/>
    <active pattern="PostprocedureDiagnosisSection-errors"/>
    <active pattern="PreconditionforSubstanceAdministration-errors"/>
    <active pattern="PregnancyIntentionInNextYear-errors"/>
    <active pattern="PregnancyObservation-errors"/>
    <active pattern="PreoperativeDiagnosis-errors"/>
    <active pattern="PreoperativeDiagnosisSection-errors"/>
    <active pattern="PriorityPreference-errors"/>
    <active pattern="ProblemConcernAct-errors"/>
    <active pattern="ProblemObservation-errors"/>
    <active pattern="ProblemSection-errors"/>
    <active pattern="ProblemStatus-errors"/>
    <active pattern="ProcedureActivityProcedure-errors"/>
    <active pattern="ProcedureDescriptionSection-errors"/>
    <active pattern="ProcedureDispositionSection-errors"/>
    <active pattern="ProcedureEstimatedBloodLossSection-errors"/>
    <active pattern="ProcedureFindingsSection-errors"/>
    <active pattern="ProcedureImplantsSection-errors"/>
    <active pattern="ProcedureIndicationsSection-errors"/>
    <active pattern="ProcedureNote-errors"/>
    <active pattern="ProcedureSpecimensTakenSection-errors"/>
    <active pattern="ProceduresSection-errors"/>
    <active pattern="ProductInstance-errors"/>
    <active pattern="PrognosisObservation-errors"/>
    <active pattern="ProgressNote-errors"/>
    <active pattern="ProgressTowardGoalObservation-errors"/>
    <active pattern="ProvenanceAssemblerParticipation-errors"/>
    <active pattern="ProvenanceAuthorParticipation-errors"/>
    <active pattern="ReactionObservation-errors"/>
    <active pattern="Reason-errors"/>
    <active pattern="ReasonforReferralSection-errors"/>
    <active pattern="ReasonforVisitSection-errors"/>
    <active pattern="ReferralNote-errors"/>
    <active pattern="RelatedPersonRelationshipAndNameParticipant-errors"/>
    <active pattern="ResultObservation-errors"/>
    <active pattern="ResultOrganizer-errors"/>
    <active pattern="ResultsSection-errors"/>
    <active pattern="ReviewofSystemsSection-errors"/>
    <active pattern="RiskConcernAct-errors"/>
    <active pattern="SectionTimeRangeObservation-errors"/>
    <active pattern="SelfCareActivitiesADLandIADL-errors"/>
    <active pattern="SensoryStatus-errors"/>
    <active pattern="SerialNumberObservation-errors"/>
    <active pattern="ServiceDeliveryLocation-errors"/>
    <active pattern="SeverityObservation-errors"/>
    <active pattern="SexObservation-errors"/>
    <active pattern="SexualOrientationObservation-errors"/>
    <active pattern="SmokingStatus-errors"/>
    <active pattern="SmokingStatusMeaningfulUse-errors"/>
    <active pattern="SocialHistoryObservation-errors"/>
    <active pattern="SocialHistorySection-errors"/>
    <active pattern="SpecimenCollectionProcedure-errors"/>
    <active pattern="SpecimenConditionObservation-errors"/>
    <active pattern="SubjectiveSection-errors"/>
    <active pattern="SubstanceAdministeredAct-errors"/>
    <active pattern="SubstanceOrDeviceAllergyIntoleranceObservation-errors"/>
    <active pattern="SurgicalDrainsSection-errors"/>
    <active pattern="TobaccoUse-errors"/>
    <active pattern="TransferSummary-errors"/>
    <active pattern="TreatmentInterventionPreference-errors"/>
    <active pattern="TribalAffiliationObservation-errors"/>
    <active pattern="UDIOrganizer-errors"/>
    <active pattern="USRealmHeader-errors"/>
    <active pattern="USRealmHeaderforPatientGeneratedDocument-errors"/>
    <active pattern="UnstructuredDocument-errors"/>
    <active pattern="VitalSignObservation-errors"/>
    <active pattern="VitalSignsOrganizer-errors"/>
    <active pattern="VitalSignsSection-errors"/>
    <active pattern="WoundCharacteristic-errors"/>
    <active pattern="WoundMeasurementObservation-errors"/>
    <active pattern="USRealmAddress-errors"/>
    <active pattern="USRealmDateTime-errors"/>
    <active pattern="USRealmDateTimeInterval-errors"/>
    <active pattern="USRealmPatientNamePTNUSFIELDED-errors"/>
    <active pattern="USRealmPersonNamePNUSFIELDED-errors"/>
  </phase>
  <phase id="warnings">
    <active pattern="ActivitiesSection-warnings"/>
    <active pattern="AdmissionDiagnosisSection-warnings"/>
    <active pattern="AdmissionMedication-warnings"/>
    <active pattern="AdmissionMedicationsSectionEntriesOptional-warnings"/>
    <active pattern="AdvanceDirectiveObservation-warnings"/>
    <active pattern="AdvanceDirectiveOrganizer-warnings"/>
    <active pattern="AdvanceDirectivesSection-warnings"/>
    <active pattern="AgeObservation-warnings"/>
    <active pattern="AllergiesAndIntolerancesSection-warnings"/>
    <active pattern="AllergyConcernAct-warnings"/>
    <active pattern="AllergyIntoleranceObservation-warnings"/>
    <active pattern="AllergyStatusObservation-warnings"/>
    <active pattern="AnesthesiaSection-warnings"/>
    <active pattern="AssessmentScaleObservation-warnings"/>
    <active pattern="AssessmentScaleSupportingObservation-warnings"/>
    <active pattern="AssessmentandPlanSection-warnings"/>
    <active pattern="AuthorParticipation-warnings"/>
    <active pattern="AuthorizationActivity-warnings"/>
    <active pattern="AverageBloodPressureOrganizer-warnings"/>
    <active pattern="BasicIndustryObservation-warnings"/>
    <active pattern="BasicOccupationObservation-warnings"/>
    <active pattern="BirthSexObservation-warnings"/>
    <active pattern="BrandNameObservation-warnings"/>
    <active pattern="CareExperiencePreference-warnings"/>
    <active pattern="CarePlan-warnings"/>
    <active pattern="CareTeamMemberAct-warnings"/>
    <active pattern="CareTeamMemberScheduleObservation-warnings"/>
    <active pattern="CareTeamOrganizer-warnings"/>
    <active pattern="CareTeamTypeObservation-warnings"/>
    <active pattern="CareTeamsSection-warnings"/>
    <active pattern="CaregiverCharacteristics-warnings"/>
    <active pattern="CatalogNumberObservation-warnings"/>
    <active pattern="CharacteristicsofHomeEnvironment-warnings"/>
    <active pattern="CommentActivity-warnings"/>
    <active pattern="CompanyNameObservation-warnings"/>
    <active pattern="ComplicationsSection-warnings"/>
    <active pattern="ConsultationNote-warnings"/>
    <active pattern="ContinuityofCareDocumentCCD-warnings"/>
    <active pattern="CoverageActivity-warnings"/>
    <active pattern="CriticalityObservation-warnings"/>
    <active pattern="CulturalandReligiousObservation-warnings"/>
    <active pattern="DateOfDiagnosisAct-warnings"/>
    <active pattern="DeceasedObservation-warnings"/>
    <active pattern="DeviceIdentifierObservation-warnings"/>
    <active pattern="DisabilityStatusObservation-warnings"/>
    <active pattern="DischargeDiagnosisSection-warnings"/>
    <active pattern="DischargeMedication-warnings"/>
    <active pattern="DischargeMedicationsSection-warnings"/>
    <active pattern="DischargeSummary-warnings"/>
    <active pattern="DistinctIdentificationCodeObservation-warnings"/>
    <active pattern="DrugMonitoringAct-warnings"/>
    <active pattern="EncounterActivity-warnings"/>
    <active pattern="EncounterDiagnosis-warnings"/>
    <active pattern="EncountersSection-warnings"/>
    <active pattern="EntryReference-warnings"/>
    <active pattern="EstimatedDateofDelivery-warnings"/>
    <active pattern="ExpirationDateObservation-warnings"/>
    <active pattern="ExternalDocumentReference-warnings"/>
    <active pattern="FamilyHistoryDeathObservation-warnings"/>
    <active pattern="FamilyHistoryObservation-warnings"/>
    <active pattern="FamilyHistoryOrganizer-warnings"/>
    <active pattern="FamilyHistorySection-warnings"/>
    <active pattern="FunctionalStatusObservation-warnings"/>
    <active pattern="FunctionalStatusOrganizer-warnings"/>
    <active pattern="FunctionalStatusSection-warnings"/>
    <active pattern="GenderIdentityObservation-warnings"/>
    <active pattern="GoalObservation-warnings"/>
    <active pattern="GoalsSection-warnings"/>
    <active pattern="HandoffCommunicationParticipants-warnings"/>
    <active pattern="HealthConcernAct-warnings"/>
    <active pattern="HealthConcernsSection-warnings"/>
    <active pattern="HealthStatusEvaluationsandOutcomesSection-warnings"/>
    <active pattern="HealthStatusObservation-warnings"/>
    <active pattern="HighestPressureUlcerStage-warnings"/>
    <active pattern="HistoryandPhysical-warnings"/>
    <active pattern="HospitalAdmissionDiagnosis-warnings"/>
    <active pattern="HospitalDischargeDiagnosis-warnings"/>
    <active pattern="ImmunizationActivity-warnings"/>
    <active pattern="ImmunizationMedicationInformation-warnings"/>
    <active pattern="ImmunizationNotGivenReason-warnings"/>
    <active pattern="ImmunizationsSection-warnings"/>
    <active pattern="ImplantableDeviceStatusObservation-warnings"/>
    <active pattern="Indication-warnings"/>
    <active pattern="Instruction-warnings"/>
    <active pattern="InstructionsSection-warnings"/>
    <active pattern="InterventionAct-warnings"/>
    <active pattern="LatexSafetyObservation-warnings"/>
    <active pattern="LongitudinalCareWoundObservation-warnings"/>
    <active pattern="LotOrBatchNumberObservation-warnings"/>
    <active pattern="MRISafetyObservation-warnings"/>
    <active pattern="ManufacturingDateObservation-warnings"/>
    <active pattern="MedicalEquipmentOrganizer-warnings"/>
    <active pattern="MedicalEquipmentSection-warnings"/>
    <active pattern="MedicationActivity-warnings"/>
    <active pattern="MedicationAdherence-warnings"/>
    <active pattern="MedicationDispense-warnings"/>
    <active pattern="MedicationFreeTextSig-warnings"/>
    <active pattern="MedicationSupplyOrder-warnings"/>
    <active pattern="MedicationsAdministeredSection-warnings"/>
    <active pattern="MedicationsSection-warnings"/>
    <active pattern="MentalStatusObservation-warnings"/>
    <active pattern="MentalStatusOrganizer-warnings"/>
    <active pattern="MentalStatusSection-warnings"/>
    <active pattern="ModelNumberObservation-warnings"/>
    <active pattern="NonMedicinalSupplyActivity-warnings"/>
    <active pattern="NoteActivity-warnings"/>
    <active pattern="NotesSection-warnings"/>
    <active pattern="NumberofPressureUlcersObservation-warnings"/>
    <active pattern="NutritionAssessment-warnings"/>
    <active pattern="NutritionRecommendation-warnings"/>
    <active pattern="NutritionSection-warnings"/>
    <active pattern="NutritionalStatusObservation-warnings"/>
    <active pattern="OperativeNote-warnings"/>
    <active pattern="OutcomeObservation-warnings"/>
    <active pattern="PastMedicalHistory-warnings"/>
    <active pattern="PatientReferralAct-warnings"/>
    <active pattern="PayersSection-warnings"/>
    <active pattern="PhysicalExamSection-warnings"/>
    <active pattern="PlannedCoverage-warnings"/>
    <active pattern="PlannedEncounter-warnings"/>
    <active pattern="PlannedImmunizationActivity-warnings"/>
    <active pattern="PlannedInterventionAct-warnings"/>
    <active pattern="PlannedMedicationActivity-warnings"/>
    <active pattern="PlannedProcedure-warnings"/>
    <active pattern="PlannedProcedureSection-warnings"/>
    <active pattern="PlannedSupply-warnings"/>
    <active pattern="PlanofTreatmentSection-warnings"/>
    <active pattern="PolicyActivity-warnings"/>
    <active pattern="PostprocedureDiagnosis-warnings"/>
    <active pattern="PostprocedureDiagnosisSection-warnings"/>
    <active pattern="PregnancyIntentionInNextYear-warnings"/>
    <active pattern="PregnancyObservation-warnings"/>
    <active pattern="PreoperativeDiagnosis-warnings"/>
    <active pattern="PreoperativeDiagnosisSection-warnings"/>
    <active pattern="PriorityPreference-warnings"/>
    <active pattern="ProblemConcernAct-warnings"/>
    <active pattern="ProblemObservation-warnings"/>
    <active pattern="ProblemSection-warnings"/>
    <active pattern="ProblemStatus-warnings"/>
    <active pattern="ProcedureActivityProcedure-warnings"/>
    <active pattern="ProcedureFindingsSection-warnings"/>
    <active pattern="ProcedureIndicationsSection-warnings"/>
    <active pattern="ProcedureNote-warnings"/>
    <active pattern="ProceduresSection-warnings"/>
    <active pattern="ProductInstance-warnings"/>
    <active pattern="PrognosisObservation-warnings"/>
    <active pattern="ProgressNote-warnings"/>
    <active pattern="ProgressTowardGoalObservation-warnings"/>
    <active pattern="ProvenanceAssemblerParticipation-warnings"/>
    <active pattern="ProvenanceAuthorParticipation-warnings"/>
    <active pattern="ReactionObservation-warnings"/>
    <active pattern="Reason-warnings"/>
    <active pattern="ReasonforReferralSection-warnings"/>
    <active pattern="ReferralNote-warnings"/>
    <active pattern="RelatedPersonRelationshipAndNameParticipant-warnings"/>
    <active pattern="ResultObservation-warnings"/>
    <active pattern="ResultOrganizer-warnings"/>
    <active pattern="ResultsSection-warnings"/>
    <active pattern="RiskConcernAct-warnings"/>
    <active pattern="SectionTimeRangeObservation-warnings"/>
    <active pattern="SelfCareActivitiesADLandIADL-warnings"/>
    <active pattern="SensoryStatus-warnings"/>
    <active pattern="SerialNumberObservation-warnings"/>
    <active pattern="ServiceDeliveryLocation-warnings"/>
    <active pattern="SeverityObservation-warnings"/>
    <active pattern="SexObservation-warnings"/>
    <active pattern="SexualOrientationObservation-warnings"/>
    <active pattern="SmokingStatus-warnings"/>
    <active pattern="SmokingStatusMeaningfulUse-warnings"/>
    <active pattern="SocialHistoryObservation-warnings"/>
    <active pattern="SocialHistorySection-warnings"/>
    <active pattern="SpecimenCollectionProcedure-warnings"/>
    <active pattern="SpecimenConditionObservation-warnings"/>
    <active pattern="SubstanceAdministeredAct-warnings"/>
    <active pattern="SubstanceOrDeviceAllergyIntoleranceObservation-warnings"/>
    <active pattern="TobaccoUse-warnings"/>
    <active pattern="TransferSummary-warnings"/>
    <active pattern="TreatmentInterventionPreference-warnings"/>
    <active pattern="TribalAffiliationObservation-warnings"/>
    <active pattern="UDIOrganizer-warnings"/>
    <active pattern="USRealmHeader-warnings"/>
    <active pattern="USRealmHeaderforPatientGeneratedDocument-warnings"/>
    <active pattern="UnstructuredDocument-warnings"/>
    <active pattern="VitalSignObservation-warnings"/>
    <active pattern="VitalSignsOrganizer-warnings"/>
    <active pattern="VitalSignsSection-warnings"/>
    <active pattern="WoundCharacteristic-warnings"/>
    <active pattern="WoundMeasurementObservation-warnings"/>
    <active pattern="USRealmAddress-warnings"/>
    <active pattern="USRealmDateTime-warnings"/>
    <active pattern="USRealmDateTimeInterval-warnings"/>
    <active pattern="UnknownTemplateIds"/>
  </phase>
  <pattern id="ActivitiesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.21.2.3:2015-08-01-->
    <rule id="ActivitiesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '62387-6'">@code SHALL = '62387-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-intervention" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-plannedIntervention" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-handoffCommParticipants" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.43:2015-08-01-->
    <rule id="AdmissionDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry) &lt;= 1">Cardinality of entry is 0..1</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '46241-6'">@code SHALL = '46241-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@code = '42347-5') and (@codeSystem = '2.16.840.1.113883.6.1')])=1">Cardinality of translation:admissionDiag is 1..1</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-entry" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:entry">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])">act SHALL conform to HospitalAdmissionDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedication-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.36:2014-06-09-->
    <rule id="AdmissionMedication-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]])&gt;=1">Cardinality of entryRelationship:medicationActivity is 1..*</assert>
    </rule>
    <rule id="AdmissionMedication-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '42346-7'">@code SHALL = '42346-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdmissionMedication-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AdmissionMedication-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AdmissionMedication-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="AdmissionMedication-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedicationsSectionEntriesOptional-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.44:2015-08-01-->
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '42346-7'">@code SHALL = '42346-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-entry-admissionMedication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.48:2022-02-14-->
    <rule id="AdvanceDirectiveObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:reference)&gt;=1">Cardinality of reference is 1..*</assert>
      <assert test="count(cda:reference[(@typeCode = 'REFR')])&gt;=1">Cardinality of reference:reference1 is 1..*</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:code">
      <assert test="@code = '75320-2'">@code SHALL = '75320-2'</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-effectiveTime.high" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:effectiveTime/cda:high">
      <assert test="@value or @nullFlavor = 'NA'">If the Advance Directive does not have a specified ending time, the &lt;high&gt; element **SHALL** have the nullFlavor attribute set to *NA* (CONF:1198-32449).</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:value">
      <assert test="@nullFlavor or contains($AdvanceDirectivesContentType, @code)">SHALL be selected from ValueSet AdvanceDirectivesContentType</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.1.58')])=1">Cardinality of templateId:primary is 1..1</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.templateId-primary" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:templateId[(@root = '2.16.840.1.113883.10.20.1.58')]">
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.time" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:time">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole.playingEntity.name" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:playingEntity/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole">
      <assert test="@classCode = 'AGNT'">@classCode SHALL = 'AGNT'</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]">
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/cda:externalDocument">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1.externalDocument.text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/cda:externalDocument/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.108:2022-02-14-->
    <rule id="AdvanceDirectiveOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]])&gt;=1">Cardinality of component:advDirObs is 1..*</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:code">
      <assert test="@code = '45473-6'">@code SHALL = '45473-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-component-advDirObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectivesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.21.1:2022-02-14-->
    <rule id="AdvanceDirectivesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:code">
      <assert test="@code = '42348-3'">@code SHALL = '42348-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-entry-observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-entry-organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AgeObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.31-->
    <rule id="AgeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="AgeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:code">
      <assert test="@code = '445518008'">@code SHALL = '445518008'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="AgeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AgeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AgeObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AgeObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:value">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="AgeObservation-errors-value.unit" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:value/@unit">
      <assert test="contains($AgePQ_UCUM, .)">SHALL be selected from ValueSet AgePQ_UCUM</assert>
    </rule>
  </pattern>
  <pattern id="AllergiesAndIntolerancesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.6.1:2015-08-01-->
    <rule id="AllergiesAndIntolerancesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '48765-2'">@code SHALL = '48765-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-entry-allergyConcern" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-entry-allergyConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])]]/cda:act">
      <assert test="not((cda:statusCode/@code = 'completed')) or cda:effectiveTime/cda:high">If statusCode/@code="completed" Completed, then effectiveTime **SHALL** contain [1..1] high (CONF:1198-10085).</assert>
      <assert test="not((cda:statusCode/@code = 'active')) or cda:effectiveTime/cda:low">If statusCode/@code="active" Active, then effectiveTime **SHALL** contain [1..1] low (CONF:1198-7504).</assert>
    </rule>
  </pattern>
  <pattern id="AllergyConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.30:2015-08-01-->
    <rule id="AllergyConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]">
      <assert test="not((cda:statusCode/@code = 'completed')) or cda:effectiveTime/cda:high">If statusCode/@code="completed" Completed, then effectiveTime **SHALL** contain [1..1] high (CONF:1198-10085).</assert>
      <assert test="not((cda:statusCode/@code = 'active')) or cda:effectiveTime/cda:low">If statusCode/@code="active" Active, then effectiveTime **SHALL** contain [1..1] low (CONF:1198-7504).</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]])=1">Cardinality of entryRelationship:allergyObs is 1..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = 'CONC'">@code SHALL = 'CONC'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.6'">@codeSystem SHALL = '2.16.840.1.113883.5.6'</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:effectiveTime">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-entryRelationship-allergyObs" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AllergyIntoleranceObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.7:2014-06-09-->
    <rule id="AllergyIntoleranceObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']">SHALL conform to (contain the templateId of) SubstanceOrDeviceAllergyIntoleranceObservation</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="AllergyIntoleranceObservation-errors-participant-consumable.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AllergyStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.28:2019-06-20-->
    <rule id="AllergyStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:code">
      <assert test="@code = '33999-4'">@code SHALL = '33999-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:value">
      <assert test="@nullFlavor or contains($AllergyClinicalStatus, @code)">SHALL be selected from ValueSet AllergyClinicalStatus</assert>
    </rule>
  </pattern>
  <pattern id="AnesthesiaSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.25:2014-06-09-->
    <rule id="AnesthesiaSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '59774-0'">@code SHALL = '59774-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-medication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.69:2022-06-01-->
    <rule id="AssessmentScaleObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:derivationExpr) &lt;= 1">Cardinality of derivationExpr is 0..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-interpretationCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:interpretationCode">
      <assert test="@nullFlavor or contains($CDAObservationInterpretation, @code)">SHALL be selected from ValueSet CDAObservationInterpretation</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-entryRelationship-supportingObs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange">
      <assert test="count(cda:observationRange)=1">Cardinality of observationRange is 1..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange.observationRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange">
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange.observationRange.text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange.observationRange.text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleSupportingObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.86:2022-06-01-->
    <rule id="AssessmentScaleSupportingObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)&gt;=1">Cardinality of value is 1..*</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.8-->
    <rule id="AssessmentSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AssessmentSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]]/cda:code">
      <assert test="@code = '51848-0'">@code SHALL = '51848-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentandPlanSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.9:2014-06-09-->
    <rule id="AssessmentandPlanSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AssessmentandPlanSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '51847-2'">@code SHALL = '51847-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AssessmentandPlanSection-errors-entry-plannedProcedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AuthorParticipation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.119-->
    <rule id="AuthorParticipation-errors-root" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="AuthorParticipation-errors-assignedAuthor" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor">
      <assert test="@nullFlavor or (cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)) or (/cda:ClinicalDocument//cda:assignedAuthor[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)])">Authors require addr, telecom, and either assignedPerson/name or assignedAuthoringDevice/manufacturerModelName. These may be present on this author or on another instance of an Author Participation in the document that has an id that matches the first id of this author.</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="AuthorParticipation-errors-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="AuthorParticipation-errors-assignedAuthor.representedOrganization.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
  </pattern>
  <pattern id="AuthorizationActivity-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.1.19-->
    <rule id="AuthorizationActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(@typeCode = 'SUBJ')])&gt;=1">Cardinality of entryRelationship:target is 1..*</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-entryRelationship-target" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SUBJ')]">
      <assert test="((cda:act | cda:encounter | cda:observation | cda:observationMedia | cda:organizer | cda:procedure | cda:regionOfInterest | cda:substanceAdministration | cda:supply))[@moodCode = 'PRMS']">The target of an authorization activity with act/entryRelationship/@typeCode="SUBJ" SHALL be a clinical statement with moodCode="PRMS" Promise (CONF:81-8951).</assert>
    </rule>
  </pattern>
  <pattern id="AverageBloodPressureOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.512:2024-05-01-->
    <rule id="AverageBloodPressureOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]">
      <assert test="@classCode = 'BATTERY'">@classCode SHALL = 'BATTERY'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:component)&gt;=2">Cardinality of component is 2..*</assert>
      <assert test="count(cda:component[(cda:observation/cda:code/@code = '96608-5')])=1">Cardinality of component:systolic is 1..1</assert>
      <assert test="count(cda:component[(cda:observation/cda:code/@code = '96609-3')])=1">Cardinality of component:diastolic is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '96607-7'">@code SHALL = '96607-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]/cda:observation">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic.observation.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]/cda:observation/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic.observation.value" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]/cda:observation/cda:value">
      <assert test="not(@unit) or @unit = 'mm[Hg]'">@unit, if present, SHALL = 'mm[Hg]'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]/cda:observation">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic.observation.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]/cda:observation/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic.observation.value" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]/cda:observation/cda:value">
      <assert test="not(@unit) or @unit = 'mm[Hg]'">@unit, if present, SHALL = 'mm[Hg]'</assert>
    </rule>
  </pattern>
  <pattern id="BasicIndustryObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.504:2023-05-01-->
    <rule id="BasicIndustryObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']">SHALL conform to (contain the templateId of) SocialHistoryObservation</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="BasicIndustryObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '86188-0'">@code SHALL = '86188-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="BasicIndustryObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="BasicOccupationObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.503:2023-05-01-->
    <rule id="BasicOccupationObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']">SHALL conform to (contain the templateId of) SocialHistoryObservation</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
      <assert test="count(cda:subject) &lt;= 1">Cardinality of subject is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]) &lt;= 1">Cardinality of entryRelationship:basic-industry is 0..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '11341-5'">@code SHALL = '11341-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-subject" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:subject">
      <assert test="count(cda:relatedSubject)=1">Cardinality of relatedSubject is 1..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-entryRelationship-basic-industry" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="BirthSexObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.200:2024-05-01-->
    <rule id="BirthSexObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="BirthSexObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '76689-9'">@code SHALL = '76689-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="BirthSexObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="BirthSexObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="BirthSexObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="BirthSexObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="BirthSexObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:value">
      <assert test="@nullFlavor or contains($BirthSex, @code)">SHALL be selected from ValueSet BirthSex</assert>
    </rule>
  </pattern>
  <pattern id="BrandNameObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.301:2019-06-21-->
    <rule id="BrandNameObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="BrandNameObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C71898'">@code SHALL = 'C71898'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="BrandNameObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="BrandNameObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="CareExperiencePreference-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.509:2024-05-01-->
    <rule id="CareExperiencePreference-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '95541-9'">@code SHALL = '95541-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="CarePlan-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.15:2024-05-01-->
    <rule id="CarePlan-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:setId) &lt;= 1">Cardinality of setId is 0..1</assert>
      <assert test="count(cda:versionNumber) &lt;= 1">Cardinality of versionNumber is 0..1</assert>
      <assert test="count(cda:documentationOf)&gt;=1">Cardinality of documentationOf is 1..*</assert>
      <assert test="count(cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')])=1">Cardinality of documentationOf:care-provision is 1..1</assert>
      <assert test="count(cda:componentOf) &lt;= 1">Cardinality of componentOf is 0..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($CarePlanDocumentType, @code)">SHALL be selected from ValueSet CarePlanDocumentType</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:informationRecipient) &lt;= 1">Cardinality of informationRecipient is 0..1</assert>
      <assert test="count(cda:receivedOrganization) &lt;= 1">Cardinality of receivedOrganization is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.informationRecipient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.receivedOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization">
      <assert test="count(cda:standardIndustryClassCode) &lt;= 1">Cardinality of standardIndustryClassCode is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.receivedOrganization.standardIndustryClassCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization/cda:standardIndustryClassCode">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHALL be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:signatureCode)=1">Cardinality of signatureCode is 1..1</assert>
      <assert test="count(sdtc:signatureText) &lt;= 1">Cardinality of signatureText is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:code">
      <assert test="@code = 'ONESELF'">@code SHALL = 'ONESELF'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.111'">@codeSystem SHALL = '2.16.840.1.113883.5.111'</assert>
    </rule>
    <rule id="CarePlan-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:functionCode)=1">Cardinality of functionCode is 1..1</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:functionCode">
      <assert test="@code = '425268008'">@code SHALL = '425268008'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity">
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/@classCode">
      <assert test="contains($INDRoleclassCodes, .)">SHALL be selected from ValueSet INDRoleclassCodes</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="CarePlan-errors-relatedDocument-relatedDocument1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:relatedDocument[(cda:parentDocument)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:parentDocument)=1">Cardinality of parentDocument is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-relatedDocument-relatedDocument1.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:relatedDocument[(cda:parentDocument)]/@typeCode">
      <assert test="contains($X_ActRelationshipDocument, .)">SHALL be selected from ValueSet X_ActRelationshipDocument</assert>
    </rule>
    <rule id="CarePlan-errors-relatedDocument-relatedDocument1.parentDocument" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:relatedDocument[(cda:parentDocument)]/cda:parentDocument">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:setId)=1">Cardinality of setId is 1..1</assert>
      <assert test="count(cda:versionNumber)=1">Cardinality of versionNumber is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="CarePlan-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain a Plan of Treatment Section (identifier: urn:hl7ii:2.16.840.1.113883.10.20.22.2.10:2014-06-09) (CONF:1198-31044).</assert>
      <assert test="count(cda:component)&gt;=2">Cardinality of component is 2..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]])=1">Cardinality of component:healthConcerns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])]])=1">Cardinality of component:goals is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:activities is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])]]) &lt;= 1">Cardinality of component:healthStatusEvalOutcm is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthConcerns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthConcerns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Health Concern Act</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-goals" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-goals.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Goal Observation</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-activities" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthStatusEvalOutcm" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthStatusEvalOutcm.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]]">If section/@nullFlavor is not present, SHALL contain at least one Outcome Observation</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.1:2024-05-01-->
    <rule id="CareTeamMemberAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]">
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)=1">Cardinality of performer is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:schedule is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '92707-9'">@code SHALL = '92707-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer">
      <assert test="count(sdtc:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:assignedPerson or (/cda:ClinicalDocument//cda:performer[cda:assignedEntity/cda:assignedPerson and cda:assignedEntity/cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension]])">If the assignedEntity/id is not referencing a Performer elsewhere in the document with an assignedPerson populated, this assignedEntity SHALL contain exactly one [1..1] assignedPerson (CONF:4515-180).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.assignedPerson" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.assignedPerson.name" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.representedOrganization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization">
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.representedOrganization.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-location" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-addl-functions" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="count(sdtc:functionCode)=1">Cardinality of functionCode is 1..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-addl-functions.sdtcFunctionCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/sdtc:functionCode">
      <assert test="@nullFlavor or contains($CareTeamMemberFunction, @code)">SHALL be selected from ValueSet CareTeamMemberFunction</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-addl-functions.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:participantRole">
      <assert test="@nullFlavor = 'NA'">@nullFlavor SHALL = 'NA'</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and not(cda:act) and (cda:encounter) and not(cda:observation) and not(cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-encounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and not(cda:act) and (cda:encounter) and not(cda:observation) and not(cda:act)]/cda:encounter">
      <assert test="cda:id[1]/@nullFlavor = 'NA' or (/cda:ClinicalDocument//cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']] and cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension])">If the first id does not match an encounter/id from an encounter elsewhere within the same document and the id does not contain @nullFlavor="NA", then this entry SHALL conform to the Encounter Activity (identifier: urn:hl7ii:2.16.840.1.113883.10.20.22.4.49:2015-08-01) (CONF:4515-90).</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-note" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:encounter) and not(cda:observation) and (cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-schedule" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberScheduleObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.3:2022-06-01-->
    <rule id="CareTeamMemberScheduleObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:code">
      <assert test="@code = '57203-2'">@code SHALL = '57203-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:value">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500:2022-06-01-->
    <rule id="CareTeamOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]) &lt;= 1">Cardinality of component:note is 0..1</assert>
      <assert test="count(cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)])&gt;=1">Cardinality of component:member is 1..*</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:code">
      <assert test="@code = '86744-0'">@code SHALL = '86744-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:originalText) &lt;= 1">Cardinality of originalText is 0..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-code.originalText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:code/cda:originalText">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-code.originalText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:code/cda:originalText/cda:reference">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-statusCode.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-effectiveTime" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-lead" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'PPRF')]">
      <assert test="count(sdtc:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-lead.participantRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'PPRF')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole.addr" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole.playingEntity" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:playingEntity">
      <assert test="@classCode = 'PLC'">@classCode SHALL = 'PLC'</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-type" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01'])] and not(cda:encounter)]">
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-entryReference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:encounter)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-encounter" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and not(cda:observation) and (cda:encounter)]">
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-encounter.encounter" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and not(cda:observation) and (cda:encounter)]/cda:encounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-note" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-member" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamTypeObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.2:2019-07-01-->
    <rule id="CareTeamTypeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:code">
      <assert test="@code = '86744-0'">@code SHALL = '86744-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:value/@code">
      <assert test="contains($CareTeamCategory, .)">SHALL be selected from ValueSet CareTeamCategory</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.500:2022-06-01-->
    <rule id="CareTeamsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="CareTeamsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:code">
      <assert test="@code = '85847-2'">@code SHALL = '85847-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamsSection-errors-entry-primary" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="CaregiverCharacteristics-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.72-->
    <rule id="CaregiverCharacteristics-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:value">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or @codeSystem = '2.16.840.1.113883.6.96'">The code **SHALL** be selected from LOINC (codeSystem: 2.16.840.1.113883.6.1) or SNOMED CT (CodeSystem: 2.16.840.1.113883.6.96) (CONF:81-14600).</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-participant" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:participant">
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-participant.time" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:participant/cda:time">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-participant.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:participant/cda:participantRole">
      <assert test="@classCode = 'CAREGIVER'">@classCode SHALL = 'CAREGIVER'</assert>
    </rule>
  </pattern>
  <pattern id="CatalogNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.302:2019-06-21-->
    <rule id="CatalogNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C99286'">@code SHALL = 'C99286'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="CharacteristicsofHomeEnvironment-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.109-->
    <rule id="CharacteristicsofHomeEnvironment-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:code">
      <assert test="@code = '75274-1'">@code SHALL = '75274-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="ChiefComplaintSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1-->
    <rule id="ChiefComplaintSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ChiefComplaintSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]]/cda:code">
      <assert test="@code = '10154-3'">@code SHALL = '10154-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ChiefComplaintandReasonforVisitSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.13-->
    <rule id="ChiefComplaintandReasonforVisitSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ChiefComplaintandReasonforVisitSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]/cda:code">
      <assert test="@code = '46239-0'">@code SHALL = '46239-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="CommentActivity-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.64-->
    <rule id="CommentActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
    </rule>
    <rule id="CommentActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:code">
      <assert test="@code = '48767-8'">@code SHALL = '48767-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CommentActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="CommentActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CommentActivity-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="CompanyNameObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.303:2019-06-21-->
    <rule id="CompanyNameObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C54131'">@code SHALL = 'C54131'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="ComplicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.37:2015-08-01-->
    <rule id="ComplicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ComplicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '55109-3'">@code SHALL = '55109-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ComplicationsSection-errors-entry-problem" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ConsultationNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.4:2024-05-01-->
    <rule id="ConsultationNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:inFulfillmentOf)&gt;=1">Cardinality of inFulfillmentOf is 1..*</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ConsultDocumentType, @code)">SHALL be selected from ValueSet ConsultDocumentType</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
      <assert test="count(cda:scopingOrganization) &lt;= 1">Cardinality of scopingOrganization is 0..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ConsultationNote-errors-inFulfillmentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:inFulfillmentOf">
      <assert test="count(cda:order)=1">Cardinality of order is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-inFulfillmentOf.order" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:inFulfillmentOf/cda:order">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter.encounterParticipant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter.encounterParticipant.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity SHALL contain an assignedPerson or a representedOrganization or both (CONF:1198-32906).</assert>
    </rule>
    <rule id="ConsultationNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]]">**SHALL** include a Reason for Referral or Reason for Visit section (CONF:1198-9504).</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="count(cda:component)&gt;=5">Cardinality of component is 5..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]])=1">Cardinality of component:hpi is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]) &lt;= 1">Cardinality of component:generalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problems is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:results is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHist is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medicalEquipment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-hpi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-socialHist" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medicalEquipment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ContinuityofCareDocumentCCD-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.2:2024-05-01-->
    <rule id="ContinuityofCareDocumentCCD-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:documentationOf)=1">Cardinality of documentationOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '34133-9'">@code SHALL = '34133-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-author" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:author">
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="count(((cda:assignedPerson | cda:assignedAuthoringDevice))) = 1">There **SHALL** be exactly one assignedAuthor/assignedPerson or exactly one assignedAuthor/assignedAuthoringDevice (CONF:4537-16790).</assert>
      <assert test="cda:assignedPerson or (cda:assignedAuthoringDevice and cda:representedOrganization)">Such assignedAuthors **SHALL** contain (exactly one [1..1] assignedPerson) or (exactly one [1..1] assignedAuthoringDevice and exactly one [1..1] representedOrganization) (CONF:1198-8456).</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer">
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="count(cda:component)&gt;=6">Cardinality of component is 6..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problems is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:encounters is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:famHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medEquipment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:payers is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]])=1">Cardinality of component:socialHist is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]])=1">Cardinality of component:vitalSigns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-encounters" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-encounters.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Encounter Activity</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-famHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medEquipment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-payers" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-socialHist" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="CourseofCareSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.64-->
    <rule id="CourseofCareSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="CourseofCareSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)]]/cda:code">
      <assert test="@code = '8648-8'">@code SHALL = '8648-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="CoverageActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.60:2024-05-01-->
    <rule id="CoverageActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')])&gt;=1">Cardinality of entryRelationship:policy is 1..*</assert>
    </rule>
    <rule id="CoverageActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '52556-8'">@code SHALL = '52556-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CoverageActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CoverageActivity-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CoverageActivity-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(cda:sequenceNumber) &lt;= 1">Cardinality of sequenceNumber is 0..1</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy.sequenceNumber" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/cda:sequenceNumber">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/cda:act">
      <assert test="not(cda:participant[@typeCode = 'COV']/cda:participantRole/cda:code[cda:code = 'SELF']) or not(cda:participant[@typeCode = 'HLD'])">When the Subscriber is the patient (COV participant code = 'SELF'), the participant element describing the subscriber **SHALL NOT** be present. This information will be recorded instead in the data elements used to record member information (CONF:4537-17139).</assert>
    </rule>
  </pattern>
  <pattern id="CriticalityObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.145-->
    <rule id="CriticalityObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CriticalityObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:code">
      <assert test="@code = '82606-5'">@code SHALL = '82606-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CriticalityObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CriticalityObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CriticalityObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CriticalityObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($CriticalityObservation, @code)">SHALL be selected from ValueSet CriticalityObservation</assert>
    </rule>
  </pattern>
  <pattern id="CulturalandReligiousObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.111-->
    <rule id="CulturalandReligiousObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:code">
      <assert test="@code = '75281-6'">@code SHALL = '75281-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:value">
      <assert test="not(@code) or @codeSystem = '2.16.840.1.113883.6.96'">If value contains a @code, then @codeSystem SHALL = "2.16.840.1.113883.6.96" (CodeSystem: SNOMED-CT  urn:oid:2.16.840.1.113883.6.96 STATIC) (CONF:1098-32487).</assert>
    </rule>
  </pattern>
  <pattern id="DateOfDiagnosisAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.502:2022-06-01-->
    <rule id="DateOfDiagnosisAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:code">
      <assert test="not(@code) or @code = '77975-1'">@code, if present, SHALL = '77975-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="@nullFlavor or string-length(@value) &gt;= 4">**SHALL** be precise to at least the year</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="DeceasedObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.79:2015-08-01-->
    <rule id="DeceasedObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]) &lt;= 1">Cardinality of entryRelationship:problemObservation is 0..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DeceasedObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:value">
      <assert test="@code = '419099009'">@code SHALL = '419099009'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-entryRelationship-problemObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]">
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="DeviceIdentifierObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.304:2022-06-01-->
    <rule id="DeviceIdentifierObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:code">
      <assert test="@code = 'C101722'">@code SHALL = 'C101722'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:value">
      <assert test="@displayable = 'true'">@displayable SHALL = 'true'</assert>
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="DisabilityStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.505:2023-05-01-->
    <rule id="DisabilityStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '89571-4'">@code SHALL = '89571-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-entryRelationship-assessmentScaleObs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="DischargeDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.24:2015-08-01-->
    <rule id="DischargeDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry) &lt;= 1">Cardinality of entry is 0..1</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '11535-2'">@code SHALL = '11535-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@code = '78375-3') and (@codeSystem = '2.16.840.1.113883.6.1')])=1">Cardinality of translation:translation1 is 1..1</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-entry" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:entry">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01'])">act SHALL conform to HospitalDischargeDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedication-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.35:2016-03-01-->
    <rule id="DischargeMedication-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')])&gt;=1">Cardinality of entryRelationship:medicationActivity is 1..*</assert>
    </rule>
    <rule id="DischargeMedication-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:code">
      <assert test="@code = '10183-2'">@code SHALL = '10183-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)=1">Cardinality of translation is 1..1</assert>
    </rule>
    <rule id="DischargeMedication-errors-code.translation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:code/cda:translation">
      <assert test="@code = '75311-1'">@code SHALL = '75311-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DischargeMedication-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DischargeMedication-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DischargeMedication-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DischargeMedication-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="DischargeMedication-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.11.1:2015-08-01-->
    <rule id="DischargeMedicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Discharge Medication</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '10183-2'">@code SHALL = '10183-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@code = '75311-1') and (@codeSystem = '2.16.840.1.113883.6.1')])=1">Cardinality of translation:translation1 is 1..1</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-entry-dischargeMed" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="DischargeSummary-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.8:2024-05-01-->
    <rule id="DischargeSummary-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($DischargeSummaryDocumentTypeCode, @code)">SHALL be selected from ValueSet DischargeSummaryDocumentTypeCode</assert>
    </rule>
    <rule id="DischargeSummary-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is IND, associatedEntity/@classCode **SHALL** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes STATIC 2011-09-30 (CONF:1198-8469).</assert>
    </rule>
    <rule id="DischargeSummary-errors-participant.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-participant.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity/@classCode">
      <assert test="contains($CDARoleClassAssociative, .)">SHALL be selected from ValueSet CDARoleClassAssociative</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:dischargeDispositionCode)=1">Cardinality of dischargeDispositionCode is 1..1</assert>
      <assert test="count(cda:responsibleParty) &lt;= 1">Cardinality of responsibleParty is 0..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.responsibleParty" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.responsibleParty.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity SHALL contain an assignedPerson or a representedOrganization or both (CONF:1198-32905).</assert>
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity **SHALL** contain an assignedPerson or a representedOrganization or both (CONF:1198-32898).</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.encounterParticipant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.encounterParticipant.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity **SHALL** contain an assignedPerson or a representedOrganization or both (CONF:1198-32899).</assert>
    </rule>
    <rule id="DischargeSummary-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="count(cda:component)&gt;=7">Cardinality of component is 7..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)])]])=1">Cardinality of component:hospitalCourse is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]])=1">Cardinality of component:dischargeDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:dischargeMeds is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]])=1">Cardinality of component:planOfTreatment is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:hpi is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionDx is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionMeds is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)])]])=1">Cardinality of component:hospitalConsults is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)])]]) &lt;= 1">Cardinality of component:dischargeInstructions is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)])]]) &lt;= 1">Cardinality of component:dischargePhysical is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)])]]) &lt;= 1">Cardinality of component:dischargeStudies is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunization is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:problems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]])=1">Cardinality of component:procedures is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHist is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hospitalCourse" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeMeds" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeMeds.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Discharge Medication</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hpi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-admissionDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-admissionMeds" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hospitalConsults" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeInstructions" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargePhysical" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeStudies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-immunization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-immunization.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-socialHist" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
  </pattern>
  <pattern id="DistinctIdentificationCodeObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.308:2019-06-21-->
    <rule id="DistinctIdentificationCodeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C113843'">@code SHALL = 'C113843'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="DrugMonitoringAct-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.123-->
    <rule id="DrugMonitoringAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
      <assert test="count(cda:participant[(@typeCode = 'RESP')])&gt;=1">Cardinality of participant:responsible is 1..*</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:code">
      <assert test="@code = '395170001'">@code SHALL = '395170001'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole">
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity">
      <assert test="@classCode = 'PSN'">@classCode SHALL = 'PSN'</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole.playingEntity.name" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
  </pattern>
  <pattern id="DrugVehicle-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.24-->
    <rule id="DrugVehicle-errors-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]">
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="DrugVehicle-errors-code" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]/cda:code">
      <assert test="@code = '412307009'">@code SHALL = '412307009'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="DrugVehicle-errors-playingEntity" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]/cda:playingEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:name) &lt;= 1">Cardinality of name is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="EncounterActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.49:2015-08-01-->
    <rule id="EncounterActivity-errors-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ENC'">@classCode SHALL = 'ENC'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(sdtc:dischargeDispositionCode) &lt;= 1">Cardinality of dischargeDispositionCode is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code">
      <assert test="count(cda:originalText) &lt;= 1">Cardinality of originalText is 0..1</assert>
      <assert test="count(cda:translation) &lt;= 1">Cardinality of translation is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-code.originalText" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code/cda:originalText">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-code.originalText.reference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code/cda:originalText/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EncounterActivity-errors-text" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-text.reference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EncounterActivity-errors-performer" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-performer.assignedEntity" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:performer/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-participant-location" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:participant[cda:participantRole[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])] and (@typeCode = 'LOC')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:participant[cda:participantRole[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])] and (@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-indication" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-diagnosis" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="EncounterDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.80:2024-05-01-->
    <rule id="EncounterDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '29308-4'">@code SHALL = '29308-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="EncountersSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.22.1:2015-08-01-->
    <rule id="EncountersSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Encounter Activity</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="EncountersSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '46240-8'">@code SHALL = '46240-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="EncountersSection-errors-entry-encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:entry[cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])]]">
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="EntryReference-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.122-->
    <rule id="EntryReference-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="EntryReference-errors-id" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:id">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
    </rule>
    <rule id="EntryReference-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor = 'NP'">@nullFlavor SHALL = 'NP'</assert>
    </rule>
    <rule id="EntryReference-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EntryReference-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EntryReference-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
  </pattern>
  <pattern id="EstimatedDateofDelivery-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.1-->
    <rule id="EstimatedDateofDelivery-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]">
      <assert test="count(cda:typeId)=0">Cardinality of typeId is 0..0</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:derivationExpr)=0">Cardinality of derivationExpr is 0..0</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=0">Cardinality of effectiveTime is 0..0</assert>
      <assert test="count(cda:priorityCode)=0">Cardinality of priorityCode is 0..0</assert>
      <assert test="count(cda:repeatNumber)=0">Cardinality of repeatNumber is 0..0</assert>
      <assert test="count(cda:languageCode)=0">Cardinality of languageCode is 0..0</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:interpretationCode)=0">Cardinality of interpretationCode is 0..0</assert>
      <assert test="count(cda:methodCode)=0">Cardinality of methodCode is 0..0</assert>
      <assert test="count(cda:targetSiteCode)=0">Cardinality of targetSiteCode is 0..0</assert>
      <assert test="count(cda:subject)=0">Cardinality of subject is 0..0</assert>
      <assert test="count(cda:specimen)=0">Cardinality of specimen is 0..0</assert>
      <assert test="count(cda:performer)=0">Cardinality of performer is 0..0</assert>
      <assert test="count(cda:informant)=0">Cardinality of informant is 0..0</assert>
      <assert test="count(cda:participant)=0">Cardinality of participant is 0..0</assert>
      <assert test="count(cda:entryRelationship)=0">Cardinality of entryRelationship is 0..0</assert>
      <assert test="count(cda:reference)=0">Cardinality of reference is 0..0</assert>
      <assert test="count(cda:precondition)=0">Cardinality of precondition is 0..0</assert>
      <assert test="count(cda:referenceRange)=0">Cardinality of referenceRange is 0..0</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:code">
      <assert test="@code = '11778-8'">@code SHALL = '11778-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-interpretationCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:interpretationCode">
      <assert test="@nullFlavor or contains($CDAObservationInterpretation, @code)">SHALL be selected from ValueSet CDAObservationInterpretation</assert>
    </rule>
  </pattern>
  <pattern id="ExpirationDateObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.309:2019-06-21-->
    <rule id="ExpirationDateObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C101670'">@code SHALL = 'C101670'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ExternalDocumentReference-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.115:2014-06-09-->
    <rule id="ExternalDocumentReference-errors-root" context="cda:externalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09']]">
      <assert test="@classCode = 'DOCCLIN'">@classCode SHALL = 'DOCCLIN'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:setId) &lt;= 1">Cardinality of setId is 0..1</assert>
      <assert test="count(cda:versionNumber) &lt;= 1">Cardinality of versionNumber is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryDeathObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.47-->
    <rule id="FamilyHistoryDeathObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:value">
      <assert test="@code = '419099009'">@code SHALL = '419099009'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.46:2015-08-01-->
    <rule id="FamilyHistoryObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]) &lt;= 1">Cardinality of entryRelationship:ageObservation is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]) &lt;= 1">Cardinality of entryRelationship:deathObservation is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-ageObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]">
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-deathObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.45:2015-08-01-->
    <rule id="FamilyHistoryOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:subject)=1">Cardinality of subject is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject">
      <assert test="count(cda:relatedSubject)=1">Cardinality of relatedSubject is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject.relatedSubject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject">
      <assert test="@classCode = 'PRS'">@classCode SHALL = 'PRS'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:subject) &lt;= 1">Cardinality of subject is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject.relatedSubject.subject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:subject">
      <assert test="count(sdtc:id) &lt;= 1">Cardinality of id is 0..1</assert>
      <assert test="count(cda:administrativeGenderCode)=1">Cardinality of administrativeGenderCode is 1..1</assert>
      <assert test="count(cda:birthTime) &lt;= 1">Cardinality of birthTime is 0..1</assert>
      <assert test="count(sdtc:deceasedInd) &lt;= 1">Cardinality of deceasedInd is 0..1</assert>
      <assert test="count(sdtc:deceasedTime) &lt;= 1">Cardinality of deceasedTime is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject.relatedSubject.subject.administrativeGenderCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:subject/cda:administrativeGenderCode">
      <assert test="@nullFlavor or contains($AdministrativeGenderHL7V3, @code)">SHALL be selected from ValueSet AdministrativeGenderHL7V3</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-component" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:component">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-component.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:component/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01'])">observation SHALL conform to FamilyHistoryObservation</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistorySection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.15:2015-08-01-->
    <rule id="FamilyHistorySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="FamilyHistorySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '10157-6'">@code SHALL = '10157-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="FamilyHistorySection-errors-entry-organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.67:2014-06-09-->
    <rule id="FunctionalStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:nonMedSupply is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:caregiverCharacteristics is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]) &lt;= 1">Cardinality of entryRelationship:assessmentScaleObservation is 0..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '54522-8'">@code SHALL = '54522-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-nonMedSupply" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-caregiverCharacteristics" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-assessmentScaleObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.66:2014-06-09-->
    <rule id="FunctionalStatusOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:component)&gt;=2">Cardinality of component is 2..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]])&gt;=1">Cardinality of component:functionalStatus is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]])&gt;=1">Cardinality of component:selfCare is 1..*</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-component-functionalStatus" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-component-selfCare" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.14:2014-06-09-->
    <rule id="FunctionalStatusSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '47420-5'">@code SHALL = '47420-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-funcStatusOrganizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-funcStatusObs" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-caregiverCharacteristics" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-assessmentScale" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-nonMedSupply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-selfCareActivity" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-sensoryStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="GenderIdentityObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.34.3.45:2023-05-01-->
    <rule id="GenderIdentityObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']">SHALL conform to (contain the templateId of) SocialHistoryObservation</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '76691-5'">@code SHALL = '76691-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@nullFlavor or contains($GenderIdentity, @code)">SHALL be selected from ValueSet GenderIdentity</assert>
    </rule>
  </pattern>
  <pattern id="GeneralStatusSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.2.5-->
    <rule id="GeneralStatusSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="GeneralStatusSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)]]/cda:code">
      <assert test="@code = '10210-3'">@code SHALL = '10210-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="GoalObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.121:2022-06-01-->
    <rule id="GoalObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'GOL'">@moodCode SHALL = 'GOL'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:priorityPreference is 0..1</assert>
    </rule>
    <rule id="GoalObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="GoalObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="GoalObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-statusCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="GoalObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-refersTo" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'REFR')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-componentEntry" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'COMP')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-priorityPreference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-goal" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-progressTowardGoal" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="GoalsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.60-->
    <rule id="GoalsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Goal Observation</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="GoalsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:code">
      <assert test="@code = '61146-7'">@code SHALL = '61146-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="GoalsSection-errors-entry-goal" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="HandoffCommunicationParticipants-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.141-->
    <rule id="HandoffCommunicationParticipants-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
      <assert test="count(cda:participant[(@typeCode = 'IRCP')])&gt;=1">Cardinality of participant:infoRecipient is 1..*</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:code">
      <assert test="@code = '432138007'">@code SHALL = '432138007'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:playingEntity) &lt;= 1">Cardinality of playingEntity is 0..1</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.132:2022-06-01-->
    <rule id="HealthConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:code">
      <assert test="@code = '75310-3'">@code SHALL = '75310-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HealthConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="HealthConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-observations" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:organizer) and (@typeCode = 'REFR')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-acts" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-organizers" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-related-entries" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-component-health-concern-acts" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'COMP')]">
      <assert test="/cda:ClinicalDocument//cda:act[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.132' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = current()/cda:act/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:act/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:act/cda:id[1]/@extension]]">The Entry Reference template **SHALL** contain an id that references a Health Concern Act (CONF:4515-32745).</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.58:2015-08-01-->
    <rule id="HealthConcernsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Health Concern Act</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '75310-3'">@code SHALL = '75310-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-healthStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])] and not(cda:act)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-healthConcern" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-riskConcern" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusEvaluationsandOutcomesSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.61-->
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]]">If section/@nullFlavor is not present, SHALL contain at least one Outcome Observation</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:code">
      <assert test="@code = '11383-7'">@code SHALL = '11383-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-entry-outcome" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.5:2014-06-09-->
    <rule id="HealthStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '11323-3'">@code SHALL = '11323-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:value">
      <assert test="@nullFlavor or contains($HealthStatus, @code)">SHALL be selected from ValueSet HealthStatus</assert>
    </rule>
  </pattern>
  <pattern id="HighestPressureUlcerStage-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.77-->
    <rule id="HighestPressureUlcerStage-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:code">
      <assert test="@code = '420905001'">@code SHALL = '420905001'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="HistoryandPhysical-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.3:2024-05-01-->
    <rule id="HistoryandPhysical-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($HPDocumentType, @code)">SHALL be selected from ValueSet HPDocumentType</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:responsibleParty) &lt;= 1">Cardinality of responsibleParty is 0..1</assert>
      <assert test="count(cda:location) &lt;= 1">Cardinality of location is 0..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter.responsibleParty" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty">
      <assert test="cda:assignedEntity/cda:assignedPerson or cda:assignedEntity/cda:representedOrganization">The responsibleParty element, if present, **SHALL** contain an assignedEntity element, which **SHALL** contain an assignedPerson element, a representedOrganization element, or both (CONF:1198-8348).</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter.encounterParticipant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant">
      <assert test="cda:assignedEntity/cda:assignedPerson or cda:assignedEntity/cda:representedOrganization">An encounterParticipant element, if present, SHALL contain an assignedEntity element, which SHALL contain an assignedPerson element, a representedOrganization element, or both (CONF:1198-8343).</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]] or cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]]">This structuredBody **SHALL** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) or a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12).</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="count(cda:component)&gt;=12">Cardinality of component is 12..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]])=1">Cardinality of component:familyHistory is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]])=1">Cardinality of component:generalStatus is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]])=1">Cardinality of component:pastMedicalHistory is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:historyPresentIllness is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:instructions is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]])=1">Cardinality of component:physicalExam is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:problems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]])=1">Cardinality of component:reviewOfSystems is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]])=1">Cardinality of component:socialHistory is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]])=1">Cardinality of component:vitalSigns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-historyPresentIllness" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-instructions" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-instructions.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Instruction</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
  </pattern>
  <pattern id="HistoryofPresentIllnessSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.4-->
    <rule id="HistoryofPresentIllnessSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HistoryofPresentIllnessSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]/cda:code">
      <assert test="@code = '10164-2'">@code SHALL = '10164-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalAdmissionDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.34:2015-08-01-->
    <rule id="HospitalAdmissionDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '46241-6'">@code SHALL = '46241-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="HospitalConsultationsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.42-->
    <rule id="HospitalConsultationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalConsultationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)]]/cda:code">
      <assert test="@code = '18841-7'">@code SHALL = '18841-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalCourseSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.5-->
    <rule id="HospitalCourseSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalCourseSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)]]/cda:code">
      <assert test="@code = '8648-8'">@code SHALL = '8648-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.33:2015-08-01-->
    <rule id="HospitalDischargeDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '11535-2'">@code SHALL = '11535-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeInstructionsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.41-->
    <rule id="HospitalDischargeInstructionsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalDischargeInstructionsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)]]/cda:code">
      <assert test="@code = '8653-8'">@code SHALL = '8653-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargePhysicalSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.26-->
    <rule id="HospitalDischargePhysicalSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalDischargePhysicalSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)]]/cda:code">
      <assert test="@code = '10184-0'">@code SHALL = '10184-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeStudiesSummarySection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.16-->
    <rule id="HospitalDischargeStudiesSummarySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalDischargeStudiesSummarySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)]]/cda:code">
      <assert test="@code = '11493-4'">@code SHALL = '11493-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.52:2015-08-01-->
    <rule id="ImmunizationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(@negationInd)=1">Cardinality of @negationInd is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:approachSiteCode) &lt;= 1">Cardinality of approachSiteCode is 0..1</assert>
      <assert test="count(cda:doseQuantity) &lt;= 1">Cardinality of doseQuantity is 0..1</assert>
      <assert test="count(cda:administrationUnitCode) &lt;= 1">Cardinality of administrationUnitCode is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:performer) &lt;= 1">Cardinality of performer is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:medSupplyOrder is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]) &lt;= 1">Cardinality of entryRelationship:medDispense is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:reactionObs is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:immunizationNotGiven is 0..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-statusCode.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-repeatNumber" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:repeatNumber">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-administrationUnitCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:administrationUnitCode">
      <assert test="@nullFlavor or contains($AdministrationUnitDoseForm, @code)">SHALL be selected from ValueSet AdministrationUnitDoseForm</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-participant-drugVehicle" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:participant[(@typeCode = 'CSM')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-participant-drugVehicle.participantRole" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)])">participantRole SHALL conform to DrugVehicle</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication.observation.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation/cda:code">
      <assert test="@code = '59785-6'">@code SHALL = '59785-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medSupplyOrder" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medDispense" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-reactionObs" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="@typeCode = 'CAUS'">@typeCode SHALL = 'CAUS'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-immunizationNotGiven" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-substanceAdmin" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:observation) and not(cda:supply)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:sequenceNumber) &lt;= 1">Cardinality of sequenceNumber is 0..1</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-precondition-substanceAdmin" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:precondition[cda:criterion[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationMedicationInformation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.54:2014-06-09-->
    <rule id="ImmunizationMedicationInformation-errors-root" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:manufacturedMaterial)=1">Cardinality of manufacturedMaterial is 1..1</assert>
      <assert test="count(cda:manufacturerOrganization) &lt;= 1">Cardinality of manufacturerOrganization is 0..1</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-errors-manufacturedMaterial" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/cda:manufacturedMaterial">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:lotNumberText) &lt;= 1">Cardinality of lotNumberText is 0..1</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-errors-manufacturedMaterial.code" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/cda:manufacturedMaterial/cda:code">
      <assert test="@nullFlavor or contains($CVXVaccinesAdministeredVaccineSet, @code)">SHALL be selected from ValueSet CVXVaccinesAdministeredVaccineSet</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationNotGivenReason-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.53:2024-05-01-->
    <rule id="ImmunizationNotGivenReason-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '71798-3'">@code SHALL = '71798-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:value">
      <assert test="@nullFlavor or contains($NoImmunizationReason, @code)">SHALL be selected from ValueSet NoImmunizationReason</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.2.1:2015-08-01-->
    <rule id="ImmunizationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '11369-6'">@code SHALL = '11369-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-entry-activity" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-entry-activity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
  </pattern>
  <pattern id="ImplantableDeviceStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.305:2019-06-21-->
    <rule id="ImplantableDeviceStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C160939'">@code SHALL = 'C160939'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:value/@code">
      <assert test="contains($ImplantableDeviceStatus, .)">SHALL be selected from ValueSet ImplantableDeviceStatus</assert>
    </rule>
  </pattern>
  <pattern id="Indication-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.19:2023-05-01-->
    <rule id="Indication-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
    </rule>
    <rule id="Indication-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="Indication-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="Indication-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="Instruction-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.20:2014-06-09-->
    <rule id="Instruction-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="Instruction-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="Instruction-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="Instruction-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="InstructionsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.45:2014-06-09-->
    <rule id="InstructionsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Instruction</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="InstructionsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '69730-0'">@code SHALL = '69730-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="InstructionsSection-errors-entry-instruction" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="InterventionAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.131:2015-08-01-->
    <rule id="InterventionAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="InterventionAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '362956003'">@code SHALL = '362956003'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="InterventionAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="InterventionAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="InterventionAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="InterventionAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-advanceDirectiveObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-immunizationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-interventionAct" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-procedureActivityProcedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-encounterActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])] and not(cda:supply)]">
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-instruction" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nonMedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nutritionRecommendation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRefr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRson" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'RSON') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.121' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = current()/cda:act/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:act/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:act/cda:id[1]/@extension]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-handoffCommunicationParticipants" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-plannedInterventionAct" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="LatexSafetyObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.314:2019-06-21-->
    <rule id="LatexSafetyObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C160938'">@code SHALL = 'C160938'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:value/@code">
      <assert test="contains($DeviceLatexSafety, .)">SHALL be selected from ValueSet DeviceLatexSafety</assert>
    </rule>
  </pattern>
  <pattern id="LongitudinalCareWoundObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.114:2015-08-01-->
    <rule id="LongitudinalCareWoundObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) ProblemObservation</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:targetSiteCode) &lt;= 1">Cardinality of targetSiteCode is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:highestPressureUlcerStage is 0..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-targetSiteCode.qualifier" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-targetSiteCode.qualifier.name" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier/cda:name">
      <assert test="@code = '272741003'">@code SHALL = '272741003'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-targetSiteCode.qualifier.value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundMeasurementObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundCharacteristic" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-numberofPressureUlcersObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])] and not(cda:act)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-highestPressureUlcerStage" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="LotOrBatchNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.315:2019-06-21-->
    <rule id="LotOrBatchNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C101672'">@code SHALL = 'C101672'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="MRISafetyObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.318:2019-06-21-->
    <rule id="MRISafetyObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C106044'">@code SHALL = 'C106044'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:value/@code">
      <assert test="contains($DeviceMagneticResonanceMRSafety, .)">SHALL be selected from ValueSet DeviceMagneticResonanceMRSafety</assert>
    </rule>
  </pattern>
  <pattern id="ManufacturingDateObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.316:2019-06-21-->
    <rule id="ManufacturingDateObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C101669'">@code SHALL = 'C101669'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentOrganizer-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.135-->
    <rule id="MedicalEquipmentOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]">
      <assert test="cda:component[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]] or cda:component[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">Either Non-Medicinal Supply Activity (templateId:2.16.840.1.113883.10.20.22.4.50:2014-06-09) **OR** Procedure Activity Procedure (templateId:2.16.840.1.113883.10.20.22.4.14:2014-06-09) **SHALL** be present (CONF:1098-32380).</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-statusCode.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:statusCode/@code">
      <assert test="contains($ResultStatus, .)">SHALL be selected from ValueSet ResultStatus</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-effectiveTime" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-component-nonMedicalSupply" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:procedure)]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-component-procedureActivity" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.23:2014-06-09-->
    <rule id="MedicalEquipmentSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '46264-8'">@code SHALL = '46264-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-medicalEquip" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])] and not(cda:procedure) and not(cda:supply)]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-medicalEquip.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])] and not(cda:procedure) and not(cda:supply)]/cda:organizer">
      <assert test="cda:component[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]] or cda:component[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">Either Non-Medicinal Supply Activity (templateId:2.16.840.1.113883.10.20.22.4.50:2014-06-09) **OR** Procedure Activity Procedure (templateId:2.16.840.1.113883.10.20.22.4.14:2014-06-09) **SHALL** be present (CONF:1098-32380).</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-nonMedSupply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:procedure) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:supply)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicalGeneralHistorySection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.39-->
    <rule id="MedicalGeneralHistorySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MedicalGeneralHistorySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)]]/cda:code">
      <assert test="@code = '11329-0'">@code SHALL = '11329-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="MedicationActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.16:2014-06-09-->
    <rule id="MedicationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)&gt;=1">Cardinality of effectiveTime is 1..*</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value])=1">Cardinality of effectiveTime:duration is 1..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='EIVL_TS']) &lt;= 1">Cardinality of effectiveTime:periodicFrequency is 0..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='PIVL_TS']) &lt;= 1">Cardinality of effectiveTime:eventFrequency is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:approachSiteCode) &lt;= 1">Cardinality of approachSiteCode is 0..1</assert>
      <assert test="count(cda:doseQuantity)=1">Cardinality of doseQuantity is 1..1</assert>
      <assert test="count(cda:rateQuantity) &lt;= 1">Cardinality of rateQuantity is 0..1</assert>
      <assert test="count(cda:maxDoseQuantity) &lt;= 1">Cardinality of maxDoseQuantity is 0..1</assert>
      <assert test="count(cda:administrationUnitCode) &lt;= 1">Cardinality of administrationUnitCode is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:performer) &lt;= 1">Cardinality of performer is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:supplyOrder is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:drugMonitoring is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="MedicationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-statusCode.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:statusCode/@code">
      <assert test="contains($MedicationStatus, .)">SHALL be selected from ValueSet MedicationStatus</assert>
    </rule>
    <rule id="MedicationActivity-errors-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="(@value or cda:low) and (not((@value and cda:low)))">This effectiveTime **SHALL** contain either a low or a @value but not both (CONF:1098-32890).</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-effectiveTime-periodicFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='EIVL_TS']">
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="MedicationActivity-errors-effectiveTime-eventFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='PIVL_TS']">
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="MedicationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="MedicationActivity-errors-rateQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:rateQuantity">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-administrationUnitCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:administrationUnitCode">
      <assert test="@nullFlavor or contains($AdministrationUnitDoseForm, @code)">SHALL be selected from ValueSet AdministrationUnitDoseForm</assert>
    </rule>
    <rule id="MedicationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation</assert>
    </rule>
    <rule id="MedicationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="MedicationActivity-errors-participant-drugVehicle" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-participant-drugVehicle.participantRole" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)])">participantRole SHALL conform to DrugVehicle</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-supplyOrder" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-medicationDispense" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-reaction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:supply)]">
      <assert test="@typeCode = 'CAUS'">@typeCode SHALL = 'CAUS'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-drugMonitoring" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-substanceAdministered" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:supply)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:sequenceNumber) &lt;= 1">Cardinality of sequenceNumber is 0..1</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-adherence" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-signature" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])] and not(cda:observation) and not(cda:act) and not(cda:supply)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-precondition" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:precondition">
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-precondition.criterion" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:precondition/cda:criterion">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])">criterion SHALL conform to PreconditionforSubstanceAdministration</assert>
    </rule>
  </pattern>
  <pattern id="MedicationAdherence-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.508:2023-05-01-->
    <rule id="MedicationAdherence-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]">
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '71799-1'">@code SHALL = '71799-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationAdherence-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationAdherence-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="MedicationAdherence-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-informant" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:informant">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-informant.assignedEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:informant/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicationDispense-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.18:2023-05-01-->
    <rule id="MedicationDispense-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]">
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:product)=1">Cardinality of product is 1..1</assert>
      <assert test="count(cda:performer) &lt;= 1">Cardinality of performer is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:entryRelationship1 is 0..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationDispense-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="MedicationDispense-errors-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:product">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-product.manufacturedProduct" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:product/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation or ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="MedicationDispense-errors-performer" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-performer.assignedEntity" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-performer.assignedEntity.addr" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="MedicationDispense-errors-entryRelationship-entryRelationship1" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicationFreeTextSig-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.147-->
    <rule id="MedicationFreeTextSig-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]">
      <assert test="count(cda:typeId)=0">Cardinality of typeId is 0..0</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=0">Cardinality of statusCode is 0..0</assert>
      <assert test="count(cda:effectiveTime)=0">Cardinality of effectiveTime is 0..0</assert>
      <assert test="count(cda:priorityCode)=0">Cardinality of priorityCode is 0..0</assert>
      <assert test="count(cda:repeatNumber)=0">Cardinality of repeatNumber is 0..0</assert>
      <assert test="count(cda:routeCode)=0">Cardinality of routeCode is 0..0</assert>
      <assert test="count(cda:approachSiteCode)=0">Cardinality of approachSiteCode is 0..0</assert>
      <assert test="count(cda:doseQuantity)=0">Cardinality of doseQuantity is 0..0</assert>
      <assert test="count(cda:rateQuantity)=0">Cardinality of rateQuantity is 0..0</assert>
      <assert test="count(cda:maxDoseQuantity)=0">Cardinality of maxDoseQuantity is 0..0</assert>
      <assert test="count(cda:administrationUnitCode)=0">Cardinality of administrationUnitCode is 0..0</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:subject)=0">Cardinality of subject is 0..0</assert>
      <assert test="count(cda:specimen)=0">Cardinality of specimen is 0..0</assert>
      <assert test="count(cda:performer)=0">Cardinality of performer is 0..0</assert>
      <assert test="count(cda:informant)=0">Cardinality of informant is 0..0</assert>
      <assert test="count(cda:participant)=0">Cardinality of participant is 0..0</assert>
      <assert test="count(cda:entryRelationship)=0">Cardinality of entryRelationship is 0..0</assert>
      <assert test="count(cda:precondition)=0">Cardinality of precondition is 0..0</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:code">
      <assert test="@code = '76662-6'">@code SHALL = '76662-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(cda:manufacturedLabeledDrug)=1">Cardinality of manufacturedLabeledDrug is 1..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-consumable.manufacturedProduct.manufacturedLabeledDrug" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:consumable/cda:manufacturedProduct/cda:manufacturedLabeledDrug">
      <assert test="@nullFlavor = 'NA'">@nullFlavor SHALL = 'NA'</assert>
    </rule>
  </pattern>
  <pattern id="MedicationInformation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.23:2014-06-09-->
    <rule id="MedicationInformation-errors-root" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']]">
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:manufacturedMaterial)=1">Cardinality of manufacturedMaterial is 1..1</assert>
      <assert test="count(cda:manufacturerOrganization) &lt;= 1">Cardinality of manufacturerOrganization is 0..1</assert>
    </rule>
    <rule id="MedicationInformation-errors-manufacturedMaterial" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']]/cda:manufacturedMaterial">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicationSupplyOrder-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.17:2014-06-09-->
    <rule id="MedicationSupplyOrder-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]">
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime[(cda:high)]) &lt;= 1">Cardinality of effectiveTime:when is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:product) &lt;= 1">Cardinality of product is 0..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
      <assert test="count(cda:entryRelationship) &lt;= 1">Cardinality of entryRelationship is 0..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-statusCode.code" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-effectiveTime-when" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:effectiveTime[(cda:high)]">
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:product">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-product.manufacturedProduct" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:product/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation or ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-entryRelationship" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-entryRelationship.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsAdministeredSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.38:2014-06-09-->
    <rule id="MedicationsAdministeredSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entry:medication is 0..1</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '29549-3'">@code SHALL = '29549-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-entry-medication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.1.1:2014-06-09-->
    <rule id="MedicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MedicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '10160-0'">@code SHALL = '10160-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationsSection-errors-entry-medActivity" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="MedicationsSection-errors-entry-medActivity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.74:2024-05-01-->
    <rule id="MentalStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:code is 0..1</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '8693-4'">@code SHALL = '8693-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-entryRelationship-assessmentScale" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.75:2015-08-01-->
    <rule id="MentalStatusOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]])&gt;=1">Cardinality of component:mentalStatus is 1..*</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-component-mentalStatus" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.56:2015-08-01-->
    <rule id="MentalStatusSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '10190-7'">@code SHALL = '10190-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-mentalStatusOrganizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01'])] and not(cda:observation)]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-mentalStatusObs" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-assessmentScale" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ModelNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.317:2019-06-21-->
    <rule id="ModelNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C99285'">@code SHALL = 'C99285'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="NonMedicinalSupplyActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.50:2014-06-09-->
    <rule id="NonMedicinalSupplyActivity-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]">
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:participant[(@typeCode = 'PRD')]) &lt;= 1">Cardinality of participant:product is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-moodCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-statusCode.code" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-participant-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'PRD')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-participant-product.participantRole" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'PRD')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)])">participantRole SHALL conform to ProductInstance</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-entryRelationship-instruction" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="NoteActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.202:2016-11-01-->
    <rule id="NoteActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
    </rule>
    <rule id="NoteActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:code">
      <assert test="@code = '34109-9'">@code SHALL = '34109-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NoteActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:text">
      <assert test="not(@mediaType) or (@representation = 'B64' and text()[normalize-space()])">If @mediaType is present, the text SHALL contain exactly one [1..1] @representation="B64" and mixed content corresponding to the contents of the note (CONF:3250-16912).</assert>
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="NoteActivity-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:playingEntity) &lt;= 1">Cardinality of playingEntity is 0..1</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.participantRole.playingEntity.name" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole/cda:playingEntity/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="NoteActivity-errors-entryRelationship-encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:entryRelationship[(cda:encounter)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-entryRelationship-encounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:entryRelationship[(cda:encounter)]/cda:encounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="NoteActivity-errors-reference-externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:reference[(cda:externalDocument)]">
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-reference-externalDocument.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:reference[(cda:externalDocument)]/cda:externalDocument">
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="NotesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.65:2016-11-01-->
    <rule id="NotesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Note Activity</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="NotesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NotesSection-errors-entry-note" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="NumberofPressureUlcersObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.76:2024-05-01-->
    <rule id="NumberofPressureUlcersObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)])=1">Cardinality of entryRelationship:stage is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '2264892003'">@code SHALL = '2264892003'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@codeSystem = '2.16.840.1.113883.6.1') and (@code = '75277-4')])=1">Cardinality of translation:translation1 is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage.observation.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation/cda:code">
      <assert test="@code = '91150-3'">@code SHALL = '91150-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="NutritionAssessment-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.138-->
    <rule id="NutritionAssessment-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="NutritionAssessment-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:code">
      <assert test="@code = '75303-8'">@code SHALL = '75303-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NutritionAssessment-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NutritionAssessment-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NutritionAssessment-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="NutritionAssessment-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="NutritionRecommendation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.130-->
    <rule id="NutritionRecommendation-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/@moodCode">
      <assert test="contains($PlannedMoodCodeActEncounterProcedure, .)">SHALL be selected from ValueSet PlannedMoodCodeActEncounterProcedure</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedEncounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:supply) and not(cda:procedure)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedMedActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedMedActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedProc" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]/cda:supply">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
    </rule>
  </pattern>
  <pattern id="NutritionSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.57-->
    <rule id="NutritionSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="NutritionSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:code">
      <assert test="@code = '61144-2'">@code SHALL = '61144-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NutritionSection-errors-entry-nutritionalStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="NutritionalStatusObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.124-->
    <rule id="NutritionalStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]])&gt;=1">Cardinality of entryRelationship:nutritionAssessment is 1..*</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:code">
      <assert test="@code = '75305-3'">@code SHALL = '75305-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-entryRelationship-nutritionAssessment" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ObjectiveSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.21.2.1-->
    <rule id="ObjectiveSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ObjectiveSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)]]/cda:code">
      <assert test="@code = '61149-1'">@code SHALL = '61149-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.7:2024-05-01-->
    <rule id="OperativeNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:documentationOf)&gt;=1">Cardinality of documentationOf is 1..*</assert>
      <assert test="count(cda:authorization) &lt;= 1">Cardinality of authorization is 0..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($SurgicalOperationNoteDocumentTypeCode, @code)">SHALL be selected from ValueSet SurgicalOperationNoteDocumentTypeCode</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(@typeCode = 'PPRF')])&gt;=1">Cardinality of performer:primary is 1..*</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(((cda:width | cda:high))) = 1">Width and high are mutually exclusive. If width is known, high **SHALL NOT** be present. If with is not present, **SHALL** include high.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:width) &lt;= 1">Cardinality of width is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-primary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]">
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-primary.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHALL be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-secondary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]">
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-secondary.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHALL be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization">
      <assert test="@typeCode = 'AUTH'">@typeCode SHALL = 'AUTH'</assert>
      <assert test="count(cda:consent)=1">Cardinality of consent is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization.consent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization/cda:consent">
      <assert test="@classCode = 'CONS'">@classCode SHALL = 'CONS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization.consent.statusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization/cda:consent/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="OperativeNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="count(cda:component)&gt;=8">Cardinality of component is 8..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]])=1">Cardinality of component:anesthesia is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]])=1">Cardinality of component:complications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]])=1">Cardinality of component:preopDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]])=1">Cardinality of component:estBloodLoss is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]])=1">Cardinality of component:findings is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]])=1">Cardinality of component:specimensTaken is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]])=1">Cardinality of component:procedureDescription is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)])]])=1">Cardinality of component:postopDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]) &lt;= 1">Cardinality of component:implants is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:fluids is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)])]]) &lt;= 1">Cardinality of component:surgicalProcedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:plannedProcedure is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:disposition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:indications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:surgicalDrains is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-anesthesia" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-complications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-preopDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-estBloodLoss" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-findings" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-specimensTaken" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-procedureDescription" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-postopDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-implants" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-fluids" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-surgicalProcedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-plannedProcedure" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-disposition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-indications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-surgicalDrains" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNoteFluidsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.7.12-->
    <rule id="OperativeNoteFluidsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="OperativeNoteFluidsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)]]/cda:code">
      <assert test="@code = '10216-0'">@code SHALL = '10216-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNoteSurgicalProcedureSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.7.14-->
    <rule id="OperativeNoteSurgicalProcedureSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="OperativeNoteSurgicalProcedureSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)]]/cda:code">
      <assert test="@code = '10223-6'">@code SHALL = '10223-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="OutcomeObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.144-->
    <rule id="OutcomeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:progressTowardGoalObservation is 0..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="OutcomeObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-goal-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'GEVL') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.121' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = current()/cda:act/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:act/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:act/cda:id[1]/@extension]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-progressTowardGoalObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]">
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-intervention-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'RSON') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.131' and self::node()/@extension = '2015-08-01'] and cda:id[self::node()/@root = current()/cda:act/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:act/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:act/cda:id[1]/@extension]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="PastMedicalHistory-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.20:2015-08-01-->
    <rule id="PastMedicalHistory-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '11348-0'">@code SHALL = '11348-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-entry-problem" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PatientReferralAct-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.140-->
    <rule id="PatientReferralAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]">
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:priorityCode) &lt;= 1">Cardinality of priorityCode is 0..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/@moodCode">
      <assert test="contains($PatientReferralActMoodCode, .)">SHALL be selected from ValueSet PatientReferralActMoodCode</assert>
    </rule>
    <rule id="PatientReferralAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PatientReferralAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PatientReferralAct-errors-participant" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:participant">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-participant.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:participant/@typeCode">
      <assert test="contains($CDAParticipationType, .)">SHALL be selected from ValueSet CDAParticipationType</assert>
    </rule>
    <rule id="PatientReferralAct-errors-participant.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:participant/cda:participantRole">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'RQO'">@moodCode SHALL = 'RQO'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:priorityCode) &lt;= 1">Cardinality of priorityCode is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation.statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-indication" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-indication.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
  </pattern>
  <pattern id="PayersSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.18:2015-08-01-->
    <rule id="PayersSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PayersSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '48768-6'">@code SHALL = '48768-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PayersSection-errors-entry-coverage" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PhysicalExamSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.2.10:2015-08-01-->
    <rule id="PhysicalExamSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '29545-1'">@code SHALL = '29545-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-entry-longCareWound" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-component" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:component">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-component.section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:component/cda:section">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PlannedCoverage-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.129:2024-05-01-->
    <rule id="PlannedCoverage-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(cda:act)])=1">Cardinality of entryRelationship:entryRelationship1 is 1..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '52556-8'">@code SHALL = '52556-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PlannedCoverage-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedCoverage-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedCoverage-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act/cda:code">
      <assert test="@nullFlavor or contains($PayerType, @code)">SHALL be selected from ValueSet PayerType</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act.statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
  </pattern>
  <pattern id="PlannedEncounter-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.40:2014-06-09-->
    <rule id="PlannedEncounter-errors-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]">
      <assert test="@classCode = 'ENC'">@classCode SHALL = 'ENC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:priorityPreference is 0..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-moodCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($PlannedMoodCodeActEncounterProcedure, .)">SHALL be selected from ValueSet PlannedMoodCodeActEncounterProcedure</assert>
    </rule>
    <rule id="PlannedEncounter-errors-text" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-text.reference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedEncounter-errors-statusCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedEncounter-errors-performer" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-author" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedEncounter-errors-participant-location" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])">participantRole SHALL conform to ServiceDeliveryLocation</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-priorityPreference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-indication" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
  </pattern>
  <pattern id="PlannedImmunizationActivity-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.120-->
    <rule id="PlannedImmunizationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]">
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:doseQuantity) &lt;= 1">Cardinality of doseQuantity is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/@moodCode">
      <assert test="contains($PlannedMoodCodeSubstanceAdministrationSupply, .)">SHALL be selected from ValueSet PlannedMoodCodeSubstanceAdministrationSupply</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-priorityPreference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-precondition-pronditionForSubstanceAdmin" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:precondition[cda:criterion[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PlannedInterventionAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.146:2015-08-01-->
    <rule id="PlannedInterventionAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')])&gt;=1">Cardinality of entryRelationship:reason is 1..*</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($PlannedInterventionMoodCode, .)">SHALL be selected from ValueSet PlannedInterventionMoodCode</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '362956003'">@code SHALL = '362956003'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-reason" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')]">
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.121' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = current()/cda:act/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:act/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:act/cda:id[1]/@extension]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-immunizationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-instruction" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nonMedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedEncounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedProcedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedMedicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedMedicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nutritionRecommendation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-entryReference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedImmunizationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="PlannedMedicationActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.42:2014-06-09-->
    <rule id="PlannedMedicationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)&gt;=1">Cardinality of effectiveTime is 1..*</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value])=1">Cardinality of effectiveTime:duration is 1..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='EIVL_TS']) &lt;= 1">Cardinality of effectiveTime:periodicFrequency is 0..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='PIVL_TS']) &lt;= 1">Cardinality of effectiveTime:eventFrequency is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:doseQuantity) &lt;= 1">Cardinality of doseQuantity is 0..1</assert>
      <assert test="count(cda:rateQuantity) &lt;= 1">Cardinality of rateQuantity is 0..1</assert>
      <assert test="count(cda:maxDoseQuantity) &lt;= 1">Cardinality of maxDoseQuantity is 0..1</assert>
      <assert test="count(cda:administrationUnitCode) &lt;= 1">Cardinality of administrationUnitCode is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($PlannedMoodCodeSubstanceAdministrationSupply, .)">SHALL be selected from ValueSet PlannedMoodCodeSubstanceAdministrationSupply</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="(@value or cda:low) and (not((@value and cda:low)))">This effectiveTime **SHALL** contain either a low or a @value but not both (CONF:1098-32890).</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-effectiveTime-periodicFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='EIVL_TS']">
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-effectiveTime-eventFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='PIVL_TS']">
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-administrationUnitCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:administrationUnitCode">
      <assert test="@nullFlavor or contains($AdministrationUnitDoseForm, @code)">SHALL be selected from ValueSet AdministrationUnitDoseForm</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-priorityPreference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-precondition" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:precondition">
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-precondition.criterion" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:precondition/cda:criterion">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])">criterion SHALL conform to PreconditionforSubstanceAdministration</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedure-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.41:2022-06-01-->
    <rule id="PlannedProcedure-errors-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]">
      <assert test="@classCode = 'PROC'">@classCode SHALL = 'PROC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-moodCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($PlannedMoodCodeActEncounterProcedure, .)">SHALL be selected from ValueSet PlannedMoodCodeActEncounterProcedure</assert>
    </rule>
    <rule id="PlannedProcedure-errors-text" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-text.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedProcedure-errors-statusCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedProcedure-errors-author" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-priorityPreference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-indication" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-instruction" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-coverage" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-assessmentScale" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-entryReference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedureSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.30:2014-06-09-->
    <rule id="PlannedProcedureSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PlannedProcedureSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '59772-4'">@code SHALL = '59772-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PlannedProcedureSection-errors-entry-plannedProcedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PlannedSupply-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.43:2024-05-01-->
    <rule id="PlannedSupply-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:product) &lt;= 1">Cardinality of product is 0..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
      <assert test="count(cda:participant[(@typeCode = 'DEV')]) &lt;= 1">Cardinality of participant:productInstance is 0..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-moodCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($PlannedMoodCodeSubstanceAdministrationSupply, .)">SHALL be selected from ValueSet PlannedMoodCodeSubstanceAdministrationSupply</assert>
    </rule>
    <rule id="PlannedSupply-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedSupply-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedSupply-errors-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:product">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-product.manufacturedProduct" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:product/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation or ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="PlannedSupply-errors-author" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedSupply-errors-participant-productInstance" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-participant-productInstance.participantRole" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)])">participantRole SHALL conform to ProductInstance</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-priorityPreference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-indication" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-indication.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-instruction" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-plannedCoverage" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PlanofTreatmentSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.10:2014-06-09-->
    <rule id="PlanofTreatmentSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '18776-5'">@code SHALL = '18776-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedEnc" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedProc" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedMed" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedMed.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedSupply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])]]/cda:supply">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-nutrition" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-nutrition.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])">act SHALL conform to NutritionRecommendation</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedImmunization" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-goal" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PolicyActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.61:2024-05-01-->
    <rule id="PolicyActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]">
      <assert test="not(cda:participant[@typeCode = 'COV']/cda:participantRole/cda:code[cda:code = 'SELF']) or not(cda:participant[@typeCode = 'HLD'])">When the Subscriber is the patient (COV participant code = 'SELF'), the participant element describing the subscriber **SHALL NOT** be present. This information will be recorded instead in the data elements used to record member information (CONF:4537-17139).</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')])=1">Cardinality of performer:payer is 1..1</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
      <assert test="count(cda:participant[(@typeCode = 'COV')])=1">Cardinality of participant:coverage-target is 1..1</assert>
      <assert test="count(cda:participant[(@typeCode = 'HLD')]) &lt;= 1">Cardinality of participant:subscriber is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PolicyActivity-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:templateId">
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:code">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity.representedOrganization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:representedOrganization">
      <assert test="count(cda:name) &lt;= 1">Cardinality of name is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:templateId">
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.assignedEntity.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:code">
      <assert test="@code = 'GUAR'">@code SHALL = 'GUAR'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.110'">@codeSystem SHALL = '2.16.840.1.113883.5.110'</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:templateId">
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.89'">@root SHALL = '2.16.840.1.113883.10.20.22.4.89'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:time">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity) &lt;= 1">Cardinality of playingEntity is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
      <assert test="count(sdtc:birthTime)=1">Cardinality of birthTime is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:templateId">
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.90'">@root SHALL = '2.16.840.1.113883.10.20.22.4.90'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-authorization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-authorization.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)])">act SHALL conform to AuthorizationActivity</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]/cda:act">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PostoperativeDiagnosisSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.35-->
    <rule id="PostoperativeDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PostoperativeDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)]]/cda:code">
      <assert test="@code = '10218-6'">@code SHALL = '10218-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.51:2015-08-01-->
    <rule id="PostprocedureDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '59769-0'">@code SHALL = '59769-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.36:2015-08-01-->
    <rule id="PostprocedureDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of entry:postopDiagnosis is 0..1</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '59769-0'">@code SHALL = '59769-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-errors-entry-postopDiagnosis" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PreconditionforSubstanceAdministration-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.25:2014-06-09-->
    <rule id="PreconditionforSubstanceAdministration-errors-root" context="cda:criterion[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PreconditionforSubstanceAdministration-errors-code" context="cda:criterion[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyIntentionInNextYear-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.281:2023-05-01-->
    <rule id="PregnancyIntentionInNextYear-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '86645-9'">@code SHALL = '86645-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:value">
      <assert test="@nullFlavor or contains($PregnancyIntention, @code)">SHALL be selected from ValueSet PregnancyIntention</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.8-->
    <rule id="PregnancyObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:estimatedDateofDelivery is 0..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="PregnancyObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PregnancyObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PregnancyObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:value/@code">
      <assert test="contains($ExtendedPregnancyStatus, .)">SHALL be selected from ValueSet ExtendedPregnancyStatus</assert>
    </rule>
    <rule id="PregnancyObservation-errors-entryRelationship-estimatedDateofDelivery" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.65:2015-08-01-->
    <rule id="PreoperativeDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '10219-4'">@code SHALL = '10219-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.34:2015-08-01-->
    <rule id="PreoperativeDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of entry:preopDiagnosis is 0..1</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '10219-4'">@code SHALL = '10219-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-errors-entry-preopDiagnosis" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PriorityPreference-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.143-->
    <rule id="PriorityPreference-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PriorityPreference-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:code">
      <assert test="@code = '225773000'">@code SHALL = '225773000'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="PriorityPreference-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PriorityPreference-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PriorityPreference-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($PriorityLevel, @code)">SHALL be selected from ValueSet PriorityLevel</assert>
    </rule>
    <rule id="PriorityPreference-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="ProblemConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.3:2024-05-01-->
    <rule id="ProblemConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])=1">Cardinality of entryRelationship:problem is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = 'CONC'">@code SHALL = 'CONC'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.6'">@codeSystem SHALL = '2.16.840.1.113883.5.6'</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-problem" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-priority" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ProblemObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.4:2024-05-01-->
    <rule id="ProblemObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:age is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:prognosis is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:status is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:reference is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:assessment is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]) &lt;= 1">Cardinality of entryRelationship:dateOfDiagnosis is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProblemObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ProblemObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-age" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-prognosis" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-priority" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]">
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-assessment" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]">
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-dateOfDiagnosis" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ProblemSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.5.1:2015-08-01-->
    <rule id="ProblemSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entry:observation is 0..1</assert>
    </rule>
    <rule id="ProblemSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '11450-4'">@code SHALL = '11450-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProblemSection-errors-entry-act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ProblemSection-errors-entry-observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ProblemStatus-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.6:2019-06-20-->
    <rule id="ProblemStatus-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ProblemStatus-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:code">
      <assert test="@code = '33999-4'">@code SHALL = '33999-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProblemStatus-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProblemStatus-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProblemStatus-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ProblemStatus-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:value">
      <assert test="@nullFlavor or contains($ProblemStatus, @code)">SHALL be selected from ValueSet ProblemStatus</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureActivityProcedure-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.14:2024-05-01-->
    <rule id="ProcedureActivityProcedure-errors-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]">
      <assert test="@classCode = 'PROC'">@classCode SHALL = 'PROC'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:priorityCode) &lt;= 1">Cardinality of priorityCode is 0..1</assert>
      <assert test="count(cda:methodCode) &lt;= 1">Cardinality of methodCode is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code">
      <assert test="count(cda:originalText) &lt;= 1">Cardinality of originalText is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-code.originalText" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code/cda:originalText">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-code.originalText.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code/cda:originalText/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-text" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-text.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-statusCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-statusCode.code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($ProcedureActStatusCode, .)">SHALL be selected from ValueSet ProcedureActStatusCode</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-effectiveTime" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="not(@value) or string-length(@value) &lt;= 8 or ((substring(@value, string-length(@value) - 4, 1) = '+' or substring(@value, string-length(@value) - 4, 1) = '-') and (number(substring(@value, string-length(@value) - 3, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 3, 2)) &lt;= 12 and string-length(substring(@value, string-length(@value) - 3, 2)) = 2) and (number(substring(@value, string-length(@value) - 1, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 1, 2)) &lt;= 59 and string-length(substring(@value, string-length(@value) - 1, 2)) = 2))">Timestamps more precise than the day SHALL include a timezone offset (+/- HHMM)</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-effectiveTime.low" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-effectiveTime.high" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-priorityCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:priorityCode">
      <assert test="@nullFlavor or contains($ActPriority, @code)">SHALL be selected from ValueSet ActPriority</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-specimen" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:specimen">
      <assert test="count(cda:specimenRole)=1">Cardinality of specimenRole is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.assignedPerson" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.assignedPerson.name" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.representedOrganization" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization">
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.representedOrganization.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-author" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-productInstance" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-productInstance.participantRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)])">participantRole SHALL conform to ProductInstance</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-serviceDeliveryLocation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-serviceDeliveryLocation.participantRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])">participantRole SHALL conform to ServiceDeliveryLocation</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-encounter" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and not(cda:substanceAdministration) and (cda:encounter)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-encounter.encounter" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and not(cda:substanceAdministration) and (cda:encounter)]/cda:encounter">
      <assert test="@classCode = 'ENC'">@classCode SHALL = 'ENC'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-instruction" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-indication" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-medication" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-medication.substanceAdministration" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-reaction" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-assessmentScaleObs" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-entryReference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureDescriptionSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.27-->
    <rule id="ProcedureDescriptionSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureDescriptionSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)]]/cda:code">
      <assert test="@code = '29554-3'">@code SHALL = '29554-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureDispositionSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.18.2.12-->
    <rule id="ProcedureDispositionSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureDispositionSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)]]/cda:code">
      <assert test="@code = '59775-7'">@code SHALL = '59775-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureEstimatedBloodLossSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.18.2.9-->
    <rule id="ProcedureEstimatedBloodLossSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureEstimatedBloodLossSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)]]/cda:code">
      <assert test="@code = '59770-8'">@code SHALL = '59770-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureFindingsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.28:2015-08-01-->
    <rule id="ProcedureFindingsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureFindingsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '59776-5'">@code SHALL = '59776-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProcedureFindingsSection-errors-entry-problem" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureImplantsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.40-->
    <rule id="ProcedureImplantsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureImplantsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)]]/cda:code">
      <assert test="@code = '59771-6'">@code SHALL = '59771-6'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureIndicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.29:2014-06-09-->
    <rule id="ProcedureIndicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '59768-2'">@code SHALL = '59768-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-entry-indication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-entry-indication.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.6:2024-05-01-->
    <rule id="ProcedureNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:documentationOf)&gt;=1">Cardinality of documentationOf is 1..*</assert>
      <assert test="count(cda:authorization) &lt;= 1">Cardinality of authorization is 0..1</assert>
      <assert test="count(cda:componentOf) &lt;= 1">Cardinality of componentOf is 0..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProcedureNoteDocumentTypeCodes, @code)">SHALL be selected from ValueSet ProcedureNoteDocumentTypeCodes</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant-participant1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:functionCode)=1">Cardinality of functionCode is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant-participant1.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]/cda:functionCode">
      <assert test="@codeSystem = '2.16.840.1.113883.5.88'">@codeSystem SHALL = '2.16.840.1.113883.5.88'</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant-participant1.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]/cda:associatedEntity">
      <assert test="@classCode = 'PROV'">@classCode SHALL = 'PROV'</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(@typeCode = 'PPRF')])=1">Cardinality of performer:primary is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(((cda:width | cda:high))) = 1">Width and high are mutually exclusive. If width is known, high **SHALL NOT** be present. If with is not present, **SHALL** include high.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:width) &lt;= 1">Cardinality of width is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-primary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-primary.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHALL be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-secondary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-secondary.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHALL be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="ProcedureNote-errors-authorization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:authorization">
      <assert test="count(cda:consent)=1">Cardinality of consent is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-authorization.consent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:authorization/cda:consent">
      <assert test="@classCode = 'CONS'">@classCode SHALL = 'CONS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-authorization.consent.statusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:authorization/cda:consent/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:encounterParticipant[(@typeCode = 'REF')]) &lt;= 1">Cardinality of encounterParticipant:referrer is 0..1</assert>
      <assert test="count(cda:location)=1">Cardinality of location is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter.location" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location">
      <assert test="count(cda:healthCareFacility)=1">Cardinality of healthCareFacility is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter.location.healthCareFacility" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location/cda:healthCareFacility">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="ProcedureNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="count(cda:component)&gt;=5">Cardinality of component is 5..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]])=1">Cardinality of component:complications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]])=1">Cardinality of component:procedureDescription is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]])=1">Cardinality of component:indications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]])=1">Cardinality of component:postProcedureDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:allergies is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:anesthesia is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:historyPresentIllness is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)])]]) &lt;= 1">Cardinality of component:medicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medsAdministered is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:plannedProcedure is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:procedureDisposition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]) &lt;= 1">Cardinality of component:estBloodLoss is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:findings is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]) &lt;= 1">Cardinality of component:implants is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]) &lt;= 1">Cardinality of component:specimensTaken is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-complications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedureDescription" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-indications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-postProcedureDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-anesthesia" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-historyPresentIllness" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medsAdministered" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-plannedProcedure" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedureDisposition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-estBloodLoss" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-findings" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-implants" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-specimensTaken" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureSpecimensTakenSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.31-->
    <rule id="ProcedureSpecimensTakenSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureSpecimensTakenSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)]]/cda:code">
      <assert test="@code = '59773-2'">@code SHALL = '59773-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProceduresSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.7.1:2014-06-09-->
    <rule id="ProceduresSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProceduresSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '47519-4'">@code SHALL = '47519-4'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProceduresSection-errors-entry-entryProcedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ProductInstance-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.37-->
    <rule id="ProductInstance-errors-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]">
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:playingDevice)=1">Cardinality of playingDevice is 1..1</assert>
      <assert test="count(cda:scopingEntity)=1">Cardinality of scopingEntity is 1..1</assert>
    </rule>
    <rule id="ProductInstance-errors-playingDevice" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:playingDevice">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="ProductInstance-errors-scopingEntity" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:scopingEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
  </pattern>
  <pattern id="PrognosisObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.113-->
    <rule id="PrognosisObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PrognosisObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:code">
      <assert test="@code = '75328-5'">@code SHALL = '75328-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PrognosisObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PrognosisObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PrognosisObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="ProgressNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.9:2024-05-01-->
    <rule id="ProgressNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:documentationOf) &lt;= 1">Cardinality of documentationOf is 0..1</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProgressNoteDocumentTypeCode, @code)">SHALL be selected from ValueSet ProgressNoteDocumentTypeCode</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.21.3.1')])=1">Cardinality of templateId:secondary is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf.serviceEvent.templateId-secondary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:templateId[(@root = '2.16.840.1.113883.10.20.21.3.1')]">
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="not(not(cda:width)) or cda:high">If a width element is not present, the serviceEvent **SHALL** include effectiveTime/high (CONF:1198-10066).</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:location)=1">Cardinality of location is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.location" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location">
      <assert test="count(cda:healthCareFacility)=1">Cardinality of healthCareFacility is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.location.healthCareFacility" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location/cda:healthCareFacility">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="ProgressNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:allergies is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:activities is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:instructions is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:objective is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:problems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:results is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)])]]) &lt;= 1">Cardinality of component:subjective is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-activities" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-instructions" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-instructions.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Instruction</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-objective" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-subjective" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
  </pattern>
  <pattern id="ProgressTowardGoalObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.110-->
    <rule id="ProgressTowardGoalObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($GoalAchievement, @code)">SHALL be selected from ValueSet GoalAchievement</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAssemblerParticipation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.7:2020-05-19-->
    <rule id="ProvenanceAssemblerParticipation-errors-root" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]">
      <assert test="@typeCode = 'DEV'">@typeCode SHALL = 'DEV'</assert>
      <assert test="count(cda:functionCode)=1">Cardinality of functionCode is 1..1</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-functionCode" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:functionCode">
      <assert test="@code = 'assembler'">@code SHALL = 'assembler'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.4.642.4.1131'">@codeSystem SHALL = '2.16.840.1.113883.4.642.4.1131'</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-associatedEntity" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity">
      <assert test="@classCode = 'OWN'">@classCode SHALL = 'OWN'</assert>
      <assert test="count(cda:scopingOrganization)=1">Cardinality of scopingOrganization is 1..1</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-associatedEntity.scopingOrganization" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-associatedEntity.scopingOrganization.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAuthorParticipation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.6:2019-10-01-->
    <rule id="ProvenanceAuthorParticipation-errors-root" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor">
      <assert test="@nullFlavor or (cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)) or (/cda:ClinicalDocument//cda:assignedAuthor[cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension] and cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)])">Authors require addr, telecom, and either assignedPerson/name or assignedAuthoringDevice/manufacturerModelName. These may be present on this author or on another instance of an Author Participation in the document that has an id that matches the first id of this author.</assert>
      <assert test="cda:representedOrganization or (/cda:ClinicalDocument//cda:author[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.5.6' and self::node()/@extension = '2019-10-01'] and cda:assignedAuthor/cda:representedOrganization and cda:assignedAuthor/cda:id[self::node()/@root = current()/cda:id[1]/@root and (not(self::node()/@extension) and not(current()/cda:id[1]/@extension)) or self::node()/@extension = current()/cda:id[1]/@extension]])">If the assignedAuthor/id is not referencing a Provenance Author described elsewhere in the document with a representedOrganization populated, this assignedAuthor SHALL contain exactly one [1..1] representedOrganization (CONF:4515-64).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.6')])=1">Cardinality of id:npi is 1..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:assignedAuthoringDevice) &lt;= 1">Cardinality of assignedAuthoringDevice is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.assignedPerson" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.assignedPerson.name" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:assignedPerson/cda:name">
      <assert test="@nullFlavor or count(cda:family) = 1">SHALL contain exactly one [1..1] family (CONF:81-7159).</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.representedOrganization" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:representedOrganization">
      <assert test="@nullFlavor = 'NA' or (cda:id[@root = '2.16.840.1.113883.4.2'] and cda:id[@root = '2.16.840.1.113883.4.6'] and cda:name)">If the author is not a clinician, set nullFlavor='NA'. Otherwise, the taxId, npi, and name are required.</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.2')]) &lt;= 1">Cardinality of id:taxId is 0..1</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.6')]) &lt;= 1">Cardinality of id:npi is 0..1</assert>
      <assert test="count(cda:name) &lt;= 1">Cardinality of name is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="ReactionObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.9:2014-06-09-->
    <rule id="ReactionObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:severity is 0..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="ReactionObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ReactionObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ReactionObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-procedure" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration) and not(cda:observation)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-medication" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-medication.substanceAdministration" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-severity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="Reason-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.88:2023-05-01-->
    <rule id="Reason-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="Reason-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '77301-0'">@code SHALL = '77301-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="Reason-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="Reason-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="Reason-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="Reason-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="ReasonforReferralSection-errors">
    <!--urn:hl7ii:1.3.6.1.4.1.19376.1.5.3.1.3.1:2014-06-09-->
    <rule id="ReasonforReferralSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ReasonforReferralSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '42349-1'">@code SHALL = '42349-1'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ReasonforReferralSection-errors-entry-patientReferral" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ReasonforVisitSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.12-->
    <rule id="ReasonforVisitSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ReasonforVisitSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]/cda:code">
      <assert test="@code = '29299-5'">@code SHALL = '29299-5'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ReferralNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.14:2024-05-01-->
    <rule id="ReferralNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:informationRecipient)=1">Cardinality of informationRecipient is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ReferralDocumentType, @code)">SHALL be selected from ValueSet ReferralDocumentType</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="count(cda:informationRecipient)=1">Cardinality of informationRecipient is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient.informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient.informationRecipient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="ReferralNote-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/@classCode">
      <assert test="contains($INDRoleclassCodes, .)">SHALL be selected from ValueSet INDRoleclassCodes</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity.associatedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
      <assert test="count(cda:scopingOrganization) &lt;= 1">Cardinality of scopingOrganization is 0..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ReferralNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="count(cda:component)&gt;=4">Cardinality of component is 4..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advanceDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:hpi is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problem is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:results is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medicalEquip is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:medicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]) &lt;= 1">Cardinality of component:generalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]])=1">Cardinality of component:reasonForReferral is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:payers is 0..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-advanceDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-advanceDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-hpi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-problem" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-problem.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medicalEquip" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-reasonForReferral" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-payers" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="RelatedPersonRelationshipAndNameParticipant-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.8:2023-05-01-->
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-root" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.classCode" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/@classCode">
      <assert test="contains($CDARoleClassAssociative, .)">SHALL be selected from ValueSet CDARoleClassAssociative</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.code" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHALL be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.associatedPerson" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.associatedPerson.name" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:associatedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
  </pattern>
  <pattern id="ResultObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.2:2023-05-01-->
    <rule id="ResultObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ']) &lt;= 1">Cardinality of value:physical-quantity is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
      <assert test="count(cda:methodCode) &lt;= 1">Cardinality of methodCode is 0..1</assert>
      <assert test="count(cda:targetSiteCode) &lt;= 1">Cardinality of targetSiteCode is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:code">
      <assert test="count(((@code | @nullFlavor))) = 1">SHALL contain either a @code attribute or a @nullFlavor attribute, but not both.</assert>
    </rule>
    <rule id="ResultObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ResultObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ResultObservation-errors-statusCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:statusCode/@code">
      <assert test="contains($ResultStatus, .)">SHALL be selected from ValueSet ResultStatus</assert>
    </rule>
    <rule id="ResultObservation-errors-value-physical-quantity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:value[@xsi:type='PQ']">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
      <assert test="count(cda:translation) &lt;= 1">Cardinality of translation is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="count(cda:translation) &lt;= 1">Cardinality of translation is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-interpretationCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:interpretationCode">
      <assert test="@nullFlavor or contains($CDAObservationInterpretation, @code)">SHALL be selected from ValueSet CDAObservationInterpretation</assert>
    </rule>
    <rule id="ResultObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ResultObservation-errors-referenceRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:referenceRange">
      <assert test="count(cda:observationRange)=1">Cardinality of observationRange is 1..1</assert>
    </rule>
    <rule id="ResultObservation-errors-referenceRange.observationRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:referenceRange/cda:observationRange">
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ResultOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.1:2023-05-01-->
    <rule id="ResultOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)])&gt;=1">Cardinality of component:resultObs is 1..*</assert>
      <assert test="count(cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]) &lt;= 1">Cardinality of component:specimenProc is 0..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="ResultOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ResultOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-statusCode.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:statusCode/@code">
      <assert test="contains($ResultStatus, .)">SHALL be selected from ValueSet ResultStatus</assert>
    </rule>
    <rule id="ResultOrganizer-errors-effectiveTime" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-specimen" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen">
      <assert test="count(cda:specimenRole)=1">Cardinality of specimenRole is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-specimen.specimenRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen/cda:specimenRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:specimenPlayingEntity)=1">Cardinality of specimenPlayingEntity is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-specimen.specimenRole.specimenPlayingEntity" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen/cda:specimenRole/cda:specimenPlayingEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ResultOrganizer-errors-component-resultObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-component-specimenProc" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ResultsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.3.1:2015-08-01-->
    <rule id="ResultsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ResultsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '30954-2'">@code SHALL = '30954-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ResultsSection-errors-entry-organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ReviewofSystemsSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.18-->
    <rule id="ReviewofSystemsSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ReviewofSystemsSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)]]/cda:code">
      <assert test="@code = '10187-3'">@code SHALL = '10187-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="RiskConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.136:2015-08-01-->
    <rule id="RiskConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '281694009'">@code SHALL = '281694009'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="RiskConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="RiskConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="RiskConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation1" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-allergy-IntoleranceObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceRefr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceComp" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'COMP') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-assessmentScaleObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-mentalStatusObservation2" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-self-CareActivitiesADLandIADL" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-smokingStatus" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-smokingStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="not((cda:code/@code = '72166-2' or cda:code/@code = '11367-0')) or cda:value/@code">When code is Smoking Status (72166-2) or Tobacco Use (11367-0), the value SHALL be coded</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-encounterDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryRelationship11" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-functionalStatusObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-hospitalAdmissionDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionAssessment" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-postprocedureDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-pregnancyObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-preoperativeDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-reactionObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-sensoryStatus" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-socialHistoryObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-substanceorDeviceAllergy-IntoleranceObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-vitalSignObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-longitudinalCareWoundObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation2" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'SPRT') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-caregiverCharacteristics" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-culturalandReligiousObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-characteristicsofHomeEnvironment" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionalStatusObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultOrganizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-priorityPreference2" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemConcernAct" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:organizer)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference">
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="SectionTimeRangeObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.201:2016-06-01-->
    <rule id="SectionTimeRangeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:code">
      <assert test="@code = '82607-3'">@code SHALL = '82607-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:value">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SelfCareActivitiesADLandIADL-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.128-->
    <rule id="SelfCareActivitiesADLandIADL-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="SensoryStatus-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.127-->
    <rule id="SensoryStatus-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SensoryStatus-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SensoryStatus-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="SensoryStatus-errors-entryRelationship-assessmentScaleObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SerialNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.319:2019-06-21-->
    <rule id="SerialNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:code">
      <assert test="@code = 'C101671'">@code SHALL = 'C101671'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="ServiceDeliveryLocation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.32-->
    <rule id="ServiceDeliveryLocation-errors-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="@classCode = 'SDLOC'">@classCode SHALL = 'SDLOC'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-code" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($HealthcareServiceLocation, @code)">SHALL be selected from ValueSet HealthcareServiceLocation</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-addr" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-playingEntity" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:playingEntity">
      <assert test="@classCode = 'PLC'">@classCode SHALL = 'PLC'</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SeverityObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.8:2014-06-09-->
    <rule id="SeverityObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SeverityObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = 'SEV'">@code SHALL = 'SEV'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="SeverityObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SeverityObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SeverityObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="SexObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.507:2023-07-01-->
    <rule id="SexObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SexObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:code">
      <assert test="@code = '46098-0'">@code SHALL = '46098-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SexObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SexObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SexObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SexObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="SexObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SexualOrientationObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.501:2023-05-01-->
    <rule id="SexualOrientationObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']">SHALL conform to (contain the templateId of) SocialHistoryObservation</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '76690-7'">@code SHALL = '76690-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@nullFlavor or contains($SexualOrientationIncludingNullsAndDataAbsentReason, @code)">SHALL be selected from ValueSet SexualOrientationIncludingNullsAndDataAbsentReason</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatus-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.511:2024-05-01-->
    <rule id="SmokingStatus-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]">
      <assert test="not((cda:code/@code = '72166-2' or cda:code/@code = '11367-0')) or cda:value/@code">When code is Smoking Status (72166-2) or Tobacco Use (11367-0), the value SHALL be coded</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[not(@xsi:type='REAL' or @xsi:type='CD')]) = 0">Slicing is closed, each value must conform to one of the following slices: packYears, coded</assert>
      <assert test="count(cda:value[@xsi:type='REAL']) &lt;= 1">Cardinality of value:packYears is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($SmokingStatusType, @code)">SHALL be selected from ValueSet SmokingStatusType</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SmokingStatus-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SmokingStatus-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-value-coded.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:value[@xsi:type='CD']/@code">
      <assert test="contains($SmokingStatusComprehensive, .)">SHALL be selected from ValueSet SmokingStatusComprehensive</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatusMeaningfulUse-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.78:2024-05-01-->
    <rule id="SmokingStatusMeaningfulUse-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '72166-2'">@code SHALL = '72166-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-statusCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($CompletedOrNullifiedActStatus, .)">SHALL be selected from ValueSet CompletedOrNullifiedActStatus</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistoryObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.38:2022-06-01-->
    <rule id="SocialHistoryObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ']) &lt;= 1">Cardinality of value:physical-quantity is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-value-physical-quantity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:value[@xsi:type='PQ']">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-supportingObs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-entryReference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistorySection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.17:2015-08-01-->
    <rule id="SocialHistorySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '29762-2'">@code SHALL = '29762-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-socialHistory" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-pregnancyPregnancy" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-smokingStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-smokingStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="not((cda:code/@code = '72166-2' or cda:code/@code = '11367-0')) or cda:value/@code">When code is Smoking Status (72166-2) or Tobacco Use (11367-0), the value SHALL be coded</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-caregiver" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-culteralReligious" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-homeCharacteristics" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenCollectionProcedure-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.415:2018-09-01-->
    <rule id="SpecimenCollectionProcedure-errors-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]">
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)])=1">Cardinality of entryRelationship:specimenRef is 1..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:code">
      <assert test="@code = '17636008'">@code SHALL = '17636008'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-text" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-text.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-specimenRef" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-condition" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])]]">
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation) &lt;= 1">Cardinality of observation is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenConditionObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.421:2018-06-12-->
    <rule id="SpecimenConditionObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:code">
      <assert test="@code = '93047-7'">@code SHALL = '93047-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="SubjectiveSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.21.2.2-->
    <rule id="SubjectiveSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="SubjectiveSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)]]/cda:code">
      <assert test="@code = '61150-9'">@code SHALL = '61150-9'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceAdministeredAct-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.118-->
    <rule id="SubstanceAdministeredAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]">
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:code">
      <assert test="@code = '416118004'">@code SHALL = '416118004'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceOrDeviceAllergyIntoleranceObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.90:2014-06-09-->
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]) &lt;= 1">Cardinality of entryRelationship:status is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:severity is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:criticality is 0..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:value/@code">
      <assert test="contains($AllergyAndIntoleranceType, .)">SHALL be selected from ValueSet AllergyAndIntoleranceType</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]">
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole">
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole/cda:playingEntity">
      <assert test="@classCode = 'MMAT'">@classCode SHALL = 'MMAT'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-reaction" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'MFST'">@typeCode SHALL = 'MFST'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-severity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-criticality" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]">
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SurgicalDrainsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.7.13-->
    <rule id="SurgicalDrainsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)]]">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="SurgicalDrainsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)]]/cda:code">
      <assert test="@code = '11537-8'">@code SHALL = '11537-8'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="TobaccoUse-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.85:2014-06-09-->
    <rule id="TobaccoUse-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:code">
      <assert test="@code = '11367-0'">@code SHALL = '11367-0'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="TobaccoUse-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="TobaccoUse-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="TobaccoUse-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:value/@code">
      <assert test="contains($TobaccoUse, .)">SHALL be selected from ValueSet TobaccoUse</assert>
    </rule>
    <rule id="TobaccoUse-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="TransferSummary-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.13:2024-05-01-->
    <rule id="TransferSummary-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:documentationOf)=1">Cardinality of documentationOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($TransferDocumentType, @code)">SHALL be selected from ValueSet TransferDocumentType</assert>
    </rule>
    <rule id="TransferSummary-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/@classCode">
      <assert test="contains($INDRoleclassCodes, .)">SHALL be selected from ValueSet INDRoleclassCodes</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
      <assert test="count(cda:scopingOrganization) &lt;= 1">Cardinality of scopingOrganization is 0..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(@typeCode = 'PRF')])&gt;=1">Cardinality of performer:performer1 is 1..*</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf.serviceEvent.performer-performer1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PRF')]">
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="count(cda:component)&gt;=7">Cardinality of component is 7..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advanceDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergiesAndIntolerances is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:encounters is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:dischargeDiagnosis is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medicalEquip is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:payers is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problem is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]])=1">Cardinality of component:vitalSigns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]) &lt;= 1">Cardinality of component:generalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]])=1">Cardinality of component:reasonForReferral is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:historyOfPresentIllness is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionMedications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionDiagnosis is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)])]]) &lt;= 1">Cardinality of component:courseOfCare is 0..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-advanceDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-advanceDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-allergiesAndIntolerances" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-allergiesAndIntolerances.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-encounters" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-encounters.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Encounter Activity</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-dischargeDiagnosis" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medicalEquip" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-payers" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-problem" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-problem.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-reasonForReferral" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-historyOfPresentIllness" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-admissionMedications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-admissionDiagnosis" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-courseOfCare" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="TreatmentInterventionPreference-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.510:2024-05-01-->
    <rule id="TreatmentInterventionPreference-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(@negationInd)=0">Cardinality of @negationInd is 0..0</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:code">
      <assert test="@code = '75773-2'">@code SHALL = '75773-2'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-sdtcPrecondition2.criterion" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/sdtc:precondition2/sdtc:criterion">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="TribalAffiliationObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.506:2023-05-01-->
    <rule id="TribalAffiliationObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']">SHALL conform to (contain the templateId of) SocialHistoryObservation</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:code">
      <assert test="@code = '95370-3'">@code SHALL = '95370-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@nullFlavor or contains($TribalEntityUS, @code)">SHALL be selected from ValueSet TribalEntityUS</assert>
    </rule>
  </pattern>
  <pattern id="UDIOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.311:2019-06-21-->
    <rule id="UDIOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]])=1">Cardinality of component:deviceObs is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-id" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:id">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:code">
      <assert test="not(@code) or @code = '74711-3'">@code, if present, SHALL = '74711-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="UDIOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="UDIOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="UDIOrganizer-errors-component-deviceObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-component-otherObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeader-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.1:2024-05-01-->
    <rule id="USRealmHeader-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:realmCode)=1">Cardinality of realmCode is 1..1</assert>
      <assert test="count(cda:typeId)=1">Cardinality of typeId is 1..1</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:languageCode)=1">Cardinality of languageCode is 1..1</assert>
      <assert test="count(cda:setId) &lt;= 1">Cardinality of setId is 0..1</assert>
      <assert test="count(cda:versionNumber) &lt;= 1">Cardinality of versionNumber is 0..1</assert>
      <assert test="count(cda:recordTarget)&gt;=1">Cardinality of recordTarget is 1..*</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:dataEnterer) &lt;= 1">Cardinality of dataEnterer is 0..1</assert>
      <assert test="count(cda:custodian)=1">Cardinality of custodian is 1..1</assert>
      <assert test="count(cda:legalAuthenticator) &lt;= 1">Cardinality of legalAuthenticator is 0..1</assert>
      <assert test="count(cda:componentOf) &lt;= 1">Cardinality of componentOf is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-realmCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:realmCode">
      <assert test="@code = 'US'">@code SHALL = 'US'</assert>
    </rule>
    <rule id="USRealmHeader-errors-typeId" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:typeId">
      <assert test="@root = '2.16.840.1.113883.1.3'">@root SHALL = '2.16.840.1.113883.1.3'</assert>
      <assert test="@extension = 'POCD_HD000040'">@extension SHALL = 'POCD_HD000040'</assert>
    </rule>
    <rule id="USRealmHeader-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="USRealmHeader-errors-effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-confidentialityCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:confidentialityCode">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget">
      <assert test="count(cda:patientRole)=1">Cardinality of patientRole is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:patient)=1">Cardinality of patient is 1..1</assert>
      <assert test="count(cda:providerOrganization) &lt;= 1">Cardinality of providerOrganization is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="not(sdtc:deceasedInd[@value = 'true']) or sdtc:deceasedTime">If sdtc:deceasedInd="true", then sdtc:deceasedTime **SHALL** be present with either a @value or @nullFlavor=UNK (CONF:4537-32993).</assert>
      <assert test="not(sdtc:deceasedTime/@value) or sdtc:deceasedInd[@value = 'true']">If sdtc:deceasedTime/@value is present, then sdtc:deceasedInd SHALL be present with value=true</assert>
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
      <assert test="count(cda:administrativeGenderCode)=1">Cardinality of administrativeGenderCode is 1..1</assert>
      <assert test="count(cda:birthTime)=1">Cardinality of birthTime is 1..1</assert>
      <assert test="count(sdtc:deceasedInd) &lt;= 1">Cardinality of deceasedInd is 0..1</assert>
      <assert test="count(sdtc:deceasedTime) &lt;= 1">Cardinality of deceasedTime is 0..1</assert>
      <assert test="count(cda:maritalStatusCode) &lt;= 1">Cardinality of maritalStatusCode is 0..1</assert>
      <assert test="count(cda:religiousAffiliationCode) &lt;= 1">Cardinality of religiousAffiliationCode is 0..1</assert>
      <assert test="count(cda:raceCode)=1">Cardinality of raceCode is 1..1</assert>
      <assert test="count(cda:ethnicGroupCode)=1">Cardinality of ethnicGroupCode is 1..1</assert>
      <assert test="count(cda:birthplace) &lt;= 1">Cardinality of birthplace is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="@nullFlavor or count(cda:family) = 1">SHALL contain exactly one [1..1] family (CONF:81-7159).</assert>
      <assert test="@nullFlavor or cda:given">SHALL contain at least one [1..*] given (CONF:81-7157).</assert>
      <assert test="(not(cda:suffix) or count(cda:suffix) = 1)">There may be at most one suffix</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7278).</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.administrativeGenderCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:administrativeGenderCode">
      <assert test="@nullFlavor or contains($AdministrativeGenderHL7V3, @code)">SHALL be selected from ValueSet AdministrativeGenderHL7V3</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 4">**SHALL** be precise to at least the year</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.sdtcDeceasedTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:deceasedTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 4">**SHALL** be precise to at least the year</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.maritalStatusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:maritalStatusCode">
      <assert test="@nullFlavor or contains($MaritalStatus, @code)">SHALL be selected from ValueSet MaritalStatus</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.religiousAffiliationCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:religiousAffiliationCode">
      <assert test="@nullFlavor or contains($ReligiousAffiliation, @code)">SHALL be selected from ValueSet ReligiousAffiliation</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.raceCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:raceCode">
      <assert test="@nullFlavor or contains($RaceCategoryExcludingNulls, @code)">SHALL be selected from ValueSet RaceCategoryExcludingNulls</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.sdtcRaceCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:raceCode">
      <assert test="@nullFlavor or contains($RaceValueSet, @code)">SHALL be selected from ValueSet RaceValueSet</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.ethnicGroupCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:ethnicGroupCode">
      <assert test="@nullFlavor or contains($Ethnicity, @code)">SHALL be selected from ValueSet Ethnicity</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.sdtcEthnicGroupCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:ethnicGroupCode">
      <assert test="@nullFlavor or contains($DetailedEthnicity, @code)">SHALL be selected from ValueSet DetailedEthnicity</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:guardianPerson)=1">Cardinality of guardianPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHALL be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.guardianPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:guardianPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.guardianPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:guardianPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace">
      <assert test="count(cda:place)=1">Cardinality of place is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace.place" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place">
      <assert test="count(cda:addr)=1">Cardinality of addr is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace.place.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place/cda:addr">
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If country is US, this addr **SHALL** contain exactly one [1..1] state, which **SHALL** be selected from ValueSet US Core USPS State *DYNAMIC* (CONF:4537-5402).</assert>
      <assert test="count(cda:country) &lt;= 1">Cardinality of country is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace.place.addr.item.country" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place/cda:addr/cda:country">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="count(cda:languageCode)=1">Cardinality of languageCode is 1..1</assert>
      <assert test="count(cda:modeCode) &lt;= 1">Cardinality of modeCode is 0..1</assert>
      <assert test="count(cda:proficiencyLevelCode) &lt;= 1">Cardinality of proficiencyLevelCode is 0..1</assert>
      <assert test="count(cda:preferenceInd) &lt;= 1">Cardinality of preferenceInd is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.languageCommunication.modeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication/cda:modeCode">
      <assert test="@nullFlavor or contains($LanguageAbilityMode, @code)">SHALL be selected from ValueSet LanguageAbilityMode</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.languageCommunication.proficiencyLevelCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication/cda:proficiencyLevelCode">
      <assert test="@nullFlavor or contains($LanguageAbilityProficiency, @code)">SHALL be selected from ValueSet LanguageAbilityProficiency</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-author" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="count(((cda:assignedPerson | cda:assignedAuthoringDevice))) = 1">There **SHALL** be exactly one assignedAuthor/assignedPerson or exactly one assignedAuthor/assignedAuthoringDevice (CONF:4537-16790).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.6')]) &lt;= 1">Cardinality of id:npi is 0..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:assignedAuthoringDevice) &lt;= 1">Cardinality of assignedAuthoringDevice is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.assignedAuthoringDevice" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedAuthoringDevice">
      <assert test="count(cda:manufacturerModelName)=1">Cardinality of manufacturerModelName is 1..1</assert>
      <assert test="count(cda:softwareName)=1">Cardinality of softwareName is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer">
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
      <assert test="count(cda:relatedEntity)=0">Cardinality of relatedEntity is 0..0</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-non-provider" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]">
      <assert test="count(cda:assignedEntity)=0">Cardinality of assignedEntity is 0..0</assert>
      <assert test="count(cda:relatedEntity)=1">Cardinality of relatedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian">
      <assert test="count(cda:assignedCustodian)=1">Cardinality of assignedCustodian is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian">
      <assert test="count(cda:representedCustodianOrganization)=1">Cardinality of representedCustodianOrganization is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
      <assert test="count(cda:telecom)=1">Cardinality of telecom is 1..1</assert>
      <assert test="count(cda:addr)=1">Cardinality of addr is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="count(cda:informationRecipient) &lt;= 1">Cardinality of informationRecipient is 0..1</assert>
      <assert test="count(cda:receivedOrganization) &lt;= 1">Cardinality of receivedOrganization is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient.informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient.informationRecipient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient.receivedOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:signatureCode)=1">Cardinality of signatureCode is 1..1</assert>
      <assert test="count(sdtc:signatureText) &lt;= 1">Cardinality of signatureText is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:signatureCode">
      <assert test="@code = 'S'">@code SHALL = 'S'</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:signatureCode)=1">Cardinality of signatureCode is 1..1</assert>
      <assert test="count(sdtc:signatureText) &lt;= 1">Cardinality of signatureText is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:signatureCode">
      <assert test="@code = 'S'">@code SHALL = 'S'</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-participant.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="USRealmHeader-errors-inFulfillmentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:inFulfillmentOf">
      <assert test="count(cda:order)=1">Cardinality of order is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-inFulfillmentOf.order" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:inFulfillmentOf/cda:order">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authorization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authorization">
      <assert test="count(cda:consent)=1">Cardinality of consent is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authorization.consent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authorization/cda:consent">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authorization.consent.statusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authorization/cda:consent/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:responsibleParty) &lt;= 1">Cardinality of responsibleParty is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter.responsibleParty" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter.responsibleParty.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity SHALL contain an assignedPerson or a representedOrganization or both (CONF:1198-32905).</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeaderforPatientGeneratedDocument-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.29.1:2024-05-01-->
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:recordTarget)=1">Cardinality of recordTarget is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:dataEnterer) &lt;= 1">Cardinality of dataEnterer is 0..1</assert>
      <assert test="count(cda:custodian)=1">Cardinality of custodian is 1..1</assert>
      <assert test="count(cda:legalAuthenticator) &lt;= 1">Cardinality of legalAuthenticator is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget">
      <assert test="count(cda:patientRole)=1">Cardinality of patientRole is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:patient)=1">Cardinality of patient is 1..1</assert>
      <assert test="count(cda:providerOrganization) &lt;= 1">Cardinality of providerOrganization is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="not(sdtc:deceasedInd[@value = 'true']) or sdtc:deceasedTime">If sdtc:deceasedInd="true", then sdtc:deceasedTime **SHALL** be present with either a @value or @nullFlavor=UNK (CONF:4537-32993).</assert>
      <assert test="not(sdtc:deceasedTime/@value) or sdtc:deceasedInd[@value = 'true']">If sdtc:deceasedTime/@value is present, then sdtc:deceasedInd SHALL be present with value=true</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient.guardian.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHALL be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="count(cda:languageCode)=1">Cardinality of languageCode is 1..1</assert>
      <assert test="count(cda:preferenceInd) &lt;= 1">Cardinality of preferenceInd is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-author" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author">
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="count(((cda:assignedPerson | cda:assignedAuthoringDevice))) = 1">There **SHALL** be exactly one assignedAuthor/assignedPerson or exactly one assignedAuthor/assignedAuthoringDevice (CONF:4537-16790).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-author.assignedAuthor.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-dataEnterer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:dataEnterer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-dataEnterer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informant-non-provider" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]">
      <assert test="count(cda:relatedEntity)=1">Cardinality of relatedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informant-non-provider.relatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-custodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:custodian">
      <assert test="count(cda:assignedCustodian)=1">Cardinality of assignedCustodian is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-custodian.assignedCustodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian">
      <assert test="count(cda:representedCustodianOrganization)=1">Cardinality of representedCustodianOrganization is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-custodian.assignedCustodian.representedCustodianOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-legalAuthenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-legalAuthenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-authenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-participant.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/@typeCode">
      <assert test="contains($CDAParticipationType, .)">SHALL be selected from ValueSet CDAParticipationType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-participant.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-inFulfillmentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:inFulfillmentOf">
      <assert test="count(cda:order)=1">Cardinality of order is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-inFulfillmentOf.order" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:inFulfillmentOf/cda:order">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer">
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer.functionCode.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode/@code">
      <assert test="contains($ParticipationFunction, .)">SHALL be selected from ValueSet ParticipationFunction</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="UnstructuredDocument-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.10:2024-05-01-->
    <rule id="UnstructuredDocument-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]">
      <assert test="cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']">SHALL conform to (contain the templateId of) USRealmHeader</assert>
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:recordTarget)&gt;=1">Cardinality of recordTarget is 1..*</assert>
      <assert test="count(cda:custodian)=1">Cardinality of custodian is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-recordTarget" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:recordTarget">
      <assert test="count(cda:patientRole)=1">Cardinality of patientRole is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-recordTarget.patientRole" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-custodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:custodian">
      <assert test="count(cda:assignedCustodian)=1">Cardinality of assignedCustodian is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-custodian.assignedCustodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian">
      <assert test="count(cda:representedCustodianOrganization)=1">Cardinality of representedCustodianOrganization is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:nonXMLBody)=1">Cardinality of nonXMLBody is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component.nonXMLBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component/cda:nonXMLBody">
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component.nonXMLBody.text" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component/cda:nonXMLBody/cda:text">
      <assert test="not(not(cda:reference/@value)) or (@representation = 'B64' and @mediaType)">If the text element does not contain a reference element with a value attribute, then it **SHALL** contain exactly one [1..1] @representation="B64" and exactly one [1..1] @mediaType (CONF:1198-7624).</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component.nonXMLBody.text.mediaType" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component/cda:nonXMLBody/cda:text/@mediaType">
      <assert test="contains($SupportedFileFormats, .)">SHALL be selected from ValueSet SupportedFileFormats</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.27:2014-06-09-->
    <rule id="VitalSignObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:interpretationCode) &lt;= 1">Cardinality of interpretationCode is 0..1</assert>
      <assert test="count(cda:methodCode) &lt;= 1">Cardinality of methodCode is 0..1</assert>
      <assert test="count(cda:targetSiteCode) &lt;= 1">Cardinality of targetSiteCode is 0..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="VitalSignObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="VitalSignObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:value">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-interpretationCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:interpretationCode">
      <assert test="@nullFlavor or contains($CDAObservationInterpretation, @code)">SHALL be selected from ValueSet CDAObservationInterpretation</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-interpretationCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:interpretationCode/@code">
      <assert test="contains($ObservationInterpretationHL7, .)">SHALL be selected from ValueSet ObservationInterpretationHL7</assert>
    </rule>
    <rule id="VitalSignObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.26:2015-08-01-->
    <rule id="VitalSignsOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]">
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]])&gt;=1">Cardinality of component:vitalSignObs is 1..*</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '74728-7'">@code SHALL = '74728-7'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-component-vitalSignObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.4.1:2015-08-01-->
    <rule id="VitalSignsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="VitalSignsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:code">
      <assert test="@code = '8716-3'">@code SHALL = '8716-3'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="VitalSignsSection-errors-entry-vitalsOrg" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="VitalSignsSection-errors-entry-averageBPOrg" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="WoundCharacteristic-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.134-->
    <rule id="WoundCharacteristic-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:code">
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($WoundCharacteristic, @code)">SHALL be selected from ValueSet WoundCharacteristic</assert>
    </rule>
  </pattern>
  <pattern id="WoundMeasurementObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.133-->
    <rule id="WoundMeasurementObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]">
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($WoundMeasurements, @code)">SHALL be selected from ValueSet WoundMeasurements</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="USRealmAddress-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.2-->
    <rule id="USRealmAddress-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
      <assert test="count(cda:country) &lt;= 1">Cardinality of country is 0..1</assert>
      <assert test="count(cda:state) &lt;= 1">Cardinality of state is 0..1</assert>
      <assert test="count(cda:city) &lt;= 1">Cardinality of city is 0..1</assert>
      <assert test="count(cda:postalCode) &lt;= 1">Cardinality of postalCode is 0..1</assert>
      <assert test="count(cda:streetAddressLine) &lt;= 1">Cardinality of streetAddressLine is 0..1</assert>
    </rule>
    <rule id="USRealmAddress-errors-item.country" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr/cda:country | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr/cda:country | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr/cda:country | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:country | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr/cda:country | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr/cda:country | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr/cda:country | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:country | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:country | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr/cda:country | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:country | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr/cda:country | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr/cda:country | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr/cda:country">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
    <rule id="USRealmAddress-errors-item.state" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr/cda:state | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr/cda:state | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr/cda:state | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:state | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr/cda:state | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr/cda:state | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr/cda:state | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:state | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:state | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr/cda:state | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:state | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr/cda:state | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr/cda:state | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr/cda:state">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
    <rule id="USRealmAddress-errors-item.city" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr/cda:city | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr/cda:city | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr/cda:city | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:city | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr/cda:city | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr/cda:city | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr/cda:city | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:city | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:city | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr/cda:city | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:city | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr/cda:city | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr/cda:city | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr/cda:city">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
    <rule id="USRealmAddress-errors-item.postalCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr/cda:postalCode | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr/cda:postalCode | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr/cda:postalCode | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:postalCode | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr/cda:postalCode | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr/cda:postalCode | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr/cda:postalCode | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:postalCode | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:postalCode | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr/cda:postalCode | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:postalCode | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr/cda:postalCode | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr/cda:postalCode | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr/cda:postalCode">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
    <rule id="USRealmAddress-errors-item.streetAddressLine" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr/cda:streetAddressLine | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr/cda:streetAddressLine | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr/cda:streetAddressLine | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:streetAddressLine | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr/cda:streetAddressLine | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr/cda:streetAddressLine | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr/cda:streetAddressLine | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr/cda:streetAddressLine | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr/cda:streetAddressLine | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:streetAddressLine | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr/cda:streetAddressLine | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr/cda:streetAddressLine | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr/cda:streetAddressLine">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTime-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.4-->
    <rule id="USRealmDateTime-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
      <assert test="not(@value) or string-length(@value) &lt;= 8 or ((substring(@value, string-length(@value) - 4, 1) = '+' or substring(@value, string-length(@value) - 4, 1) = '-') and (number(substring(@value, string-length(@value) - 3, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 3, 2)) &lt;= 12 and string-length(substring(@value, string-length(@value) - 3, 2)) = 2) and (number(substring(@value, string-length(@value) - 1, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 1, 2)) &lt;= 59 and string-length(substring(@value, string-length(@value) - 1, 2)) = 2))">Timestamps more precise than the day SHALL include a timezone offset (+/- HHMM)</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTimeInterval-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.3-->
    <rule id="USRealmDateTimeInterval-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="not(@value) or string-length(@value) &lt;= 8 or ((substring(@value, string-length(@value) - 4, 1) = '+' or substring(@value, string-length(@value) - 4, 1) = '-') and (number(substring(@value, string-length(@value) - 3, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 3, 2)) &lt;= 12 and string-length(substring(@value, string-length(@value) - 3, 2)) = 2) and (number(substring(@value, string-length(@value) - 1, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 1, 2)) &lt;= 59 and string-length(substring(@value, string-length(@value) - 1, 2)) = 2))">Timestamps more precise than the day SHALL include a timezone offset (+/- HHMM)</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="USRealmDateTimeInterval-errors-low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
      <assert test="not(@value) or string-length(@value) &lt;= 8 or ((substring(@value, string-length(@value) - 4, 1) = '+' or substring(@value, string-length(@value) - 4, 1) = '-') and (number(substring(@value, string-length(@value) - 3, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 3, 2)) &lt;= 12 and string-length(substring(@value, string-length(@value) - 3, 2)) = 2) and (number(substring(@value, string-length(@value) - 1, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 1, 2)) &lt;= 59 and string-length(substring(@value, string-length(@value) - 1, 2)) = 2))">Timestamps more precise than the day SHALL include a timezone offset (+/- HHMM)</assert>
    </rule>
    <rule id="USRealmDateTimeInterval-errors-high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
      <assert test="not(@value) or string-length(@value) &lt;= 8 or ((substring(@value, string-length(@value) - 4, 1) = '+' or substring(@value, string-length(@value) - 4, 1) = '-') and (number(substring(@value, string-length(@value) - 3, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 3, 2)) &lt;= 12 and string-length(substring(@value, string-length(@value) - 3, 2)) = 2) and (number(substring(@value, string-length(@value) - 1, 2)) &gt;= 0 and number(substring(@value, string-length(@value) - 1, 2)) &lt;= 59 and string-length(substring(@value, string-length(@value) - 1, 2)) = 2))">Timestamps more precise than the day SHALL include a timezone offset (+/- HHMM)</assert>
    </rule>
  </pattern>
  <pattern id="USRealmPatientNamePTNUSFIELDED-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.1-->
    <rule id="USRealmPatientNamePTNUSFIELDED-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="@nullFlavor or count(cda:family) = 1">SHALL contain exactly one [1..1] family (CONF:81-7159).</assert>
      <assert test="@nullFlavor or cda:given">SHALL contain at least one [1..*] given (CONF:81-7157).</assert>
      <assert test="(not(cda:suffix) or count(cda:suffix) = 1)">There may be at most one suffix</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7278).</assert>
      <assert test="count(cda:validTime) &lt;= 1">Cardinality of validTime is 0..1</assert>
    </rule>
    <rule id="USRealmPatientNamePTNUSFIELDED-errors-item.family.qualifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name/cda:family/@qualifier">
      <assert test="contains($EntityPersonNamePartQualifier, .)">SHALL be selected from ValueSet EntityPersonNamePartQualifier</assert>
    </rule>
    <rule id="USRealmPatientNamePTNUSFIELDED-errors-item.given.qualifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name/cda:given/@qualifier">
      <assert test="contains($EntityPersonNamePartQualifier, .)">SHALL be selected from ValueSet EntityPersonNamePartQualifier</assert>
    </rule>
    <rule id="USRealmPatientNamePTNUSFIELDED-errors-item.prefix.qualifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name/cda:prefix/@qualifier">
      <assert test="contains($EntityPersonNamePartQualifier, .)">SHALL be selected from ValueSet EntityPersonNamePartQualifier</assert>
    </rule>
    <rule id="USRealmPatientNamePTNUSFIELDED-errors-item.suffix.qualifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name/cda:suffix/@qualifier">
      <assert test="contains($EntityPersonNamePartQualifier, .)">SHALL be selected from ValueSet EntityPersonNamePartQualifier</assert>
    </rule>
  </pattern>
  <pattern id="USRealmPersonNamePNUSFIELDED-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.1.1-->
    <rule id="USRealmPersonNamePNUSFIELDED-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:playingEntity/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity/cda:name | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole/cda:playingEntity/cda:name | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson/cda:name | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:associatedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:guardianPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
  </pattern>
  <pattern id="ActivitiesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.21.2.3:2015-08-01-->
    <rule id="ActivitiesSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]]">SHOULD contain Intervention Act</assert>
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]]">SHOULD contain Planned Intervention Act</assert>
    </rule>
    <rule id="ActivitiesSection-warnings-entry-intervention.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ActivitiesSection-warnings-entry-plannedIntervention.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ActivitiesSection-warnings-entry-handoffCommParticipants.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.43:2015-08-01-->
    <rule id="AdmissionDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-warnings-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedication-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.36:2014-06-09-->
    <rule id="AdmissionMedication-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="AdmissionMedication-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedicationsSectionEntriesOptional-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.44:2015-08-01-->
    <rule id="AdmissionMedicationsSectionEntriesOptional-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]]">SHOULD contain Admission Medication</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-warnings-entry-admissionMedication.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.48:2022-02-14-->
    <rule id="AdvanceDirectiveObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:code">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-code.translation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:code/cda:translation">
      <assert test="@nullFlavor or contains($AdvanceDirectivesCategories, @code)">SHOULD be selected from ValueSet AdvanceDirectivesCategories</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="cda:time">SHOULD contain time</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier.participantRole.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:code">
      <assert test="@nullFlavor or contains($HealthcareAgentOrProxyChoices, @code)">SHOULD be selected from ValueSet HealthcareAgentOrProxyChoices</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:playingEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.playingEntity.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:playingEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-reference-reference1.externalDocument.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/cda:externalDocument/cda:code">
      <assert test="@nullFlavor or contains($AdvanceDirectivesCategories, @code)">SHOULD be selected from ValueSet AdvanceDirectivesCategories</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.108:2022-02-14-->
    <rule id="AdvanceDirectiveOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
      <assert test="cda:participant">SHOULD contain participant</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-warnings-component-advDirObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectivesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.21.1:2022-02-14-->
    <rule id="AdvanceDirectivesSection-warnings-entry-observation.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-warnings-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
      <assert test="cda:participant">SHOULD contain participant</assert>
    </rule>
  </pattern>
  <pattern id="AgeObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.31-->
    <rule id="AgeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AllergiesAndIntolerancesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.6.1:2015-08-01-->
    <rule id="AllergiesAndIntolerancesSection-warnings-entry-allergyConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AllergyConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.30:2015-08-01-->
    <rule id="AllergyConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="AllergyConcernAct-warnings-entryRelationship-allergyObs.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
  </pattern>
  <pattern id="AllergyIntoleranceObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.7:2014-06-09-->
    <rule id="AllergyIntoleranceObservation-warnings-participant-consumable.participantRole.playingEntity.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole/cda:playingEntity/cda:code">
      <assert test="@nullFlavor or contains($CommonSubstancesForAllergyAndIntoleranceDocumentationIncludingRefutations, @code)">SHOULD be selected from ValueSet CommonSubstancesForAllergyAndIntoleranceDocumentationIncludingRefutations</assert>
    </rule>
  </pattern>
  <pattern id="AllergyStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.28:2019-06-20-->
    <rule id="AllergyStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AnesthesiaSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.25:2014-06-09-->
    <rule id="AnesthesiaSection-warnings-entry-procedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="AnesthesiaSection-warnings-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.69:2022-06-01-->
    <rule id="AssessmentScaleObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="AssessmentScaleObservation-warnings-entryRelationship-supportingObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="AssessmentScaleObservation-warnings-referenceRange.observationRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange">
      <assert test="cda:text">SHOULD contain text</assert>
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleSupportingObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.86:2022-06-01-->
    <rule id="AssessmentScaleSupportingObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentandPlanSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.9:2014-06-09-->
    <rule id="AssessmentandPlanSection-warnings-entry-plannedProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AuthorParticipation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.119-->
    <rule id="AuthorParticipation-warnings-assignedAuthor.code" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="AuthorParticipation-warnings-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="AuthorParticipation-warnings-assignedAuthor.representedOrganization.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="AuthorizationActivity-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.1.19-->
    <rule id="AuthorizationActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AverageBloodPressureOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.512:2024-05-01-->
    <rule id="AverageBloodPressureOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="BasicIndustryObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.504:2023-05-01-->
    <rule id="BasicIndustryObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="BasicIndustryObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="BasicOccupationObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.503:2023-05-01-->
    <rule id="BasicOccupationObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="BasicOccupationObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
    <rule id="BasicOccupationObservation-warnings-entryRelationship-basic-industry.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="BirthSexObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.200:2024-05-01-->
    <rule id="BirthSexObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="BrandNameObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.301:2019-06-21-->
    <rule id="BrandNameObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareExperiencePreference-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.509:2024-05-01-->
    <rule id="CareExperiencePreference-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="sdtcPrecondition2">SHOULD contain sdtc:Precondition2</assert>
    </rule>
    <rule id="CareExperiencePreference-warnings-sdtcPrecondition2" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/sdtc:precondition2">
      <assert test="sdtc:criterion">SHOULD contain criterion</assert>
    </rule>
  </pattern>
  <pattern id="CarePlan-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.15:2024-05-01-->
    <rule id="CarePlan-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
      <assert test="cda:informationRecipient">SHOULD contain informationRecipient</assert>
      <assert test="cda:componentOf">SHOULD contain componentOf</assert>
    </rule>
    <rule id="CarePlan-warnings-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:informationRecipient">SHOULD contain informationRecipient</assert>
      <assert test="cda:receivedOrganization">SHOULD contain receivedOrganization</assert>
    </rule>
    <rule id="CarePlan-warnings-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CarePlan-warnings-informationRecipient.intendedRecipient.receivedOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization">
      <assert test="cda:id">SHOULD contain id</assert>
      <assert test="cda:standardIndustryClassCode">SHOULD contain standardIndustryClassCode</assert>
    </rule>
    <rule id="CarePlan-warnings-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="CarePlan-warnings-authenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:signatureCode">
      <assert test="not(@code) or @code != 'X'">CDA Release One represented either an intended ('X') or actual ('S') authenticator. CDA Release Two only represents an actual authenticator, so has deprecated the value of 'X'.</assert>
    </rule>
    <rule id="CarePlan-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier.associatedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.performer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="CarePlan-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="CarePlan-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="CarePlan-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]]">SHOULD contain a Health Status Evaluations and Outcomes Section</assert>
    </rule>
    <rule id="CarePlan-warnings-component.structuredBody.component-healthConcerns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]]">SHOULD contain Health Status Observation</assert>
    </rule>
    <rule id="CarePlan-warnings-component.structuredBody.component-activities.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]]">SHOULD contain Intervention Act</assert>
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]]">SHOULD contain Planned Intervention Act</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.1:2024-05-01-->
    <rule id="CareTeamMemberAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.sdtcFunctionCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/sdtc:functionCode">
      <assert test="@nullFlavor or contains($CareTeamMemberFunction, @code)">SHOULD be selected from ValueSet CareTeamMemberFunction</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:assignedPerson">SHOULD contain assignedPerson</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity.id.root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity.representedOrganization.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-entryRelationship-note.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:encounter) and not(cda:observation) and (cda:act)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-entryRelationship-schedule.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberScheduleObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.3:2022-06-01-->
    <rule id="CareTeamMemberScheduleObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:value">
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500:2022-06-01-->
    <rule id="CareTeamOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-participant-lead.sdtcFunctionCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'PPRF')]/sdtc:functionCode">
      <assert test="@nullFlavor or contains($CareTeamMemberFunction, @code)">SHOULD be selected from ValueSet CareTeamMemberFunction</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-participant-location.participantRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-participant-location.participantRole.addr" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-type.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01'])] and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-entryReference.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-note.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-member.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamTypeObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.2:2019-07-01-->
    <rule id="CareTeamTypeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.500:2022-06-01-->
    <rule id="CareTeamsSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]">
      <assert test="cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]]">SHOULD contain Care Team Organizer</assert>
    </rule>
    <rule id="CareTeamsSection-warnings-entry-primary.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="CaregiverCharacteristics-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.72-->
    <rule id="CaregiverCharacteristics-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CatalogNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.302:2019-06-21-->
    <rule id="CatalogNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CharacteristicsofHomeEnvironment-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.109-->
    <rule id="CharacteristicsofHomeEnvironment-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($ResidenceAndAccommodationType, @code)">SHOULD be selected from ValueSet ResidenceAndAccommodationType</assert>
    </rule>
  </pattern>
  <pattern id="CommentActivity-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.64-->
    <rule id="CommentActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="CompanyNameObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.303:2019-06-21-->
    <rule id="CompanyNameObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ComplicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.37:2015-08-01-->
    <rule id="ComplicationsSection-warnings-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ConsultationNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.4:2024-05-01-->
    <rule id="ConsultationNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:participant[@typeCode = 'CALLBCK']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="CALLBCK" call back contact (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ConsultationNote-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="ConsultationNote-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]]">SHOULD contain a Medications Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]]">SHOULD contain a Physical Exam Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]]">SHOULD contain a Results Section</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody.component-medicalEquipment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
  </pattern>
  <pattern id="ContinuityofCareDocumentCCD-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.2:2024-05-01-->
    <rule id="ContinuityofCareDocumentCCD-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="cda:id[@root = '2.16.840.1.113883.4.6']">SHOULD contain an id with root='2.16.840.1.113883.4.6' (NPI)</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="not(cda:assignedPerson) or cda:id[@root = '2.16.840.1.113883.4.6']">If this assignedEntity is an assignedPerson, the assignedEntity/id **SHOULD** contain zero or one [0..1] @root="2.16.840.1.113883.4.6" National Provider Identifier (CONF:1198-32466).</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]]">SHOULD contain a Procedures Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]">SHOULD contain a Plan of Treatment Section</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-medEquipment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
  </pattern>
  <pattern id="CoverageActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.60:2024-05-01-->
    <rule id="CoverageActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="CoverageActivity-warnings-entryRelationship-policy.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CriticalityObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.145-->
    <rule id="CriticalityObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CulturalandReligiousObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.111-->
    <rule id="CulturalandReligiousObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DateOfDiagnosisAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.502:2022-06-01-->
    <rule id="DateOfDiagnosisAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DeceasedObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.79:2015-08-01-->
    <rule id="DeceasedObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="DeceasedObservation-warnings-entryRelationship-problemObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="DeviceIdentifierObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.304:2022-06-01-->
    <rule id="DeviceIdentifierObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:value">
      <assert test="@extension">SHOULD contain extension</assert>
    </rule>
  </pattern>
  <pattern id="DisabilityStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.505:2023-05-01-->
    <rule id="DisabilityStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="DisabilityStatusObservation-warnings-entryRelationship-assessmentScaleObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DischargeDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.24:2015-08-01-->
    <rule id="DischargeDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-warnings-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedication-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.35:2016-03-01-->
    <rule id="DischargeMedication-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="DischargeMedication-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.11.1:2015-08-01-->
    <rule id="DischargeMedicationsSection-warnings-entry-dischargeMed.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DischargeSummary-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.8:2024-05-01-->
    <rule id="DischargeSummary-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="DischargeSummary-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]]">SHOULD contain a Discharge Medications Section</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-dischargeDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-admissionDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-admissionMeds.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]]">SHOULD contain Admission Medication</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
  </pattern>
  <pattern id="DistinctIdentificationCodeObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.308:2019-06-21-->
    <rule id="DistinctIdentificationCodeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DrugMonitoringAct-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.123-->
    <rule id="DrugMonitoringAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EncounterActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.49:2015-08-01-->
    <rule id="EncounterActivity-warnings-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="EncounterActivity-warnings-code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code">
      <assert test="cda:originalText/cda:reference/@value">SHOULD contain originalText/reference/@value</assert>
      <assert test="@nullFlavor or contains($EncounterTypeCode, @code)">SHOULD be selected from ValueSet EncounterTypeCode</assert>
    </rule>
    <rule id="EncounterActivity-warnings-performer.assignedEntity.code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:performer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="EncounterActivity-warnings-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:participant[cda:participantRole[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])] and (@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="EncounterActivity-warnings-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="EncounterActivity-warnings-entryRelationship-diagnosis.act" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EncounterDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.80:2024-05-01-->
    <rule id="EncounterDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="EncounterDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="EncountersSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.22.1:2015-08-01-->
    <rule id="EncountersSection-warnings-entry-encounter.encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:entry[cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])]]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EntryReference-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.122-->
    <rule id="EntryReference-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EstimatedDateofDelivery-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.1-->
    <rule id="EstimatedDateofDelivery-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ExpirationDateObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.309:2019-06-21-->
    <rule id="ExpirationDateObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ExternalDocumentReference-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.115:2014-06-09-->
    <rule id="ExternalDocumentReference-warnings-root" context="cda:externalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09']]">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryDeathObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.47-->
    <rule id="FamilyHistoryDeathObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.46:2015-08-01-->
    <rule id="FamilyHistoryObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="FamilyHistoryObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="FamilyHistoryObservation-warnings-entryRelationship-ageObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FamilyHistoryObservation-warnings-entryRelationship-deathObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.45:2015-08-01-->
    <rule id="FamilyHistoryOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-subject.relatedSubject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject">
      <assert test="cda:subject">SHOULD contain subject</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-subject.relatedSubject.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:code">
      <assert test="@nullFlavor or contains($FamilyMemberValue, @code)">SHOULD be selected from ValueSet FamilyMemberValue</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-subject.relatedSubject.subject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:subject">
      <assert test="cda:birthTime">SHOULD contain birthTime</assert>
      <assert test="sdtc:id">SHOULD contain sdtcId</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-component.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:component/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistorySection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.15:2015-08-01-->
    <rule id="FamilyHistorySection-warnings-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.67:2014-06-09-->
    <rule id="FunctionalStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:value">
      <assert test="not(@codeSystem) or @codeSystem = '2.16.840.1.113883.6.96'">If coded, **SHOULD** contain a code from SNOMED CT (CodeSystem: 2.16.840.1.113883.6.96) (CONF:1098-14234).</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-entryRelationship-nonMedSupply.supply" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-entryRelationship-caregiverCharacteristics.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-entryRelationship-assessmentScaleObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.66:2014-06-09-->
    <rule id="FunctionalStatusOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-warnings-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.254' or @codeSystem = '2.16.840.1.113883.6.1'">**SHOULD** be selected from ICF (codeSystem 2.16.840.1.113883.6.254) *OR* LOINC (2.16.840.1.113883.6.1) (CONF:1098-31417).</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-warnings-component-functionalStatus.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-warnings-component-selfCare.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.14:2014-06-09-->
    <rule id="FunctionalStatusSection-warnings-entry-funcStatusOrganizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-funcStatusObs.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-caregiverCharacteristics.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-assessmentScale.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-nonMedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-selfCareActivity.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-sensoryStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="GenderIdentityObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.34.3.45:2023-05-01-->
    <rule id="GenderIdentityObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GenderIdentityObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="GoalObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.121:2022-06-01-->
    <rule id="GoalObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-refersTo.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-componentEntry.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'COMP')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-priorityPreference.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-goal.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-progressTowardGoal.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="GoalObservation-warnings-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="GoalsSection-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.60-->
    <rule id="GoalsSection-warnings-entry-goal.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HandoffCommunicationParticipants-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.141-->
    <rule id="HandoffCommunicationParticipants-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-warnings-participant-infoRecipient.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-warnings-participant-infoRecipient.participantRole.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-warnings-participant-infoRecipient.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.132:2022-06-01-->
    <rule id="HealthConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-observations.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:organizer) and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-acts.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-organizers.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])] and (@typeCode = 'REFR')]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-related-entries.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-component-health-concern-acts.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'COMP')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.58:2015-08-01-->
    <rule id="HealthConcernsSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]]">SHOULD contain Health Status Observation</assert>
    </rule>
    <rule id="HealthConcernsSection-warnings-entry-healthStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernsSection-warnings-entry-healthConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="HealthConcernsSection-warnings-entry-riskConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusEvaluationsandOutcomesSection-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.61-->
    <rule id="HealthStatusEvaluationsandOutcomesSection-warnings-entry-outcome.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.5:2014-06-09-->
    <rule id="HealthStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="HighestPressureUlcerStage-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.77-->
    <rule id="HighestPressureUlcerStage-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="HistoryandPhysical-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.3:2024-05-01-->
    <rule id="HistoryandPhysical-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]]">SHOULD contain a History of Present Illness Section</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
  </pattern>
  <pattern id="HospitalAdmissionDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.34:2015-08-01-->
    <rule id="HospitalAdmissionDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.33:2015-08-01-->
    <rule id="HospitalDischargeDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.52:2015-08-01-->
    <rule id="ImmunizationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:consumable/cda:manufacturedProduct">
      <assert test="cda:manufacturerOrganization">SHOULD contain manufacturerOrganization</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-indication.observation.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-medSupplyOrder.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-medDispense.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-reactionObs.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-immunizationNotGiven.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-substanceAdmin.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:observation) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationMedicationInformation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.54:2014-06-09-->
    <rule id="ImmunizationMedicationInformation-warnings-root" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]">
      <assert test="cda:manufacturerOrganization">SHOULD contain manufacturerOrganization</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-warnings-manufacturedMaterial" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/cda:manufacturedMaterial">
      <assert test="cda:lotNumberText">SHOULD contain lotNumberText</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationNotGivenReason-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.53:2024-05-01-->
    <rule id="ImmunizationNotGivenReason-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.2.1:2015-08-01-->
    <rule id="ImmunizationsSection-warnings-entry-activity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ImplantableDeviceStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.305:2019-06-21-->
    <rule id="ImplantableDeviceStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="Indication-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.19:2023-05-01-->
    <rule id="Indication-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="Indication-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
  </pattern>
  <pattern id="Instruction-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.20:2014-06-09-->
    <rule id="Instruction-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="InstructionsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.45:2014-06-09-->
    <rule id="InstructionsSection-warnings-entry-instruction.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="InterventionAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.131:2015-08-01-->
    <rule id="InterventionAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-advanceDirectiveObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-interventionAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-procedureActivityProcedure.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:encounter) and not(cda:supply)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-encounterActivity.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])] and not(cda:supply)]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-instruction.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-nonMedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-nutritionRecommendation.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-entryReferenceRefr.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-entryReferenceRson.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'RSON') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-handoffCommunicationParticipants.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-plannedInterventionAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="LatexSafetyObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.314:2019-06-21-->
    <rule id="LatexSafetyObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="LongitudinalCareWoundObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.114:2015-08-01-->
    <rule id="LongitudinalCareWoundObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:value">
      <assert test="@nullFlavor or contains($WoundType, @code)">SHOULD be selected from ValueSet WoundType</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-targetSiteCode.qualifier.value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier/cda:value/@code">
      <assert test="contains($TargetSiteQualifiers, .)">SHOULD be selected from ValueSet TargetSiteQualifiers</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-woundMeasurementObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-woundCharacteristic.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-numberofPressureUlcersObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-highestPressureUlcerStage.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="LotOrBatchNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.315:2019-06-21-->
    <rule id="LotOrBatchNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MRISafetyObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.318:2019-06-21-->
    <rule id="MRISafetyObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ManufacturingDateObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.316:2019-06-21-->
    <rule id="ManufacturingDateObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentOrganizer-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.135-->
    <rule id="MedicalEquipmentOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-warnings-component-nonMedicalSupply.supply" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:procedure)]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-warnings-component-procedureActivity.procedure" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.23:2014-06-09-->
    <rule id="MedicalEquipmentSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="MedicalEquipmentSection-warnings-entry-medicalEquip.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])] and not(cda:procedure) and not(cda:supply)]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicalEquipmentSection-warnings-entry-nonMedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:procedure) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicalEquipmentSection-warnings-entry-procedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:supply)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MedicationActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.16:2014-06-09-->
    <rule id="MedicationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="MedicationActivity-warnings-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="@value">SHOULD contain @value</assert>
      <assert test="cda:low">SHOULD contain low</assert>
    </rule>
    <rule id="MedicationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="MedicationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="MedicationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-supplyOrder.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-medicationDispense.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-reaction.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-drugMonitoring.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-substanceAdministered.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-adherence.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-signature.substanceAdministration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])] and not(cda:observation) and not(cda:act) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicationAdherence-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.508:2023-05-01-->
    <rule id="MedicationAdherence-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="MedicationAdherence-warnings-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:value/@code">
      <assert test="contains($MedicationAdherence, .)">SHOULD be selected from ValueSet MedicationAdherence</assert>
    </rule>
    <rule id="MedicationAdherence-warnings-informant.assignedEntity.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:informant/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($InformationSourceForMedicationAdherence, @code)">SHOULD be selected from ValueSet InformationSourceForMedicationAdherence</assert>
    </rule>
  </pattern>
  <pattern id="MedicationDispense-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.18:2023-05-01-->
    <rule id="MedicationDispense-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationDispense-warnings-performer.assignedEntity" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="MedicationDispense-warnings-performer.assignedEntity.addr" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="MedicationDispense-warnings-entryRelationship-entryRelationship1.supply" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
  </pattern>
  <pattern id="MedicationFreeTextSig-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.147-->
    <rule id="MedicationFreeTextSig-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicationSupplyOrder-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.17:2014-06-09-->
    <rule id="MedicationSupplyOrder-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationSupplyOrder-warnings-entryRelationship.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsAdministeredSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.38:2014-06-09-->
    <rule id="MedicationsAdministeredSection-warnings-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.1.1:2014-06-09-->
    <rule id="MedicationsSection-warnings-entry-medActivity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.74:2024-05-01-->
    <rule id="MentalStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="MentalStatusObservation-warnings-entryRelationship-assessmentScale.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.75:2015-08-01-->
    <rule id="MentalStatusOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MentalStatusOrganizer-warnings-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:code">
      <assert test="not(@codeSystem) or (@codeSystem = '2.16.840.1.113883.6.254' or @codeSystem = '2.16.840.1.113883.6.1')">**SHOULD** be selected from ICF (codeSystem 2.16.840.1.113883.6.254) *OR* LOINC (codeSystem 2.16.840.1.113883.6.1) (CONF:1198-14698).</assert>
    </rule>
    <rule id="MentalStatusOrganizer-warnings-component-mentalStatus.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.56:2015-08-01-->
    <rule id="MentalStatusSection-warnings-entry-mentalStatusOrganizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01'])] and not(cda:observation)]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MentalStatusSection-warnings-entry-mentalStatusObs.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="MentalStatusSection-warnings-entry-assessmentScale.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ModelNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.317:2019-06-21-->
    <rule id="ModelNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NonMedicinalSupplyActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.50:2014-06-09-->
    <rule id="NonMedicinalSupplyActivity-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-warnings-effectiveTime" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-warnings-entryRelationship-instruction.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NoteActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.202:2016-11-01-->
    <rule id="NoteActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="NoteActivity-warnings-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:code">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="NoteActivity-warnings-text.mediaType" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:text/@mediaType">
      <assert test="contains($SupportedFileFormats, .)">SHOULD be selected from ValueSet SupportedFileFormats</assert>
    </rule>
    <rule id="NoteActivity-warnings-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:effectiveTime">
      <assert test="@value">SHOULD contain @value</assert>
    </rule>
    <rule id="NoteActivity-warnings-participant-legalAuthenticator.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="NoteActivity-warnings-reference-externalDocument.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:reference[(cda:externalDocument)]/cda:externalDocument">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
  </pattern>
  <pattern id="NotesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.65:2016-11-01-->
    <rule id="NotesSection-warnings-entry-note.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NumberofPressureUlcersObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.76:2024-05-01-->
    <rule id="NumberofPressureUlcersObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-warnings-entryRelationship-stage.observation.value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation/cda:value">
      <assert test="@nullFlavor or contains($PressureUlcerStage, @code)">SHOULD be selected from ValueSet PressureUlcerStage</assert>
    </rule>
  </pattern>
  <pattern id="NutritionAssessment-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.138-->
    <rule id="NutritionAssessment-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionAssessment-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:value">
      <assert test="not(@codeSystem) or @codeSystem = '2.16.840.1.113883.6.96'">If coded, **SHOULD** contain a code from SNOMED CT (CodeSystem: 2.16.840.1.113883.6.96) (CONF:1098-32925).</assert>
    </rule>
  </pattern>
  <pattern id="NutritionRecommendation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.130-->
    <rule id="NutritionRecommendation-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($NutritionRecommendationGrouping, @code)">SHOULD be selected from ValueSet NutritionRecommendationGrouping</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedEncounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:supply) and not(cda:procedure)]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedMedActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedProc.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="NutritionSection-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.57-->
    <rule id="NutritionSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="NutritionSection-warnings-entry-nutritionalStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NutritionalStatusObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.124-->
    <rule id="NutritionalStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="NutritionalStatusObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($NutritionalStatus, @code)">SHOULD be selected from ValueSet NutritionalStatus</assert>
    </rule>
    <rule id="NutritionalStatusObservation-warnings-entryRelationship-nutritionAssessment.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.7:2024-05-01-->
    <rule id="OperativeNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-primary.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
      <assert test="@nullFlavor or contains($CareTeamMemberFunction, @code)">SHOULD be selected from ValueSet CareTeamMemberFunction</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-secondary.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
      <assert test="@nullFlavor or contains($CareTeamMemberFunction, @code)">SHOULD be selected from ValueSet CareTeamMemberFunction</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="OperativeNote-warnings-component.structuredBody.component-preopDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]]">SHOULD contain Preoperative Diagnosis</assert>
    </rule>
  </pattern>
  <pattern id="OutcomeObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.144-->
    <rule id="OutcomeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-entryRelationship-goal-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'GEVL') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-entryRelationship-progressTowardGoalObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-entryRelationship-intervention-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'RSON') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="PastMedicalHistory-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.20:2015-08-01-->
    <rule id="PastMedicalHistory-warnings-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PastMedicalHistory-warnings-entry-problem.observation.effectiveTime" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation/cda:effectiveTime">
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
  </pattern>
  <pattern id="PatientReferralAct-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.140-->
    <rule id="PatientReferralAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:priorityCode">SHOULD contain priorityCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-participant.participantRole.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:participant/cda:participantRole/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-entryRelationship1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation">
      <assert test="cda:priorityCode">SHOULD contain priorityCode</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-entryRelationship1.observation.priorityCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:priorityCode">
      <assert test="@nullFlavor or contains($ActPriority, @code)">SHOULD be selected from ValueSet ActPriority</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-entryRelationship1.observation.value" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:value">
      <assert test="@nullFlavor or contains($CareModel, @code)">SHOULD be selected from ValueSet CareModel</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-indication.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="PayersSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.18:2015-08-01-->
    <rule id="PayersSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
    <rule id="PayersSection-warnings-entry-coverage.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="PhysicalExamSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.2.10:2015-08-01-->
    <rule id="PhysicalExamSection-warnings-entry-longCareWound.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PhysicalExamSection-warnings-component.section.code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:component/cda:section/cda:code">
      <assert test="@nullFlavor or contains($PhysicalExamType, @code)">SHOULD be selected from ValueSet PhysicalExamType</assert>
    </rule>
  </pattern>
  <pattern id="PlannedCoverage-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.129:2024-05-01-->
    <rule id="PlannedCoverage-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedEncounter-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.40:2014-06-09-->
    <rule id="PlannedEncounter-warnings-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:code">
      <assert test="@nullFlavor or contains($EncounterPlanned, @code)">SHOULD be selected from ValueSet EncounterPlanned</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-entryRelationship-priorityPreference.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="PlannedImmunizationActivity-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.120-->
    <rule id="PlannedImmunizationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:consumable/cda:manufacturedProduct">
      <assert test="cda:manufacturerOrganization">SHOULD contain manufacturerOrganization</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-entryRelationship-priorityPreference.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedInterventionAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.146:2015-08-01-->
    <rule id="PlannedInterventionAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-reason.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-instruction.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-nonMedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedEncounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:supply) and (@typeCode = 'REFR')]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedProcedure.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedMedicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-nutritionRecommendation.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-entryReference.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedImmunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="PlannedMedicationActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.42:2014-06-09-->
    <rule id="PlannedMedicationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="@value">SHOULD contain @value</assert>
      <assert test="cda:low">SHOULD contain low</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-rateQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:rateQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-entryRelationship-priorityPreference.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedure-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.41:2022-06-01-->
    <rule id="PlannedProcedure-warnings-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-priorityPreference.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-instruction.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-coverage.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-assessmentScale.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-entryReference.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedureSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.30:2014-06-09-->
    <rule id="PlannedProcedureSection-warnings-entry-plannedProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PlannedSupply-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.43:2024-05-01-->
    <rule id="PlannedSupply-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-priorityPreference.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-indication.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-instruction.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-plannedCoverage.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlanofTreatmentSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.10:2014-06-09-->
    <rule id="PlanofTreatmentSection-warnings-entry-plannedEnc.encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedProc.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:supply)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedMed.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-nutrition.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedImmunization.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-goal.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PolicyActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.61:2024-05-01-->
    <rule id="PolicyActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PolicyActivity-warnings-code.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:code/@code">
      <assert test="contains($PayerType, .)">SHOULD be selected from ValueSet PayerType</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:representedOrganization">SHOULD contain representedOrganization</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity.code.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:code/@code">
      <assert test="contains($FinanciallyResponsiblePartyTypeValueSet, .)">SHOULD be selected from ValueSet FinanciallyResponsiblePartyTypeValueSet</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity.representedOrganization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:representedOrganization">
      <assert test="cda:name">SHOULD contain name</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-guarantor" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]">
      <assert test="cda:time">SHOULD contain time</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-guarantor.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity">
      <assert test="cda:assignedPerson/cda:name or cda:representedOrganization/cda:name">**SHOULD** include assignedEntity/assignedPerson/name AND/OR assignedEntity/representedOrganization/name (CONF:4537-8967).</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-guarantor.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]">
      <assert test="cda:time">SHOULD contain time</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:time">
      <assert test="cda:low">SHOULD contain low</assert>
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:playingEntity">SHOULD contain playingEntity</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:code">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole.code.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:code/@code">
      <assert test="contains($CoverageRoleTypeValueSet, .)">SHOULD be selected from ValueSet CoverageRoleTypeValueSet</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-subscriber.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-subscriber.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-entryRelationship-authorization.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.51:2015-08-01-->
    <rule id="PostprocedureDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.36:2015-08-01-->
    <rule id="PostprocedureDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]]">SHOULD contain Postprocedure Diagnosis</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-warnings-entry-postopDiagnosis.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyIntentionInNextYear-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.281:2023-05-01-->
    <rule id="PregnancyIntentionInNextYear-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.8-->
    <rule id="PregnancyObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PregnancyObservation-warnings-entryRelationship-estimatedDateofDelivery.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.65:2015-08-01-->
    <rule id="PreoperativeDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.34:2015-08-01-->
    <rule id="PreoperativeDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]]">SHOULD contain Preoperative Diagnosis</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-warnings-entry-preopDiagnosis.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PriorityPreference-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.143-->
    <rule id="PriorityPreference-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProblemConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.3:2024-05-01-->
    <rule id="ProblemConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemConcernAct-warnings-entryRelationship-problem.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemConcernAct-warnings-entryRelationship-priority.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProblemObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.4:2024-05-01-->
    <rule id="ProblemObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-age.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-prognosis.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-priority.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-status.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-assessment.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-dateOfDiagnosis.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProblemSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.5.1:2015-08-01-->
    <rule id="ProblemSection-warnings-entry-act.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemSection-warnings-entry-observation.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProblemStatus-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.6:2019-06-20-->
    <rule id="ProblemStatus-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureActivityProcedure-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.14:2024-05-01-->
    <rule id="ProcedureActivityProcedure-warnings-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code">
      <assert test="cda:originalText/cda:reference/@value">SHOULD contain originalText/reference/@value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-effectiveTime" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
      <assert test="@value">SHOULD contain value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-effectiveTime.low" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-effectiveTime.high" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-specimen.specimenRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:specimen/cda:specimenRole">
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:assignedPerson">SHOULD contain assignedPerson</assert>
      <assert test="cda:representedOrganization">SHOULD contain representedOrganization</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity.representedOrganization" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization">
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity.representedOrganization.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-participant-serviceDeliveryLocation.participantRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-instruction.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-medication.substanceAdministration" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-reaction.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-assessmentScaleObs.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-entryReference.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureFindingsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.28:2015-08-01-->
    <rule id="ProcedureFindingsSection-warnings-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureIndicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.29:2014-06-09-->
    <rule id="ProcedureIndicationsSection-warnings-entry-indication.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.6:2024-05-01-->
    <rule id="ProcedureNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:componentOf">SHOULD contain componentOf</assert>
    </rule>
    <rule id="ProcedureNote-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ProcedureNote-warnings-participant-participant1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ProcedureNote-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="ProcedureNote-warnings-componentOf.encompassingEncounter.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:code">
      <assert test="@nullFlavor or contains($ActEncounterCodes, @code)">SHOULD be selected from ValueSet ActEncounterCodes</assert>
    </rule>
    <rule id="ProcedureNote-warnings-component.structuredBody.component-postProcedureDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]]">SHOULD contain Postprocedure Diagnosis</assert>
    </rule>
    <rule id="ProcedureNote-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
  </pattern>
  <pattern id="ProceduresSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.7.1:2014-06-09-->
    <rule id="ProceduresSection-warnings-entry-entryProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProductInstance-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.37-->
    <rule id="ProductInstance-warnings-playingDevice" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:playingDevice">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
  </pattern>
  <pattern id="PrognosisObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.113-->
    <rule id="PrognosisObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProgressNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.9:2024-05-01-->
    <rule id="ProgressNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:documentationOf">SHOULD contain documentationOf</assert>
    </rule>
    <rule id="ProgressNote-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="ProgressNote-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ProgressNote-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="ProgressNote-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ProgressNote-warnings-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProgressNote-warnings-component.structuredBody.component-activities.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]]">SHOULD contain Intervention Act</assert>
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]]">SHOULD contain Planned Intervention Act</assert>
    </rule>
    <rule id="ProgressNote-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
  </pattern>
  <pattern id="ProgressTowardGoalObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.110-->
    <rule id="ProgressTowardGoalObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAssemblerParticipation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.7:2020-05-19-->
    <rule id="ProvenanceAssemblerParticipation-warnings-associatedEntity.scopingOrganization" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization">
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-warnings-associatedEntity.scopingOrganization.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAuthorParticipation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.6:2019-10-01-->
    <rule id="ProvenanceAuthorParticipation-warnings-assignedAuthor" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-warnings-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-warnings-assignedAuthor.assignedPerson.name" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:assignedPerson/cda:name">
      <assert test="cda:given">SHOULD contain given</assert>
    </rule>
  </pattern>
  <pattern id="ReactionObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.9:2014-06-09-->
    <rule id="ReactionObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ReactionObservation-warnings-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="cda:low">SHOULD contain low</assert>
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
    <rule id="ReactionObservation-warnings-entryRelationship-procedure.procedure" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration) and not(cda:observation)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ReactionObservation-warnings-entryRelationship-medication.substanceAdministration" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ReactionObservation-warnings-entryRelationship-severity.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="Reason-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.88:2023-05-01-->
    <rule id="Reason-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ReasonforReferralSection-warnings">
    <!--urn:hl7ii:1.3.6.1.4.1.19376.1.5.3.1.3.1:2014-06-09-->
    <rule id="ReasonforReferralSection-warnings-entry-patientReferral.act" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:priorityCode">SHOULD contain priorityCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ReferralNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.14:2024-05-01-->
    <rule id="ReferralNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:participant[@typeCode = 'IND']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="IND" Indirect (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
      <assert test="cda:participant[@typeCode = 'CALLBCK']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="CALLBCK" call back contact (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
    </rule>
    <rule id="ReferralNote-warnings-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="ReferralNote-warnings-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]">SHOULD contain a Plan of Treatment Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]]">SHOULD contain a Results Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]]">SHOULD contain a Functional Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]]">SHOULD contain a Mental Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]]">SHOULD contain a Nutrition Section</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-medicalEquip.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
  </pattern>
  <pattern id="RelatedPersonRelationshipAndNameParticipant-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.8:2023-05-01-->
    <rule id="RelatedPersonRelationshipAndNameParticipant-warnings-associatedEntity" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-warnings-associatedEntity.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="ResultObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.2:2023-05-01-->
    <rule id="ResultObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:interpretationCode">SHOULD contain interpretationCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:referenceRange">SHOULD contain referenceRange</assert>
    </rule>
    <rule id="ResultObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">This code **SHOULD** be a code from the LOINC that identifies the result observation. If an appropriate LOINC code does not exist, then the local code for this result **SHALL** be sent (CONF:4537-19212).</assert>
    </rule>
    <rule id="ResultObservation-warnings-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@codeSystem = '2.16.840.1.113883.6.96' or @codeSystem = '2.16.840.1.113883.6.1'">If Observation/value is a CD (**xsi:type="CD"**) the value **SHOULD** be SNOMED-CT or LOINC (CONF:4537-32610).</assert>
    </rule>
  </pattern>
  <pattern id="ResultOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.1:2023-05-01-->
    <rule id="ResultOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or @codeSystem = '2.16.840.1.113883.6.96'">**SHOULD** be selected from LOINC (codeSystem 2.16.840.1.113883.6.1) **OR** SNOMED CT (codeSystem 2.16.840.1.113883.6.96), and **MAY** be selected from CPT (codeSystem 2.16.840.1.113883.6.12) (CONF:4537-19218).</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-specimen.specimenRole.specimenPlayingEntity.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen/cda:specimenRole/cda:specimenPlayingEntity/cda:code">
      <assert test="@nullFlavor or contains($SpecimenType, @code)">SHOULD be selected from ValueSet SpecimenType</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-component-resultObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:interpretationCode">SHOULD contain interpretationCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:referenceRange">SHOULD contain referenceRange</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-component-specimenProc.procedure" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
    </rule>
  </pattern>
  <pattern id="ResultsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.3.1:2015-08-01-->
    <rule id="ResultsSection-warnings-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="RiskConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.136:2015-08-01-->
    <rule id="RiskConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-problemObservation1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-allergy-IntoleranceObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-entryReferenceRefr.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-entryReferenceComp.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'COMP') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-assessmentScaleObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-mentalStatusObservation2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-self-CareActivitiesADLandIADL.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-smokingStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-encounterDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-entryRelationship11.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-functionalStatusObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-hospitalAdmissionDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-nutritionAssessment.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-postprocedureDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-pregnancyObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-preoperativeDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-reactionObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-resultObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:interpretationCode">SHOULD contain interpretationCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:referenceRange">SHOULD contain referenceRange</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-sensoryStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-socialHistoryObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-substanceorDeviceAllergy-IntoleranceObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-vitalSignObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not((contains((('2708-6 3150-0 59408-5 8289-1 59575-1 59576-9')), cda:code/@code))) or cda:value/@unit = '%'">Percentage codes (PulseOx, O2 Concentration, Percentiles) should be represented with %</assert>
      <assert test="not((contains((('8287-5 8302-2 8306-3 9843-4')), cda:code/@code))) or cda:value/@unit = 'cm'">Height &amp; Head Circumference should be represented in cm</assert>
      <assert test="not((cda:code/@code = '29463-7')) or cda:value/@unit = 'kg'">Weight should be represented in kg</assert>
      <assert test="not((cda:code/@code = '8310-5')) or cda:value/@unit = 'Cel'">Temperature should be represented in Celcius (Cel)</assert>
      <assert test="not((contains((('8480-6 8462-4 8478-0 96608-5 96609-3')), cda:code/@code))) or cda:value/@unit = 'mm[Hg]'">Blood pressure should be represented in mm[Hg]</assert>
      <assert test="not((contains((('8867-4 9279-1')), cda:code/@code))) or cda:value/@unit = '/min'">Rates should be represented in /min</assert>
      <assert test="not((cda:code/@code = '39156-5')) or cda:value/@unit = 'kg/m2'">BMI should be represented in kg/m2</assert>
      <assert test="not((cda:code/@code = '3140-1')) or cda:value/@unit = 'm2'">BSA should be represented in m2</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-longitudinalCareWoundObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-problemObservation2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'SPRT') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-caregiverCharacteristics.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-culturalandReligiousObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-characteristicsofHomeEnvironment.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-nutritionalStatusObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-resultOrganizer.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-priorityPreference2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-problemConcernAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="SectionTimeRangeObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.201:2016-06-01-->
    <rule id="SectionTimeRangeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SelfCareActivitiesADLandIADL-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.128-->
    <rule id="SelfCareActivitiesADLandIADL-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($ADLResultType, @code)">SHOULD be selected from ValueSet ADLResultType</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($Ability, @code)">SHOULD be selected from ValueSet Ability</assert>
    </rule>
  </pattern>
  <pattern id="SensoryStatus-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.127-->
    <rule id="SensoryStatus-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SensoryStatus-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($SensoryStatusProblemType, @code)">SHOULD be selected from ValueSet SensoryStatusProblemType</assert>
    </rule>
    <rule id="SensoryStatus-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($MentalAndFunctionalStatusResponse, @code)">SHOULD be selected from ValueSet MentalAndFunctionalStatusResponse</assert>
    </rule>
    <rule id="SensoryStatus-warnings-entryRelationship-assessmentScaleObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SerialNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.319:2019-06-21-->
    <rule id="SerialNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ServiceDeliveryLocation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.32-->
    <rule id="ServiceDeliveryLocation-warnings-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-warnings-addr" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="SeverityObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.8:2014-06-09-->
    <rule id="SeverityObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SeverityObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:value">
      <assert test="@nullFlavor or contains($Severity, @code)">SHOULD be selected from ValueSet Severity</assert>
    </rule>
  </pattern>
  <pattern id="SexObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.507:2023-07-01-->
    <rule id="SexObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SexObservation-warnings-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:value/@code">
      <assert test="contains($Sex, .)">SHOULD be selected from ValueSet Sex</assert>
    </rule>
  </pattern>
  <pattern id="SexualOrientationObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.501:2023-05-01-->
    <rule id="SexualOrientationObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SexualOrientationObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatus-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.511:2024-05-01-->
    <rule id="SmokingStatus-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatusMeaningfulUse-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.78:2024-05-01-->
    <rule id="SmokingStatusMeaningfulUse-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-warnings-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:value/@code">
      <assert test="contains($SmokingStatus, .)">SHOULD be selected from ValueSet SmokingStatus</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistoryObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.38:2022-06-01-->
    <rule id="SocialHistoryObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SocialHistoryObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
    <rule id="SocialHistoryObservation-warnings-entryRelationship-supportingObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistoryObservation-warnings-entryRelationship-entryReference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistorySection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.17:2015-08-01-->
    <rule id="SocialHistorySection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-socialHistory.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-pregnancyPregnancy.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-smokingStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-caregiver.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-culteralReligious.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-homeCharacteristics.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenCollectionProcedure-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.415:2018-09-01-->
    <rule id="SpecimenCollectionProcedure-warnings-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-warnings-entryRelationship-specimenRef.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-warnings-entryRelationship-condition.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenConditionObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.421:2018-06-12-->
    <rule id="SpecimenConditionObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SpecimenConditionObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:value">
      <assert test="@nullFlavor or contains($Hl7VSSpecimenCondition, @code)">SHOULD be selected from ValueSet Hl7VSSpecimenCondition</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceAdministeredAct-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.118-->
    <rule id="SubstanceAdministeredAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.90:2014-06-09-->
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-status.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-reaction.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-severity.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-criticality.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="TobaccoUse-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.85:2014-06-09-->
    <rule id="TobaccoUse-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="TransferSummary-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.13:2024-05-01-->
    <rule id="TransferSummary-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:participant[@typeCode = 'IND']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="IND" Indirect (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
      <assert test="cda:participant[@typeCode = 'CALLBCK']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="CALLBCK" call back contact (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="TransferSummary-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="TransferSummary-warnings-documentationOf.serviceEvent.performer-performer1.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PRF')]/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]]">SHOULD contain am Advamce Directives Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]]">SHOULD contain a Functional Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]]">SHOULD contain a Discharge Diagnosis Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]]">SHOULD contain a Procedures Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]]">SHOULD contain a Social History Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]]">SHOULD contain a Mental Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]]">SHOULD contain a Nutrition Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]]">SHOULD contain a History of Present Illness Section</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-dischargeDiagnosis.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-medicalEquip.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-admissionMedications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]]">SHOULD contain Admission Medication</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-admissionDiagnosis.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
  </pattern>
  <pattern id="TreatmentInterventionPreference-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.510:2024-05-01-->
    <rule id="TreatmentInterventionPreference-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="sdtcPrecondition2">SHOULD contain sdtc:Precondition2</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-warnings-sdtcPrecondition2" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/sdtc:precondition2">
      <assert test="sdtc:criterion">SHOULD contain criterion</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-warnings-sdtcPrecondition2.criterion.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/sdtc:precondition2/sdtc:criterion/cda:code">
      <assert test="@nullFlavor or contains($ADConditionsAndPrognosisScenarios, @code)">SHOULD be selected from ValueSet ADConditionsAndPrognosisScenarios</assert>
    </rule>
  </pattern>
  <pattern id="TribalAffiliationObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.506:2023-05-01-->
    <rule id="TribalAffiliationObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="TribalAffiliationObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="UDIOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.311:2019-06-21-->
    <rule id="UDIOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="UDIOrganizer-warnings-component-deviceObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="UDIOrganizer-warnings-component-otherObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeader-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.1:2024-05-01-->
    <rule id="USRealmHeader-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="USRealmHeader-warnings-effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-confidentialityCode.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:confidentialityCode/@code">
      <assert test="contains($HL7BasicConfidentialityKind, .)">SHOULD be selected from ValueSet HL7BasicConfidentialityKind</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="cda:maritalStatusCode">SHOULD contain maritalStatusCode</assert>
      <assert test="cda:languageCommunication">SHOULD contain languageCommunication</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.birthTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHOULD** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.sdtcDeceasedTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:deceasedTime">
      <assert test="@value">SHOULD contain @value</assert>
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHOULD** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.guardian.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.guardian.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.birthplace.place.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place/cda:addr">
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or not(cda:postalCode) or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If country is US, this addr **MAY** contain zero or one [0..1] postalCode, which **SHALL** be selected from ValueSet PostalCode urn:oid:2.16.840.1.113883.3.88.12.80.2 *DYNAMIC* (CONF:4537-5403).</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="cda:proficiencyLevelCode">SHOULD contain proficiencyLevelCode</assert>
      <assert test="cda:preferenceInd">SHOULD contain preferenceInd</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.providerOrganization.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.providerOrganization.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.providerOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="cda:id[@root = '2.16.840.1.113883.4.6']">SHOULD contain an id with root='2.16.840.1.113883.4.6' (NPI)</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.id-npi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:id[(@root = '2.16.840.1.113883.4.6')]">
      <assert test="@extension">SHOULD contain extension</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code/@code">
      <assert test="contains($HealthcareProviderTaxonomy, .)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-informant-provider.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeader-warnings-informant-provider.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-custodian.assignedCustodian.representedCustodianOrganization.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-custodian.assignedCustodian.representedCustodianOrganization.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-custodian.assignedCustodian.representedCustodianOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:signatureCode">
      <assert test="not(@code) or @code != 'X'">CDA Release One represented either an intended ('X') or actual ('S') authenticator. CDA Release Two only represents an actual authenticator, so has deprecated the value of 'X'.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:signatureCode">
      <assert test="not(@code) or @code != 'X'">CDA Release One represented either an intended ('X') or actual ('S') authenticator. CDA Release Two only represents an actual authenticator, so has deprecated the value of 'X'.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:code/@code">
      <assert test="contains($HealthcareProviderTaxonomy, .)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="USRealmHeader-warnings-participant.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.functionCode.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode/@code">
      <assert test="contains($CareTeamMemberFunction, .)">SHOULD be selected from ValueSet CareTeamMemberFunction</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.assignedEntity.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeader-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="USRealmHeader-warnings-componentOf.encompassingEncounter.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:code">
      <assert test="@nullFlavor or contains($ActEncounterCodes, @code)">SHOULD be selected from ValueSet ActEncounterCodes</assert>
    </rule>
    <rule id="USRealmHeader-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeaderforPatientGeneratedDocument-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.29.1:2024-05-01-->
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="cda:maritalStatusCode">SHOULD contain maritalStatusCode</assert>
      <assert test="cda:languageCommunication">SHOULD contain languageCommunication</assert>
      <assert test="cda:languageCommunication">SHOULD contain languageCommunication</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:id">SHOULD contain id</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="cda:proficiencyLevelCode">SHOULD contain proficiencyLevelCode</assert>
      <assert test="cda:preferenceInd">SHOULD contain preferenceInd</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="cda:id[@root = '2.16.840.1.113883.4.6']">SHOULD contain an id with root='2.16.840.1.113883.4.6' (NPI)</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-author.assignedAuthor.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-dataEnterer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informant-non-provider.relatedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity/cda:code">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informant-non-provider.relatedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informationRecipient.intendedRecipient.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:id">
      <assert test="@root">SHOULD contain @root</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-legalAuthenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($HealthcareProviderTaxonomy, @code)">SHOULD be selected from ValueSet HealthcareProviderTaxonomy</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-legalAuthenticator.assignedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-authenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-participant.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-participant.associatedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent.performer.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent.performer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
  </pattern>
  <pattern id="UnstructuredDocument-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.10:2024-05-01-->
    <rule id="UnstructuredDocument-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.27:2014-06-09-->
    <rule id="VitalSignObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not((contains((('2708-6 3150-0 59408-5 8289-1 59575-1 59576-9')), cda:code/@code))) or cda:value/@unit = '%'">Percentage codes (PulseOx, O2 Concentration, Percentiles) should be represented with %</assert>
      <assert test="not((contains((('8287-5 8302-2 8306-3 9843-4')), cda:code/@code))) or cda:value/@unit = 'cm'">Height &amp; Head Circumference should be represented in cm</assert>
      <assert test="not((cda:code/@code = '29463-7')) or cda:value/@unit = 'kg'">Weight should be represented in kg</assert>
      <assert test="not((cda:code/@code = '8310-5')) or cda:value/@unit = 'Cel'">Temperature should be represented in Celcius (Cel)</assert>
      <assert test="not((contains((('8480-6 8462-4 8478-0 96608-5 96609-3')), cda:code/@code))) or cda:value/@unit = 'mm[Hg]'">Blood pressure should be represented in mm[Hg]</assert>
      <assert test="not((contains((('8867-4 9279-1')), cda:code/@code))) or cda:value/@unit = '/min'">Rates should be represented in /min</assert>
      <assert test="not((cda:code/@code = '39156-5')) or cda:value/@unit = 'kg/m2'">BMI should be represented in kg/m2</assert>
      <assert test="not((cda:code/@code = '3140-1')) or cda:value/@unit = 'm2'">BSA should be represented in m2</assert>
    </rule>
    <rule id="VitalSignObservation-warnings-code.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:code/@code">
      <assert test="contains($VitalSignResultType, .)">SHOULD be selected from ValueSet VitalSignResultType</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.26:2015-08-01-->
    <rule id="VitalSignsOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="VitalSignsOrganizer-warnings-component-vitalSignObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not((contains((('2708-6 3150-0 59408-5 8289-1 59575-1 59576-9')), cda:code/@code))) or cda:value/@unit = '%'">Percentage codes (PulseOx, O2 Concentration, Percentiles) should be represented with %</assert>
      <assert test="not((contains((('8287-5 8302-2 8306-3 9843-4')), cda:code/@code))) or cda:value/@unit = 'cm'">Height &amp; Head Circumference should be represented in cm</assert>
      <assert test="not((cda:code/@code = '29463-7')) or cda:value/@unit = 'kg'">Weight should be represented in kg</assert>
      <assert test="not((cda:code/@code = '8310-5')) or cda:value/@unit = 'Cel'">Temperature should be represented in Celcius (Cel)</assert>
      <assert test="not((contains((('8480-6 8462-4 8478-0 96608-5 96609-3')), cda:code/@code))) or cda:value/@unit = 'mm[Hg]'">Blood pressure should be represented in mm[Hg]</assert>
      <assert test="not((contains((('8867-4 9279-1')), cda:code/@code))) or cda:value/@unit = '/min'">Rates should be represented in /min</assert>
      <assert test="not((cda:code/@code = '39156-5')) or cda:value/@unit = 'kg/m2'">BMI should be represented in kg/m2</assert>
      <assert test="not((cda:code/@code = '3140-1')) or cda:value/@unit = 'm2'">BSA should be represented in m2</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.4.1:2015-08-01-->
    <rule id="VitalSignsSection-warnings-entry-vitalsOrg.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="VitalSignsSection-warnings-entry-averageBPOrg.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="WoundCharacteristic-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.134-->
    <rule id="WoundCharacteristic-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="WoundMeasurementObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.133-->
    <rule id="WoundMeasurementObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="USRealmAddress-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.2-->
    <rule id="USRealmAddress-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTime-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.4-->
    <rule id="USRealmDateTime-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTimeInterval-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.3-->
    <rule id="USRealmDateTimeInterval-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmDateTimeInterval-warnings-low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time/cda:low | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmDateTimeInterval-warnings-high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time/cda:high | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
  </pattern>
  <pattern id="UnknownTemplateIds">
    <!--UnknownTemplateIds-->
    <rule id="unknown-template-ids" context="cda:templateId[@root[starts-with(., '2.16.840.1.113883.10.20.22')]]">
      <!--The substring('no-extension'...) logic tells XPath 1.0 to only output the string if extension does not exist. XPath is weird.-->
      <assert test="contains(' .4.131;2015-08-01 .4.146;2015-08-01 .4.141; .2.43;2015-08-01 .4.34;2015-08-01 .4.36;2014-06-09 .4.16;2014-06-09 .2.44;2015-08-01 .4.48;2022-02-14 .4.119; .4.108;2022-02-14 .2.21.1;2022-02-14 .4.31; .2.6.1;2015-08-01 .4.30;2015-08-01 .4.7;2014-06-09 .4.28;2019-06-20 .2.25;2014-06-09 .4.14;2024-05-01 .4.69;2022-06-01 .4.86;2022-06-01 .2.8; .2.9;2014-06-09 .2.10;2014-06-09 .4.41;2022-06-01 .4.512;2024-05-01 .4.504;2023-05-01 .4.38;2022-06-01 .4.503;2023-05-01 .4.200;2024-05-01 .4.301;2019-06-21 .4.509;2024-05-01 .1.15;2024-05-01 .1.1;2024-05-01 .5.8;2023-05-01 .2.61; .2.58;2015-08-01 .4.5;2014-06-09 .4.132;2022-06-01 .2.60; .4.121;2022-06-01 .4.144; .4.500.1;2024-05-01 .4.49;2015-08-01 .4.202;2016-11-01 .4.500.3;2022-06-01 .4.500;2022-06-01 .4.500.2;2019-07-01 .4.122; .2.500;2022-06-01 .4.72; .4.302;2019-06-21 .4.109; .2.13; .2.12; .4.64; .4.303;2019-06-21 .2.37;2015-08-01 .4.4;2024-05-01 .1.4;2024-05-01 .2.1.1;2014-06-09 .2.3.1;2015-08-01 .2.15;2015-08-01 .2.20;2015-08-01 .2.2.1;2015-08-01 .4.52;2015-08-01 .2.5.1;2015-08-01 .4.3;2024-05-01 .2.7.1;2014-06-09 .4.1;2023-05-01 .2.17;2015-08-01 .4.511;2024-05-01 .2.4.1;2015-08-01 .4.26;2015-08-01 .2.14;2014-06-09 .2.23;2014-06-09 .4.50;2014-06-09 .2.56;2015-08-01 .2.57; .4.124; .1.2;2024-05-01 .2.22.1;2015-08-01 .2.18;2015-08-01 .4.60;2024-05-01 .2.64; .4.61;2024-05-01 .4.145; .4.111; .4.502;2022-06-01 .4.79;2015-08-01 .4.304;2022-06-01 .4.505;2023-05-01 .2.24;2015-08-01 .4.33;2015-08-01 .4.35;2016-03-01 .2.11.1;2015-08-01 .1.8;2024-05-01 .2.42; .2.41; .2.16; .4.308;2019-06-21 .4.123; .4.24; .4.32; .4.19;2023-05-01 .4.80;2024-05-01 .4.309;2019-06-21 .4.115;2014-06-09 .4.47; .4.46;2015-08-01 .4.45;2015-08-01 .4.67;2014-06-09 .4.66;2014-06-09 .4.128; .4.127; .4.143; .4.110; .4.74;2024-05-01 .4.138; .4.9;2014-06-09 .4.2;2023-05-01 .4.27;2014-06-09 .4.114;2015-08-01 .4.51;2015-08-01 .4.65;2015-08-01 .4.136;2015-08-01 .4.77; .1.3;2024-05-01 .2.45;2014-06-09 .4.20;2014-06-09 .4.54;2014-06-09 .4.17;2014-06-09 .4.18;2023-05-01 .4.53;2024-05-01 .4.118; .4.25;2014-06-09 .4.305;2019-06-21 .4.130; .4.314;2019-06-21 .4.133; .4.134; .4.76;2024-05-01 .4.315;2019-06-21 .4.318;2019-06-21 .4.316;2019-06-21 .4.135; .2.39; .4.23;2014-06-09 .4.508;2023-05-01 .4.147; .2.38;2014-06-09 .4.75;2015-08-01 .4.317;2019-06-21 .4.37; .2.65;2016-11-01 .4.40;2014-06-09 .4.42;2014-06-09 .4.43;2024-05-01 .1.7;2024-05-01 .2.34;2015-08-01 .2.28;2015-08-01 .2.31; .2.27; .2.35; .2.40; .2.30;2014-06-09 .2.29;2014-06-09 .4.140; .4.129;2024-05-01 .4.120; .2.36;2015-08-01 .4.281;2023-05-01 .4.113; .4.6;2019-06-20 .1.6;2024-05-01 .1.9;2024-05-01 .5.7;2020-05-19 .5.6;2019-10-01 .4.8;2014-06-09 .1.14;2024-05-01 .4.415;2018-09-01 .4.201;2016-06-01 .4.319;2019-06-21 .4.507;2023-07-01 .4.501;2023-05-01 .4.78;2024-05-01 .4.421;2018-06-12 .4.85;2014-06-09 .1.13;2024-05-01 .4.510;2024-05-01 .4.506;2023-05-01 .4.311;2019-06-21 .1.10;2024-05-01 ', concat(' ', substring-after(@root, '2.16.840.1.113883.10.20.22'), ';', @extension, ' '))">
        Unrecognized templateId 
        <value-of select="string(concat(@root, ';', @extension, substring('no-extension', 1 div not(@extension))))"/>
         Please ensure this is the correct templateId.
      </assert>
    </rule>
  </pattern>
  <let name="AdvanceDirectivesCategories" value="'100821-8 42348-3 64298-3 81334-5 84095-9 86533-7 92664-2 93037-0'"/>
  <let name="ActStatus" value="'normal aborted active cancelled completed held new suspended nullified obsolete'"/>
  <let name="AdvanceDirectivesContentType" value="'100821-8 103735009 108259003 225365006 229912004 25156005 271298009 281789004 281800008 363259005 385741000 385763009 386367000 405083000 42348-3 52765003 61420007 64298-3 71388002 75773-2 75775-7 75776-5 75777-3 75778-1 75779-9 75780-7 75781-5 75782-3 75783-1 75784-9 75785-6 75786-4 75787-2 75788-0 75789-8 75790-6 75791-4 75792-2 75793-0 77352-3 78823007 81329-5 81330-3 81331-1 81332-9 81333-7 81334-5 81335-2 81340-2 81343-6 81349-3 81350-1 81353-5 81356-8 81357-6 81358-4 81359-2 81360-0 81361-8 81362-6 81363-4 81364-2 81365-9 81366-7 81376-6 81379-0 84095-9 86533-7 89666000 92664-2 93037-0 95541-9'"/>
  <let name="HealthcareProviderTaxonomy" value="'101200000X 101Y00000X 101YA0400X 101YM0800X 101YP1600X 101YP2500X 101YS0200X 102L00000X 102X00000X 103G00000X 103K00000X 103T00000X 103TA0400X 103TA0700X 103TB0200X 103TC0700X 103TC1900X 103TC2200X 103TE1100X 103TF0000X 103TF0200X 103TH0004X 103TH0100X 103TM1800X 103TP0016X 103TP0814X 103TP2701X 103TR0400X 103TS0200X 104100000X 1041C0700X 1041S0200X 106E00000X 106H00000X 106S00000X 111N00000X 111NI0013X 111NI0900X 111NN0400X 111NN1001X 111NP0017X 111NR0200X 111NR0400X 111NS0005X 111NT0100X 111NX0100X 111NX0800X 122300000X 1223D0001X 1223D0004X 1223E0200X 1223G0001X 1223P0106X 1223P0221X 1223P0300X 1223P0700X 1223S0112X 1223X0008X 1223X0400X 1223X2210X 122400000X 124Q00000X 125J00000X 125K00000X 125Q00000X 126800000X 126900000X 132700000X 133N00000X 133NN1002X 133V00000X 133VN1004X 133VN1005X 133VN1006X 133VN1101X 133VN1201X 133VN1301X 133VN1401X 133VN1501X 136A00000X 146D00000X 146L00000X 146M00000X 146N00000X 152W00000X 152WC0802X 152WL0500X 152WP0200X 152WS0006X 152WV0400X 152WX0102X 156F00000X 156FC0800X 156FC0801X 156FX1100X 156FX1101X 156FX1201X 156FX1202X 156FX1700X 156FX1800X 156FX1900X 163W00000X 163WA0400X 163WA2000X 163WC0200X 163WC0400X 163WC1400X 163WC1500X 163WC1600X 163WC2100X 163WC3500X 163WD0400X 163WD1100X 163WE0003X 163WE0900X 163WF0300X 163WG0000X 163WG0100X 163WG0600X 163WH0200X 163WH0500X 163WH1000X 163WI0500X 163WI0600X 163WL0100X 163WM0102X 163WM0705X 163WM1400X 163WN0002X 163WN0003X 163WN0300X 163WN0800X 163WN1003X 163WP0000X 163WP0200X 163WP0218X 163WP0807X 163WP0808X 163WP0809X 163WP1700X 163WP2201X 163WR0006X 163WR0400X 163WR1000X 163WS0121X 163WS0200X 163WU0100X 163WW0000X 163WW0101X 163WX0002X 163WX0003X 163WX0106X 163WX0200X 163WX0601X 163WX0800X 163WX1100X 163WX1500X 164W00000X 164X00000X 167G00000X 170100000X 170300000X 171000000X 1710I1002X 1710I1003X 171100000X 171400000X 171M00000X 171R00000X 171W00000X 171WH0202X 171WV0202X 172A00000X 172M00000X 172P00000X 172V00000X 173000000X 173C00000X 173F00000X 174200000X 174400000X 1744G0900X 1744P3200X 1744R1102X 1744R1103X 174H00000X 174M00000X 174MM1900X 174N00000X 174V00000X 175F00000X 175L00000X 175M00000X 175T00000X 176B00000X 176P00000X 177F00000X 183500000X 1835C0205X 1835C0206X 1835C0207X 1835E0208X 1835G0303X 1835I0206X 1835N0905X 1835N1003X 1835P0018X 1835P0200X 1835P1200X 1835P1300X 1835P2201X 1835S0206X 1835X0200X 183700000X 193200000X 193400000X 202C00000X 202D00000X 202K00000X 204C00000X 204D00000X 204E00000X 204F00000X 204R00000X 207K00000X 207KA0200X 207KI0005X 207L00000X 207LA0401X 207LC0200X 207LH0002X 207LP2900X 207LP3000X 207N00000X 207ND0101X 207ND0900X 207NI0002X 207NP0225X 207NS0135X 207P00000X 207PE0004X 207PE0005X 207PH0002X 207PP0204X 207PS0010X 207PT0002X 207Q00000X 207QA0000X 207QA0401X 207QA0505X 207QB0002X 207QG0300X 207QH0002X 207QS0010X 207QS1201X 207R00000X 207RA0000X 207RA0001X 207RA0002X 207RA0201X 207RA0401X 207RB0002X 207RC0000X 207RC0001X 207RC0200X 207RE0101X 207RG0100X 207RG0300X 207RH0000X 207RH0002X 207RH0003X 207RH0005X 207RI0001X 207RI0008X 207RI0011X 207RI0200X 207RM1200X 207RN0300X 207RP1001X 207RR0500X 207RS0010X 207RS0012X 207RT0003X 207RX0202X 207SC0300X 207SG0201X 207SG0202X 207SG0203X 207SG0205X 207SG0207X 207SM0001X 207T00000X 207U00000X 207UN0901X 207UN0902X 207UN0903X 207V00000X 207VB0002X 207VC0200X 207VC0300X 207VE0102X 207VF0040X 207VG0400X 207VH0002X 207VM0101X 207VX0000X 207VX0201X 207W00000X 207WX0009X 207WX0107X 207WX0108X 207WX0109X 207WX0110X 207WX0120X 207WX0200X 207X00000X 207XP3100X 207XS0106X 207XS0114X 207XS0117X 207XX0004X 207XX0005X 207XX0801X 207Y00000X 207YP0228X 207YS0012X 207YS0123X 207YX0007X 207YX0602X 207YX0901X 207YX0905X 207ZB0001X 207ZC0006X 207ZC0008X 207ZC0500X 207ZD0900X 207ZF0201X 207ZH0000X 207ZI0100X 207ZM0300X 207ZN0500X 207ZP0007X 207ZP0101X 207ZP0102X 207ZP0104X 207ZP0105X 207ZP0213X 208000000X 2080A0000X 2080B0002X 2080C0008X 2080H0002X 2080I0007X 2080N0001X 2080P0006X 2080P0008X 2080P0201X 2080P0202X 2080P0203X 2080P0204X 2080P0205X 2080P0206X 2080P0207X 2080P0208X 2080P0210X 2080P0214X 2080P0216X 2080S0010X 2080S0012X 2080T0002X 2080T0004X 208100000X 2081H0002X 2081N0008X 2081P0004X 2081P0010X 2081P0301X 2081P2900X 2081S0010X 208200000X 2082S0099X 2082S0105X 2083A0100X 2083A0300X 2083B0002X 2083C0008X 2083P0011X 2083P0500X 2083P0901X 2083S0010X 2083T0002X 2083X0100X 2084A0401X 2084A2900X 2084B0002X 2084B0040X 2084D0003X 2084E0001X 2084F0202X 2084H0002X 2084N0008X 2084N0400X 2084N0402X 2084N0600X 2084P0005X 2084P0015X 2084P0301X 2084P0800X 2084P0802X 2084P0804X 2084P0805X 2084P2900X 2084S0010X 2084S0012X 2084V0102X 2085B0100X 2085D0003X 2085H0002X 2085N0700X 2085N0904X 2085P0229X 2085R0001X 2085R0202X 2085R0203X 2085R0204X 2085R0205X 2085U0001X 208600000X 2086H0002X 2086S0102X 2086S0105X 2086S0120X 2086S0122X 2086S0127X 2086S0129X 2086X0206X 208800000X 2088F0040X 2088P0231X 208C00000X 208D00000X 208G00000X 208M00000X 208U00000X 208VP0000X 208VP0014X 209800000X 211D00000X 213E00000X 213EP0504X 213EP1101X 213ER0200X 213ES0000X 213ES0103X 213ES0131X 221700000X 222Q00000X 222Z00000X 224900000X 224L00000X 224P00000X 224Y00000X 224Z00000X 224ZE0001X 224ZF0002X 224ZL0004X 224ZR0403X 225000000X 225100000X 2251C2600X 2251E1200X 2251E1300X 2251G0304X 2251H1200X 2251H1300X 2251N0400X 2251P0200X 2251S0007X 2251X0800X 225200000X 225400000X 225500000X 2255A2300X 2255R0406X 225600000X 225700000X 225800000X 225A00000X 225B00000X 225C00000X 225CA2400X 225CA2500X 225CX0006X 225X00000X 225XE0001X 225XE1200X 225XF0002X 225XG0600X 225XH1200X 225XH1300X 225XL0004X 225XM0800X 225XN1300X 225XP0019X 225XP0200X 225XR0403X 226000000X 226300000X 227800000X 2278C0205X 2278E0002X 2278E1000X 2278G0305X 2278G1100X 2278H0200X 2278P1004X 2278P1005X 2278P1006X 2278P3800X 2278P3900X 2278P4000X 2278S1500X 227900000X 2279C0205X 2279E0002X 2279E1000X 2279G0305X 2279G1100X 2279H0200X 2279P1004X 2279P1005X 2279P1006X 2279P3800X 2279P3900X 2279P4000X 2279S1500X 229N00000X 231H00000X 231HA2400X 231HA2500X 235500000X 2355A2700X 2355S0801X 235Z00000X 237600000X 237700000X 242T00000X 243U00000X 246Q00000X 246QB0000X 246QC1000X 246QC2700X 246QH0000X 246QH0401X 246QH0600X 246QI0000X 246QL0900X 246QL0901X 246QM0706X 246QM0900X 246R00000X 246RH0600X 246RM2200X 246RP1900X 246W00000X 246X00000X 246XC2901X 246XC2903X 246XS1301X 246Y00000X 246Z00000X 246ZB0500X 246ZC0007X 246ZE0500X 246ZE0600X 246ZG1000X 246ZN0300X 246ZS0410X 246ZX2200X 247000000X 247100000X 2471B0102X 2471C1101X 2471C1106X 2471C3401X 2471C3402X 2471M1202X 2471M2300X 2471N0900X 2471Q0001X 2471R0002X 2471S1302X 2471V0105X 2471V0106X 247200000X 2472E0500X 2472R0900X 247ZC0005X 251300000X 251B00000X 251C00000X 251E00000X 251F00000X 251G00000X 251J00000X 251K00000X 251S00000X 251T00000X 251V00000X 251X00000X 252Y00000X 253J00000X 253Z00000X 261Q00000X 261QA0005X 261QA0006X 261QA0600X 261QA0900X 261QA1903X 261QA3000X 261QB0400X 261QC0050X 261QC1500X 261QC1800X 261QD0000X 261QD1600X 261QE0002X 261QE0700X 261QE0800X 261QF0050X 261QF0400X 261QG0250X 261QH0100X 261QH0700X 261QI0500X 261QL0400X 261QM0801X 261QM0850X 261QM0855X 261QM1000X 261QM1100X 261QM1101X 261QM1102X 261QM1103X 261QM1200X 261QM1300X 261QM2500X 261QM2800X 261QM3000X 261QP0904X 261QP0905X 261QP1100X 261QP2000X 261QP2300X 261QP2400X 261QP3300X 261QR0200X 261QR0206X 261QR0207X 261QR0208X 261QR0400X 261QR0401X 261QR0404X 261QR0405X 261QR0800X 261QR1100X 261QR1300X 261QS0112X 261QS0132X 261QS1000X 261QS1200X 261QU0200X 261QV0200X 261QX0100X 261QX0200X 261QX0203X 273100000X 273R00000X 273Y00000X 275N00000X 276400000X 281P00000X 281PC2000X 282E00000X 282J00000X 282N00000X 282NC0060X 282NC2000X 282NR1301X 282NW0100X 283Q00000X 283X00000X 283XC2000X 284300000X 286500000X 2865M2000X 2865X1600X 291900000X 291U00000X 292200000X 293D00000X 302F00000X 302R00000X 305R00000X 305S00000X 310400000X 3104A0625X 3104A0630X 310500000X 311500000X 311Z00000X 311ZA0620X 313M00000X 314000000X 3140N1450X 315D00000X 315P00000X 320600000X 320700000X 320800000X 320900000X 322D00000X 323P00000X 324500000X 3245S0500X 331L00000X 332000000X 332100000X 332800000X 332900000X 332B00000X 332BC3200X 332BD1200X 332BN1400X 332BP3500X 332BX2000X 332G00000X 332H00000X 332S00000X 332U00000X 333300000X 333600000X 3336C0002X 3336C0003X 3336C0004X 3336H0001X 3336I0012X 3336L0003X 3336M0002X 3336M0003X 3336N0007X 3336S0011X 335E00000X 335G00000X 335U00000X 335V00000X 341600000X 3416A0800X 3416L0300X 3416S0300X 341800000X 3418M1110X 3418M1120X 3418M1130X 342000000X 343800000X 343900000X 344600000X 344800000X 347B00000X 347C00000X 347D00000X 347E00000X 363A00000X 363AM0700X 363AS0400X 363L00000X 363LA2100X 363LA2200X 363LC0200X 363LC1500X 363LF0000X 363LG0600X 363LN0000X 363LN0005X 363LP0200X 363LP0222X 363LP0808X 363LP1700X 363LP2300X 363LS0200X 363LW0102X 363LX0001X 363LX0106X 364S00000X 364SA2100X 364SA2200X 364SC0200X 364SC1501X 364SC2300X 364SE0003X 364SE1400X 364SF0001X 364SG0600X 364SH0200X 364SH1100X 364SI0800X 364SL0600X 364SM0705X 364SN0000X 364SN0800X 364SP0200X 364SP0807X 364SP0808X 364SP0809X 364SP0810X 364SP0811X 364SP0812X 364SP0813X 364SP1700X 364SP2800X 364SR0400X 364SS0200X 364ST0500X 364SW0102X 364SX0106X 364SX0200X 364SX0204X 367500000X 367A00000X 367H00000X 372500000X 372600000X 373H00000X 374700000X 3747A0650X 3747P1801X 374J00000X 374K00000X 374T00000X 374U00000X 376G00000X 376J00000X 376K00000X 385H00000X 385HR2050X 385HR2055X 385HR2060X 385HR2065X 390200000X 405300000X'"/>
  <let name="UspsTwoLetterAlphabeticCodes" value="'AL AK AS AZ AR CA CO CT DE DC FM FL GA GU HI ID IL IN IA KS KY LA ME MH MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND MP OH OK OR PW PA PR RI SC SD TN TX UT VT VI VA WA WV WI WY AE AP AA'"/>
  <let name="HealthcareAgentOrProxyChoices" value="'75783-1 75784-9 75785-6 81335-2 81343-6'"/>
  <let name="PersonalAndLegalRelationshipRoleType" value="'ADOPTF ADOPTM ADOPTP AUNT BRO BROINLAW CHILD CHLDADOPT CHLDFOST CHLDINLAW COUSN DAU DAUADOPT DAUC DAUFOST DAUINLAW DOMPART DPOWATT EXCEST EXT FAMMEMB FMRSPS FRND FTH FTHFOST FTHINLAW FTWIN FTWINBRO FTWINSIS GESTM GGRFTH GGRMTH GGRPRN GRFTH GRMTH GRNDCHILD GRNDDAU GRNDSON GRPRN GUADLTM GUARD HBRO HPOWATT HSIB HSIS HUSB INLAW ITWIN ITWINBRO ITWINSIS MAUNT MCOUSN MGGRFTH MGGRMTH MGGRPRN MGRFTH MGRMTH MGRPRN MTH MTHFOST MTHINLAW MUNCLE NBOR NBRO NCHILD NEPHEW NFTH NFTHF NIECE NIENEPH NMTH NMTHF NPRN NSIB NSIS ONESELF PAUNT PCOUSN PGGRFTH PGGRMTH PGGRPRN PGRFTH PGRMTH PGRPRN POWATT PRN PRNFOST PRNINLAW PUNCLE ROOM SIB SIBINLAW SIGOTHR SIS SISINLAW SON SONADOPT SONC SONFOST SONINLAW SPOWATT SPS STPBRO STPCHLD STPDAU STPFTH STPMTH STPPRN STPSIB STPSIS STPSON TWIN TWINBRO TWINSIS UNCLE WIFE'"/>
  <let name="AgePQ_UCUM" value="'a d h min mo wk'"/>
  <let name="ProblemActStatusCode" value="'aborted active completed suspended'"/>
  <let name="CommonSubstancesForAllergyAndIntoleranceDocumentationIncludingRefutations" value="'1002293 1003774007 1007388 1008298 1008519 1009148 10109 10154 10156 10169 10171 10180 10207 10223 102259006 102261002 102262009 102263004 102264005 10237 10324 10355 10368 1037042 10379 10395 103990 1040028 10438 10472 10493 10502 10510 10582 105908007 10594 10600 10627 10636 10689 10737 10759 107602 10763 10767 10800 108118 10829 10831 108417002 108661002 108665006 108787006 108807002 111088007 11124 1114195 1116632 11170 11248 11253 11256 11289 113588 11416 11423 114477 114970 114979 1151 11526002 115264 115552 11563006 115698 116085009 116274004 116596006 1181000221105 1191 119565 1202 121191 1223 123954005 1256 126175007 1272 1291 1292 129473008 1310171 1311085 1311524 1311629 1314891 1331 134615 1347 135447 13577000 135775 1359 1362879 1363043 136411 1364430 138099 139462 1399 140587 1406 141626 1418 1424 1514 153970 1596450 15996 16047007 161 1631000175102 16403005 16681 167 17128 1727875 17300 17767 1801000221105 1827 183379 1841 18631 187832 1886 18867 1895 1897 18993 190376 191831 19478 19552 19711 19831 1998 2002 20352 20481 20489 20610 2101 21107 21183 21212 214130 214153 214160 214181 214182 214183 214199 214223 214250 214256 214257 214317 214336 214354 214364 214392 214442 214445 214488 214502 214555 214558 214565 214599 214614 214617 214618 214619 214626 214627 214631 214682 214721 214807 2176 217627 2177 2180 2189 2191 2193 219314 219315 2194 21949 221147 22299 2231 226716 226723006 226734009 226915003 226916002 226934003 226955001 226967004 227144008 227151004 227208008 227219006 227313005 227388008 227400003 227421003 227444000 227493005 227512001 227598003 228102000 228476 228790 232158 233698 2348 2356 2358 236778 237159 2393 2400 2403 2409 2410 2418 2447 24605 24947 25025 25033 25037 25120 25255 253157 2541 25480 2551 2556 255641001 256259004 256277009 256306003 256307007 256313003 256315005 256317002 256319004 256326004 256329006 256350002 256351003 256352005 256353000 256354006 256417003 256440004 25789 2582 258337 2596005 2598 2599 260101 260152009 260154005 260167008 260176001 260177005 260179008 260184002 260189007 260205009 26225 2623 264287008 264337003 2670 2683 2685 27169 274783 274786 27723 278567 28031 281 28230009 282831004 283742 283809 28439 284635 2878 288328004 28889 28942008 28981 29046 29263009 29542 29561 296 3008 301542 306674 3108 3143 31448 31555 31565 31738 318340 320073005 321064 321988 322167 3247 325642 32592 32613 32624 3264 32675 327361 3289 32937 32968 33008008 33219003 3322 33252009 332955008 33408 3355 3356 3361 33738 3393 34012005 3407 341248 3418 3423 3443 3444 346636007 3498 349854005 350134005 350157004 350196005 350222007 350294001 350312004 35208 3521 352362 35296 35382 35636 35748005 358263 35827 35829 360204007 36108 36117 3616 363560004 3638 3640 36437 3648 36567 3692009 37084008 372783007 373531009 37418 37617 37798 37801 3827 3829 38400 38404 38413 38574 386127005 38685 389132 391737006 391739009 39487003 3966 39786 3992 39993 39998 400266000 40048 400674 4025 40254 4053 40575 40790 407935004 4083 409137002 4099 41126 41127 411600004 412061001 412062008 412068007 412071004 412357001 4124 412533000 412534006 412583005 41397 41493 41549009 416636000 416897008 417889008 418504009 418920007 419420009 422292008 42330 42331 42347 42351 42372 424369009 42463 426722004 4278 428607008 429625007 4316 4337 435 43611 43735007 43921001 44027008 441508005 4419 442381000124103 442571000124108 442771000124102 4441 4450 44588005 446273004 446274005 448 4492 4493 4496 4500 4530 45518007 4603 46041 461016 4637 465397 466522 466541 466549 466553 466566 466584 4719 475968 47703008 4815 48203 4821 484139 484211 4850 48698004 4917 49276 50166 5021 5032 5093 51272 51386004 519 51905005 52175 5224 52582 53041004 5470 5487 5489 5492 5499 5521 5553 5640 5691 56946 57258 5764 5781 588250 59078 591622 5933 593411 594040 5956 596 596723 597142 5992 60207 6038 60548 6057 6058 60978003 611854 6130 6135 61381 6142 61789006 6185 61946003 620 6218 6227 62294009 63045006 63094006 6369005 6387 6398 6425004 6448 645555 6468 6470 6472 6574 6585 662263 6676 6691 67108 6711 6719 67324005 6750 6754 6809 6813 6835 6845 6851 6876 689 689467 689518 689556 689558 689561 689582 689606 689623 690077 6901 6902 690693 690808 69120 6915 6916 6918 6922 692794 6932 6960 69749 6980 6984 703 703677008 704 7052 705258 70813002 710179004 713382001 713764001 716186003 720687003 7213 72143 72236 723 72302 7233 7238 7243 725 72511004 7258 72625 726730005 7299 73056 733 734881000 73494 735006003 735009005 735029006 735030001 735043001 735045008 735047000 735049002 735050002 735051003 735053000 735123009 735124003 735211005 735212003 735213008 735214002 735215001 735248001 735249009 735340006 735959004 735971005 735977009 736027000 736030007 736031006 736159005 736162008 73645 7393 7407 74169 7417 74226000 7454 74632002 746741 74801000 7486 7517 7531 75665004 7597 7623 762952008 763875007 764299009 764357006 7646 765419002 767151005 767365002 7676 768431001 768435005 768449001 768451002 768457003 768592009 768600002 768614002 768618004 768621002 768688006 768697005 768699008 768759001 768763008 768766000 768865007 770377009 770387008 771344003 7715 77492 7791007 7804 7821 787390 788032009 788541006 789250004 79440004 7975 797541 7980 7984 7994 8001 80259003 8120 8134 815166 8163 816346 8175 817579 817958 8183 82122 822929 830118008 83367 8356 836398006 83818 84108 84489001 8536 857974 8588 8591 860818003 8610 8611 861634 8629 8638 8640 8687 8691 8698 8700 8701 8703 8704 871727001 871742003 871758000 871826000 871839001 871875004 871919004 87233003 8727 8745 8754 87636 8782 8785 8787 8794 88014 88249 883815 8896 89013 89119000 8928 8948 895560003 89707004 89811004 90176 90614001 9068 9071 91263 9143 9384 9524 9601 961000221100 96281001 96302009 96308008 9778 9793 981000221107 9947 9997'"/>
  <let name="AllergyClinicalStatus" value="'413322009 55561003 73425007'"/>
  <let name="CDAObservationInterpretation" value="'B D U W &lt; &gt; A AA HH LL H L N I MS R S VS'"/>
  <let name="SocialHistoryType" value="'102487004 105421008 160476009 228272008 229819007 256235009 302160007 363908000 364393001 364703007 423514004 424483007 425400000 442133001 446996006 897148007'"/>
  <let name="BirthSex" value="'ASKU F M OTH UNK asked-declined'"/>
  <let name="CarePlanDocumentType" value="'18776-5 64295-9 74156-1 77442-2 77443-0 77444-8 77445-5 77446-3 80739-6 80740-4 80741-2 80742-0 80743-8 80744-6 80745-3 80746-1 80747-9 80748-7 80749-5 80750-3 80751-1 80752-9 80753-7 80754-5 80755-2 80756-0 80757-8 80758-6 80759-4 80760-2 80761-0 80762-8 80763-6 80764-4 80765-1 80766-9 80767-7 80768-5 80769-3 80770-1 80771-9 80772-7 80773-5 80774-3 80775-0 80776-8 80777-6 80778-4 80779-2 80780-0 80781-8 80782-6 80783-4 80784-2 80785-9 80786-7 80787-5 80788-3 80789-1 80790-9 80791-7 80796-6 80797-4 80804-8 80818-8 81200-8 81957-3 82364-1 83635-3 83734-4 83895-3 84011-6 84034-8 84070-2 84094-2 84117-1 84124-7 84135-3 84136-1 84151-0 84164-3 84165-0 84172-6 84183-3 84185-8 84187-4 84197-3 84203-9 84210-4 84217-9 84244-3 84295-5 84306-0 84314-4 84337-5 85182-4 85186-5 85228-5 85254-1 87237-4 87253-1 87265-5 87629-2 89239-8 89240-6 90769-1 93023-0 93024-8 93902-5 94244-1 94318-3 95752-2 95759-7'"/>
  <let name="INDRoleclassCodes" value="'AGNT CAREGIVER ECON GUAR NOK PRS'"/>
  <let name="X_ActRelationshipDocument" value="'APND RPLC XFRM'"/>
  <let name="ActStatus_1" value="'aborted active cancelled completed held new normal nullified obsolete suspended'"/>
  <let name="CareTeamMemberFunction" value="'106289002 106292003 106293008 106294002 106296000 106310008 106311007 106330007 11015003 116154003 11661002 1172950003 1186716007 1186914001 11911009 119246008 11935004 1251537007 1251542004 1251548000 1254982001 1254983006 1254984000 1255370008 1255371007 1255372000 1255373005 1255374004 1255514008 1255515009 1255517001 1255518006 1255519003 1255719001 1256114007 1259214004 1259964002 1268923002 1271000175101 1276561000168102 1276571000168108 133932002 13580004 1421009 14613005 14698002 158939004 158942005 158943000 158965000 158966004 158967008 158968003 158969006 158971006 158972004 158973009 158974003 158975002 158977005 158978000 158979008 158980006 158983008 158984002 158985001 158986000 158987009 158988004 158989007 158990003 158992006 158993001 158994007 158995008 158996009 158997000 158998005 158999002 159001001 159002008 159003003 159004009 159005005 159006006 159007002 159010009 159011008 159012001 159014000 159016003 159017007 159018002 159019005 159021000 159022007 159025009 159026005 159027001 159028006 159033005 159034004 159035003 159036002 159037006 159038001 159039009 159040006 159041005 159141008 159148002 159174008 159972006 160008000 17561000 184152007 184154008 18803008 18850004 19244007 20145008 21365001 21450003 224529009 224530004 224531000 224532007 224533002 224534008 224535009 224536005 224537001 224538006 224540001 224541002 224542009 224543004 224544005 224545006 224546007 224547003 224548008 224549000 224550000 224551001 224552008 224554009 224555005 224556006 224557002 224558007 224559004 224560009 224562001 224563006 224564000 224565004 224566003 224567007 224569005 224570006 224571005 224572003 224573008 224574002 224575001 224576000 224577009 224578004 224579007 224580005 224581009 224583007 224584001 224585000 224586004 224587008 224588003 224589006 224590002 224591003 224592005 224593000 224594006 224595007 224596008 224597004 224598009 224599001 224600003 224601004 224602006 224603001 224604007 224606009 224607000 224608005 224609002 224610007 224614003 224615002 224620002 224621003 224622005 224623000 224624006 224625007 224626008 224936003 22515006 225725005 225726006 225727002 22731001 229774002 22983004 23278007 24430003 24590004 25941000087102 25961008 26031000087100 26042002 26071000087103 26091000087104 26369006 265937000 265939002 28229004 283875005 28411006 28544002 302211009 303124005 303129000 303133007 303134001 304291006 304292004 307988006 308002005 309294001 309295000 309296004 309322005 309323000 309324006 309326008 309327004 309328009 309329001 309330006 309331005 309332003 309333008 309334002 309335001 309336000 309337009 309338004 309339007 309340009 309341008 309342001 309343006 309345004 309346003 309347007 309348002 309349005 309350005 309351009 309352002 309353007 309354001 309355000 309356004 309357008 309358003 309359006 309360001 309361002 309362009 309363004 309364005 309366007 309367003 309368008 309369000 309371000 309372007 309373002 309374008 309375009 309376005 309377001 309378006 309379003 309380000 309381001 309382008 309383003 309384009 309385005 309386006 309388007 309389004 309390008 309391007 309392000 309393005 309394004 309395003 309396002 309397006 309398001 309399009 309400002 309401003 309402005 309403000 309404006 309409001 309410006 309411005 309412003 309413008 309414002 309415001 309416000 309417009 309418004 309419007 309420001 309421002 309422009 309423004 309427003 309428008 309429000 309434001 309435000 309436004 309437008 309439006 309440008 309441007 309442000 309443005 309444004 309445003 309446002 309450009 309452001 309453006 309454000 309455004 309457007 309459005 309460000 310170009 310171008 310172001 310173006 310174000 310175004 310176003 310177007 310178002 310179005 310180008 310181007 310182000 310184004 310185003 310186002 310187006 310188001 310189009 310190000 310191001 310192008 310193003 310194009 310512001 311441001 312485001 3430008 36682004 37154003 372102007 373864002 37504001 3842006 387619007 394572006 394618009 39677007 397897005 397903001 397908005 3981000175106 398130009 398238009 40127002 40204001 404940000 405277009 405278004 405279007 405623001 405684005 405685006 40570005 407542009 407543004 408290003 408798009 408799001 409974004 409975003 413854007 415075003 415506007 416034003 416035002 416160000 4162009 41672002 416800000 41904004 420158005 420409002 420678001 421841007 422140007 422234006 428024001 429577009 43018001 432100008 43702002 440051000124108 442251000124100 442867008 443090005 444912007 445313000 445451001 445521000124102 445531000124104 446050000 44652006 446701002 449161006 450044741000087104 453061000124100 453071000124107 453081000124105 453091000124108 453101000124102 453111000124104 453121000124107 453231000124104 45440000 45544007 457141000124107 457151000124109 45956004 46255001 471302004 48639005 48740002 49203003 49993003 50149000 5191000124109 5275007 53564008 54503009 56397003 56466003 56542007 56545009 57654006 59058001 59169001 59317003 59944000 60008001 611581000124105 611601000124100 611611000124102 611621000124105 611701000124107 61207006 61246008 61345009 61894003 62247001 63098009 64220005 651501000124106 65803006 66476003 66862007 671101000124102 67811000052107 6816002 68191000052106 6868009 68867008 68950000 69280009 71838004 720503005 721936008 721937004 721938009 721939001 721940004 721941000 721942007 721943002 73265009 734293001 734294007 75271001 76166008 76231001 763292005 768730001 768731002 768732009 768733004 768734005 768815003 768816002 768817006 768818001 768819009 768820003 768821004 768822006 768825008 768826009 768827000 768828005 768829002 768832004 768833009 768834003 768836001 768837005 768839008 76899008 769038007 78703002 78729002 789543004 79898004 79918004 80409005 80546007 80584001 80933006 81464008 82296001 83273008 83685006 840583002 840584008 85733003 8724009 878785002 878786001 878787005 88189002 897187007 90201008 90655003 9371000175105 ADMPHYS ANEST ANRS ASSEMBLER ATTPHYS AUCG AUCOV AUEMROV AULR AUTM AUWA CLMADJ COMPOSER DISPHYS ENROLL FASST FFSMGT FULINRD GRDCON MCMGT MDWF NASST PAYORCNTR PCP POACON PRCON PRISURG PROMSK PROVMGT REINS RETROCES REVIEWER RNDPHYS SASST SELFINRD SNRS SUBCON SUBCTRT TASST UMGT UNDERWRTNG _AuthorizedParticipationFunction _AuthorizedReceiverParticipationFunction _ConsenterParticipationFunction _CoverageParticipationFunction _OverriderParticipationFunction _PayorParticipationFunction _SponsorParticipationFunction _UnderwriterParticipationFunction'"/>
  <let name="CareTeamCategory" value="'LA27975-4 LA27976-2 LA27977-0 LA27978-8 LA27980-4 LA28865-6 LA28866-4 LA28867-2'"/>
  <let name="ResidenceAndAccommodationType" value="'105526001 105527005 105529008 105530003 105531004 105532006 105535008 105536009 105537000 113165003 1156191002 1156192009 1156193004 1156194005 1156195006 1156196007 1162585007 11762561000119103 1187272007 1197631001 1197632008 1197634009 1197636006 1197637002 1197640002 1197641003 1197643000 1197645007 1197646008 1197647004 1204359001 1204360006 1204361005 1204362003 1237572006 1256010001 1268657007 1268659005 1268689003 1268777006 14251000175108 160700001 160706007 160708008 160712002 160715000 160716004 160717008 160718003 160720000 160721001 160724009 160725005 160726006 160727002 160729004 160732001 160734000 160736003 160737007 160738002 160744003 160745002 160746001 160750008 160751007 160752000 160753005 160754004 160757006 160936008 160937004 160938009 160939001 160940004 160943002 16094681000119103 161036002 161056001 185955000 185956004 185957008 185960001 185961002 224131009 224132002 224133007 224134001 224135000 224136004 224137008 224139006 224140008 224141007 224142000 224143005 224144004 224145003 224146002 224147006 224148001 224149009 224211003 224212005 224213000 224214006 224215007 224216008 224217004 224218009 224219001 224220007 224221006 224222004 224223009 224224003 224225002 224226001 224228000 224229008 224231004 224232006 224233001 224234007 224236009 224237000 224239002 224241001 224243003 224244009 224246006 224247002 224248007 224250004 224251000 224252007 224253002 224254008 224255009 224256005 224257001 224258006 224259003 224260008 224262000 224264004 224266002 224267006 224269009 224270005 224271009 224273007 224274001 224276004 224277008 26533002 266935003 266936002 266939009 266940006 270469004 271364002 275643002 276051005 276055001 29461000119100 302145009 307104007 307106009 308899009 309681005 309683008 310869005 31879006 32911000 360875003 360885002 365509003 365510008 365511007 365512000 365513005 365514004 365515003 365516002 365517006 365519009 365520003 365521004 365522006 394923006 397756006 398081001 406132007 408820001 408821002 412769006 413287003 413304006 413305007 414418009 422491004 422712008 422883004 423098009 423155007 423527000 423798004 423824003 423859003 423961006 424160003 424415008 424465004 424661000 424771006 424948003 425017003 425203001 425205008 425326006 429063000 430793000 438507006 443218005 443314009 447051007 447555007 471981000124106 471991000124109 472001000124106 4891000175102 5421000175100 5431000175102 5491000175103 5501000175107 5549007 5794003 591091000124105 60585007 609239004 609240002 609241003 609242005 609243000 609244006 609245007 611131000124100 611141000124105 611171000124102 611181000124104 611211000124100 611221000124108 611231000124106 611241000124101 611251000124104 611261000124102 611531000124109 611541000124104 611551000124102 62709005 651021000124108 65421000 67972000 700209003 70147002 702533004 71092004 71099008 714085000 715758005 715995001 78153003 82876001 870626008'"/>
  <let name="ConsultDocumentType" value="'11488-4 34099-2 34100-8 34101-6 34102-4 34103-2 34104-0 34749-2 34756-7 34758-3 34760-9 34761-7 34764-1 34776-5 34777-3 34779-9 34781-5 34783-1 34785-6 34788-0 34791-4 34795-5 34797-1 34798-9 34800-3 34803-7 34805-2 34807-8 34810-2 34812-8 34814-4 34816-9 34820-1 34822-7 34824-3 34826-8 34828-4 34831-8 34833-4 34837-5 34839-1 34841-7 34845-8 34847-4 34849-0 34851-6 34853-2 34855-7 34879-7 51845-6 51846-4 51854-8 64056-5 64068-0 64072-2 64076-3 64080-5 68469-6 68486-0 68551-1 68566-9 68570-1 68575-0 68586-7 68590-9 68597-4 68619-6 68633-7 68639-4 68648-5 68651-9 68661-8 68670-9 68681-6 68685-7 68694-9 68705-3 68716-0 68727-7 68746-7 68757-4 68765-7 68787-1 68802-8 68812-7 68821-8 68837-4 68846-5 68852-3 68864-8 68869-7 68874-7 68879-6 68892-9 68897-8 72555-6 73575-3 75424-2 75465-5 77403-4 77429-9 78250-8 78251-6 78252-4 78253-2 78254-0 78405-8 78406-6 78496-7 78498-3 78567-5 78568-3 78726-7 78732-5 78738-2 79428-9 80396-5 80575-4 80664-6 80666-1 80673-7 80736-2 80801-4 81191-9 81192-7 81193-5 81196-8 82356-7 82359-1 83570-2 83578-5 83609-8 83621-3 83653-6 83685-8 83720-3 83722-9 83868-0 83873-0 83888-8 83909-2 83912-6 83926-6 83931-6 83941-5 83960-5 83967-0 83984-5 83992-8 83996-9 84035-5 84071-0 84115-5 84126-2 84131-2 84142-9 84145-2 84152-8 84173-4 84190-8 84213-8 84231-0 84241-9 84280-7 84292-2 84303-7 84312-8 84324-3 84349-0 84352-4 84358-1 84394-6 84398-7 85174-1 85208-7 85222-8 85232-7 85237-6 85238-4 85517-1 85519-7 85866-2 85871-2 85882-9 85884-5 85886-0 85890-2 85899-3 86451-2 87233-3 87254-9 87627-6 88351-2 88640-8 88644-0 89031-9 89032-7 89033-5 89216-6 89227-3 89446-9 89447-7 89551-6 90006-8 90012-6 90343-5 90354-2 90709-7 90710-5 90712-1 90714-7 90715-4 90717-0 90771-7 91986-0 92910-9 92912-5 92915-8 93024-8 93413-3 93955-3 94319-1 94461-1 94462-9 94463-7 94528-7 94806-7 94807-5 94808-3 94814-1 95132-7 95761-3 95806-6 96737-2'"/>
  <let name="CriticalityObservation" value="'CRITH CRITL CRITU'"/>
  <let name="DischargeSummaryDocumentTypeCode" value="'11490-0 18842-5 28655-9 29761-4 34105-7 34106-5 34745-0 59258-4 59259-2 68558-6 68572-7 68578-4 68591-7 68612-1 68626-1 68642-8 68653-5 68663-4 68674-1 68688-1 68697-2 68709-5 68719-4 68733-5 68738-4 68749-1 68768-1 68773-1 68779-8 68795-4 68805-1 68815-0 68823-4 68831-7 68841-6 68856-4 77409-1 77417-4 78263-1 78264-9 78418-1 78419-9 78420-7 78421-5 78585-7 80811-3 83523-1 83551-2 83712-0 83810-2 83898-7 83921-7 83932-4 83956-3 83961-3 83968-8 83993-6 84013-2 84017-3 84018-1 84024-9 84040-5 84132-0 84139-5 84179-1 84248-4 84254-2 84257-5 84262-5 84278-1 84310-2 84321-9 84328-4 84331-8 84367-2 84393-8 85154-3 85176-6 85192-3 85200-4 85223-6 85240-0 85243-4 85433-1 85434-9 85440-6 85442-2 85514-8 85520-5 85849-8 85875-3 85878-7 87235-8 87256-4 88641-6 88645-7 88693-7 89214-1 89218-2 93903-3 94464-5 94465-2 94515-4 94516-2 94517-0 94519-6 94520-4 94521-2 94522-0 94523-8 94524-6 94525-3 94526-1 94527-9 94529-5 94530-3 95133-5 96378-5 97663-9 97690-2 97700-9 97701-7 97702-5 97703-3 97704-1 97714-0 97719-9 97725-6 99483-0 99488-9 99489-7 99490-5'"/>
  <let name="CDARoleClassAssociative" value="'LIC NOT PROV CON ECON NOK ASSIGNED COMPAR SGNOFF AGNT GUARD EMP MIL INVSBJ RESBJ CIT COVPTY CRINV CRSPNSR GUAR PAT PAYEE PAYOR POLHOLD QUAL SPNSR STD UNDWRT CAREGIVER PRS DST RET MANU THER SDLOC DSDLOC ISDLOC ACCESS BIRTHPL EXPR HLD HLTHCHRT IDENT MNT OWN RGPR TERR WRTE'"/>
  <let name="EncounterTypeCode" value="'1013649 1013652 1013757 1013760 1013766 1013771 1013796 1020434 1036687 98966 98967 98968 99091 99202 99203 99204 99205 99211 99212 99213 99214 99215 99221 99222 99223 99231 99232 99233 99234 99235 99236 99238 99239 99242 99243 99244 99245 99252 99253 99254 99255 99281 99282 99283 99284 99285 99288 99291 99292 99304 99305 99306 99307 99308 99309 99310 99315 99316 99341 99342 99344 99345 99347 99348 99349 99350 99358 99359 99360 99366 99367 99368 99374 99375 99377 99378 99379 99380 99381 99382 99383 99384 99385 99386 99387 99391 99392 99393 99394 99395 99396 99397 99401 99402 99403 99404 99406 99407 99408 99409 99411 99412 99415 99416 99417 99418 99421 99422 99423 99424 99425 99426 99427 99429 99437 99439 99441 99442 99443 99446 99447 99448 99449 99450 99451 99452 99453 99454 99455 99456 99457 99458 99459 99460 99461 99462 99463 99464 99465 99466 99467 99468 99469 99471 99472 99473 99474 99475 99476 99477 99478 99479 99480 99483 99484 99485 99486 99487 99489 99490 99491 99492 99493 99494 99495 99496 99497 99498 99499 99500 99501 99502 99503 99504 99505 99506 99507 99509 99510 99511 99512 99600 99601 99602 99605 99606 99607'"/>
  <let name="ProblemType" value="'248536006 282291009 29308-4 373930000 404684003 418799008 55607006 64572001 75275-8 75312-9 75313-7 75314-5 75315-2 75316-0 75317-8 75318-6 75319-4 75321-0 75322-8 75323-6 75325-1 75326-9'"/>
  <let name="FamilyMemberValue" value="'AUNT BRO BROINLAW CHILD CHLDADOPT CHLDFOST CHLDINLAW COUSN DAU DAUADOPT DAUFOST DAUINLAW DOMPART FAMMEMB FTH FTHINLAW GGRFTH GGRMTH GGRPRN GRFTH GRMTH GRNDCHILD GRNDDAU GRNDSON GRPRN HBRO HSIB HSIS HUSB MAUNT MCOUSN MGGRFTH MGGRMTH MGGRPRN MGRFTH MGRMTH MGRPRN MTH MTHINLAW MUNCLE NBRO NCHILD NEPHEW NFTH NIECE NIENEPH NMTH NPRN NSIB NSIS PAUNT PCOUSN PGGRFTH PGGRMTH PGGRPRN PGRFTH PGRMTH PGRPRN PRN PRNINLAW PUNCLE ROOM SIB SIBINLAW SIGOTHR SIS SISINLAW SON SONADOPT SONFOST SONINLAW SPS STPBRO STPCHLD STPDAU STPFTH STPMTH STPPRN STPSIB STPSIS STPSON UNCLE WIFE'"/>
  <let name="AdministrativeGenderHL7V3" value="'F M UN'"/>
  <let name="GenderIdentity" value="'33791000087105 407376001 407377005 446131000124102 446141000124107 446151000124109 OTH UNK asked-declined'"/>
  <let name="HealthStatus" value="'135815002 135818000 161045001 162467007 21134002 271593001 27624003 419099009 765205004 81323004'"/>
  <let name="HPDocumentType" value="'11492-6 28626-0 34094-3 34095-0 34096-8 34115-6 34116-4 34117-2 34138-8 34763-3 34774-0 47039-3 51849-8 57056-4 67856-5 68560-2 68573-5 68580-0 68592-5 68599-0 68614-7 68622-0 68628-7 68637-8 68644-4 68655-0 68665-9 68676-6 68683-2 68690-7 68699-8 68711-1 68721-0 68731-9 68735-0 68740-0 68751-7 68760-8 68770-7 68775-6 68781-4 68791-3 68797-0 68807-7 68817-6 68825-9 68833-3 68843-2 68849-9 68858-0 77401-8 77412-5 77415-8 77420-8 78246-6 78247-4 78248-2 78249-0 78306-8 78307-6 78308-4 78386-0 78387-8 78388-6 78389-4 78390-2 78391-0 78392-8 78463-7 78464-5 78465-2 78497-5 78507-1 78508-9 78509-7 78510-5 78511-3 78538-6 78643-4 78713-5 78718-4 78724-2 78727-5 78731-7 78733-3 80574-7 80733-9 80799-0 80809-7 80813-9 83552-0 83715-3 83786-4 83812-8 83819-3 83830-0 83858-1 83886-2 83901-9 83959-7 83995-1 84019-9 84041-3 84048-8 84077-7 84097-5 84104-9 84366-4 85179-0 85196-4 85201-2 85203-8 85245-9 85850-6 85860-5 85867-0 87259-8 88353-8 89213-3 89215-8 89221-6 89443-6 96379-3 97659-7 97666-2 97672-0 97673-8 97674-6 97675-3 97676-1 97677-9 97678-7 97679-5 97680-3 97681-1 97682-9 97683-7 97684-5 97685-2 97686-0 97715-7 97720-7 97723-1 97726-4 97728-0 97729-8 97730-6 99480-6 99481-4 99482-2 99485-5 99486-3 99487-1'"/>
  <let name="MoodCodeEvnInt" value="'EVN INT'"/>
  <let name="SPLDrugRouteOfAdministrationTerminology" value="'C132737 C28161 C38192 C38193 C38194 C38197 C38198 C38200 C38203 C38205 C38206 C38207 C38208 C38209 C38210 C38211 C38212 C38215 C38216 C38217 C38218 C38219 C38220 C38221 C38222 C38223 C38224 C38225 C38226 C38227 C38228 C38229 C38230 C38231 C38232 C38233 C38234 C38235 C38236 C38238 C38239 C38240 C38241 C38242 C38243 C38245 C38246 C38247 C38248 C38249 C38250 C38251 C38252 C38253 C38254 C38255 C38256 C38257 C38258 C38259 C38260 C38261 C38262 C38263 C38264 C38265 C38266 C38267 C38268 C38269 C38270 C38271 C38272 C38273 C38274 C38276 C38277 C38278 C38279 C38280 C38281 C38282 C38283 C38284 C38285 C38286 C38287 C38288 C38289 C38290 C38291 C38292 C38293 C38294 C38295 C38296 C38297 C38298 C38299 C38300 C38301 C38304 C38305 C38307 C38308 C38309 C38310 C38311 C38312 C38313 C38633 C38675 C38676 C38677 C48623 C65103 C79137 C79138 C79139 C79141 C79142 C79143 C79144 C79145'"/>
  <let name="MedicationRoute" value="'10547007 1078280005 12130007 1254769004 1259221004 127490009 127491008 127492001 1611000175109 16857009 26643006 34206005 37161004 372449004 372450004 372451000 372452007 372453002 372454008 372457001 372458006 372459003 372460008 372461007 372462000 372463005 372464004 372465003 372466002 372467006 372468001 372469009 372470005 372471009 372472002 372473007 372474001 372475000 372476004 37737002 37839007 38239002 404815008 404818005 404819002 404820008 416174007 417070009 417255000 417950001 417985001 417989007 418091004 418114005 418133000 418136008 418162004 418204005 418287000 418321004 418331006 418401004 418418000 418441008 418511008 418586008 418608002 418664002 418722009 418730005 418743005 418813001 418821007 418851001 418877009 418887008 418892005 418947002 418987007 419021003 419165009 419231003 419243002 419320008 419396008 419601003 419631009 419684008 419762003 419778001 419810008 419874009 419894000 419954003 419993007 420047004 420163009 420168000 420185003 420201002 420204005 420218003 420254004 420287000 420719007 428191002 429817007 432671000124106 445752009 445754005 445755006 445756007 445767008 445768003 445771006 445913005 445941009 446105004 446407004 446435000 446442000 446540005 447026006 447052000 447080003 447081004 447121004 447122006 447227007 447229005 447694001 447964005 448077001 448491004 448492006 448598008 45890007 46713006 47625008 54471007 54485002 58100008 58731000052100 58751000052109 58761000052107 58771000052103 58811000052103 58821000052106 58831000052108 60213007 6064005 62226000 66621000052103 697971008 711360002 711378007 714743009 718329006 72607000 764723001 766790006 78421000 876824003 90028008'"/>
  <let name="AdministrationUnitDoseForm" value="'C102405 C122629 C122631 C25397 C44278 C48491 C48501 C48536 C48537 C65060 C71204'"/>
  <let name="CVXVaccinesAdministeredVaccineSet" value="'01 02 03 04 05 06 07 08 09 10 100 101 102 103 104 105 106 107 108 109 11 110 111 112 113 114 115 116 118 119 120 121 122 123 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 146 147 148 149 15 150 151 152 153 155 158 16 160 161 162 163 164 165 166 167 168 169 17 170 171 172 173 174 175 176 177 178 179 18 182 183 184 185 186 187 188 189 19 190 191 192 193 194 195 196 197 198 20 200 201 202 203 204 205 206 207 208 21 210 211 212 213 214 215 216 217 218 219 22 220 221 222 223 224 227 228 229 23 230 231 24 25 26 28 300 301 302 31 32 33 35 37 38 39 40 41 42 43 44 45 46 47 48 49 50 500 501 502 503 504 505 506 507 508 509 51 510 511 512 513 514 515 516 517 518 519 52 520 521 53 54 55 56 62 66 69 74 75 77 78 80 81 82 83 84 85 88 89 90 91 92 94'"/>
  <let name="NoImmunizationReason" value="'IMMUNE MEDPREC OSTOCK PATOBJ PHILISOP RELIG VACEFF VACSAF'"/>
  <let name="ImplantableDeviceStatus" value="'C114146 C118639 C122711 C154407 C45329'"/>
  <let name="DeviceLatexSafety" value="'C101673 C106038 C106043'"/>
  <let name="WoundType" value="'1163215007 1163217004 1163220007 1163222004 1163224003 1163226001 1237116009 125667009 128045006 129902007 13954005 238792006 247444006 271761007 271767006 271807003 274165007 279420009 283545005 283682007 284196006 312609001 3644009 400012003 402275006 403601003 425322008 428220001 429349001 444827008 723071003 7231009 95321009'"/>
  <let name="TargetSiteQualifiers" value="'24028007 255549009 255551008 255561001 7771000'"/>
  <let name="DeviceMagneticResonanceMRSafety" value="'C106045 C106046 C106047 C113844'"/>
  <let name="ResultStatus" value="'aborted active cancelled completed held suspended'"/>
  <let name="MedicationStatus" value="'aborted active completed nullified suspended'"/>
  <let name="MedicationAdherence" value="'1156699004 702565001 715036001 asked-declined asked-unknown not-asked'"/>
  <let name="InformationSourceForMedicationAdherence" value="'106292003 116154003 1179-1 1192-4 1204-7 129465004 133932002 224571005 229774002 303069001 309343006 38472000 449161006 451161000124100 451171000124107 46255001 ADMPHYS ATTPHYS CHILD FAMMEMB FRND GUARD PCP PRN SELF SIB SIGOTHR SPS'"/>
  <let name="SupportedFileFormats" value="'application/msword application/pdf audio audio/basic audio/k32adpcm audio/mpeg image/gif image/jpeg image/png image/tiff text/html text/plain text/rtf video video/mp4 video/mpeg video/quicktime video/webm video/x-avi video/x-ms-wmv'"/>
  <let name="PressureUlcerStage" value="'1163215007 1163217004 1163220007 1163222004 1163224003 1163226001 723071003'"/>
  <let name="PlannedMoodCodeActEncounterProcedure" value="'APT ARQ INT PRMS PRP RQO'"/>
  <let name="NutritionRecommendationGrouping" value="'103699006 1162733007 11816003 1230141004 14051000175103 170961007 171053005 182922004 183027000 183057009 183058004 183059007 183060002 183061003 183062005 183063000 183065007 183066008 183067004 183068009 183069001 183070000 183071001 225372007 226067002 229912004 230114001 230115000 243094003 243096001 25156005 266724001 266725000 281085002 284350006 284352003 284360002 284361003 284362005 289134009 304491008 306163007 306164001 306165000 306353006 306354000 308292007 313209004 313210009 370847001 384682003 386373004 386461003 386464006 386469001 399414003 408285001 408909002 408910007 408914003 410177006 413315001 416116000 418995006 427857000 428274007 428291006 428461000124101 428691000124107 428754001 429071001 429072008 429094000 429095004 429202003 430115003 430146004 430148003 430255006 430259000 431057003 431482008 432443009 435691000124100 438297004 438578000 438588004 438650006 439051004 440328002 440511004 441041000124100 441201000124108 441231000124100 441241000124105 441251000124107 441261000124109 441271000124102 441281000124104 441291000124101 441301000124100 441311000124102 441321000124105 441331000124108 441341000124103 441351000124101 441371000124106 441381000124109 441391000124107 441401000124109 441411000124107 441421000124104 441431000124101 441441000124106 441451000124108 441461000124105 441471000124103 441481000124100 441491000124102 441511000124108 441521000124100 443288003 443307007 445101000124100 445291000124103 445301000124102 445331000124105 445641000124105 448556005 450351008 450352001 451811000124108 51011006 60631000210103 61310001 698612005 699827002 699829004 699830009 699849008 700258004 700430009 705060005 709564003 710112000 710881000 713407005 713414007 714032007 714034008'"/>
  <let name="NutritionalStatus" value="'107647005 1141822009 1141823004 1141825006 1144812004 1144813009 1144935002 1144995004 1148947003 1148948008 1148988003 1148989006 1149197005 1149230003 1149231004 1149289005 1149369006 1155680000 1156255004 1163267006 1163268001 1251555003 1251556002 139104001 160592001 162020001 238131007 248342006 2492009 249481003 284648005 286457005 288939007 289004002 289084000 289164001 304900007 308658001 366358006 408512008 413300002 414916001 424805008 424890008 440291000124105 440301000124106 440311000124109 440321000124101 440331000124103 440341000124108 440351000124105 440361000124107 440371000124100 440381000124102 440391000124104 440401000124102 440411000124104 440421000124107 440431000124105 440441000124100 440451000124103 440461000124101 440471000124108 440481000124106 440491000124109 440501000124101 440511000124103 440521000124106 440531000124109 440541000124104 440721000124102 440731000124104 440761000124108 440771000124101 440791000124100 440801000124104 440811000124101 440831000124107 440841000124102 440851000124100 440861000124103 440871000124105 440881000124108 440891000124106 440901000124105 440911000124108 440921000124100 440941000124107 440961000124106 440971000124104 440981000124101 440991000124103 441001000124102 441011000124104 441021000124107 441031000124105 441361000124104 441871000124101 441901000124101 441911000124103 441921000124106 441931000124109 441941000124104 441951000124102 441961000124100 441971000124107 442618008 443371000124107 443381000124105 444862003 445311000124104 445321000124107 445391000124109 445401000124106 445431000124103 445441000124108 447951000124108 448765001 57669007 61578001 65404009 698859001 698879009 700360000 700361001 707844006 707847004 733423003 772791006 792808008 792809000 846619006 870404000 870405004 870465001 870466000 870471007 870472000 870473005 870474004 870475003 870476002 876833001 876834007 878789008 878790004 878899005 878901001 880102003 880103008 880104002 880105001 880106000 880107009 880108004 880109007 880110002 890465009 890466005 890467001 890468006 890471003 890472005 890473000 895530008 897491008 95907004'"/>
  <let name="SurgicalOperationNoteDocumentTypeCode" value="'11504-8 28573-4 28583-3 28624-5 34137-0 34818-5 34868-0 34870-6 34874-8 34877-1 78240-9 78241-7 78242-5 78243-3 78244-1 78380-3 78381-1 78487-6 78678-0 78679-8 78714-3 78719-2 78725-9 80579-6 80668-7 80807-1 82824-4 83535-5 83614-8 83673-4 83692-4 83815-1 84020-7 84079-3 84175-9 84264-1 84268-2 89457-6 89472-5 96375-1 96376-9 96377-7 97693-6 97705-8 97717-3 97721-5'"/>
  <let name="PatientReferralActMoodCode" value="'INT RQO'"/>
  <let name="CDAParticipationType" value="'ADM ATND CALLBCK CON DIS ESC REF IND BEN COV HLD RCT RCV AUT ENT INF WIT IRCP NOT PRCP REFB REFT TRC PRF DIST PPRF SPRF DEV NRD RDV SBJ SPC DIR BBY CSM DON PRD LOC DST ELOC ORG RML VIA VRF AUTHEN LA RESP CST'"/>
  <let name="ActPriority" value="'A CR CS CSP CSR EL EM P PRN R RR S T UD UR'"/>
  <let name="CareModel" value="'170935008 170936009 170937000 170939002 170940000 170941001 268528005 268529002 370985002'"/>
  <let name="PhysicalExamType" value="'10190-7 10191-5 10192-3 10193-1 10194-9 10195-6 10196-4 10197-2 10198-0 10199-8 10200-4 10201-2 10202-0 10203-8 10204-6 10205-3 10206-1 10207-9 10208-7 10209-5 10210-3 10211-1 10212-9 11384-5 11385-2 11386-0 11387-8 11388-6 11389-4 11390-2 11391-0 11392-8 11393-6 11394-4 11397-7 11398-5 11399-3 11400-9 11401-7 11402-5 11403-3 11404-1 11406-6 11407-4 11410-8 11411-6 11413-2 11414-0 11415-7 11447-0 47420-5 51850-6 8716-3'"/>
  <let name="PayerType" value="'1 11 111 1111 1112 112 113 119 12 121 122 123 129 13 14 141 142 19 191 2 21 211 212 213 219 22 23 25 26 29 291 299 3 31 311 3111 3112 3113 3114 3115 3116 3119 312 3121 3122 3123 313 32 321 3211 3212 32121 32122 32123 32124 32125 32126 32127 32128 322 3221 3222 3223 3229 33 331 332 333 334 34 341 342 343 344 349 35 36 361 362 369 37 371 3711 3712 3713 372 379 38 381 3811 3812 3813 3819 382 389 39 391 4 41 42 43 44 5 51 511 512 513 514 515 516 517 519 52 521 522 523 524 529 53 54 55 56 561 562 59 6 61 611 612 613 614 619 62 621 622 623 629 7 71 72 73 79 8 81 82 821 822 823 83 84 85 89 9 91 92 93 94 95 951 953 954 959 96 97 98 99 9999'"/>
  <let name="EncounterPlanned" value="'108219001 108220007 108221006 1237136005 1258986006 1269515004 12843005 14736009 18170008 185321005 185345009 185346005 185347001 185348006 185349003 185387006 185462000 185463005 185464004 185465003 185466002 185467006 185468001 185469009 185470005 19681004 207195004 209099002 210098006 225929007 270424005 270427003 270430005 288836004 310587004 310588009 314849005 315205008 3391000175108 401267002 401271004 408482001 408483006 408487007 4141000175103 416520008 423215004 439058005 439708006 439887005 440068009 440085006 440146002 440168007 440568002 440611006 440696002 441244001 444971000124105 448337001 452081000124104 4525004 453701000124103 456201000124103 461231000124109 50357006 6051000124107 6061000124109 68341005 69399002 698704008 704126008 711458003 83362003 86013001 86181006 866149003 90526000'"/>
  <let name="PlannedMoodCodeSubstanceAdministrationSupply" value="'INT PRMS PRP RQO'"/>
  <let name="PlannedInterventionMoodCode" value="'APT ARQ INT PRMS PRP RQO'"/>
  <let name="FinanciallyResponsiblePartyTypeValueSet" value="'AFFL AGNT ASSIGNED CASEBJ CIT CLAIM COMPAR CON COVPTY CRINV CRSPNSR DEPEN ECON EMP GUAR GUARD INDIV INVSBJ LIC MIL NAMED NOK NOT PAT PAYEE PAYOR POLHOLD PROG PROV QUAL RESBJ SGNOFF SPNSR STD SUBSCR UNDWRT'"/>
  <let name="CoverageRoleTypeValueSet" value="'FAMDEP FSTUD HANDIC INJ PSTUD SELF SPON STUD'"/>
  <let name="PregnancyIntention" value="'454381000124105 454391000124108 454401000124105 454411000124108'"/>
  <let name="ExtendedPregnancyStatus" value="'146799005 60001007 77386006'"/>
  <let name="PriorityLevel" value="'394848005 394849002 441808003'"/>
  <let name="ProblemStatus" value="'246455001 263855007 277022003 413322009 55561003 73425007'"/>
  <let name="ProcedureActStatusCode" value="'aborted active cancelled completed'"/>
  <let name="ProcedureNoteDocumentTypeCodes" value="'11505-5 18744-3 18745-0 18746-8 18751-8 18753-4 18836-7 28570-0 28577-5 28625-2 29757-2 33721-2 34121-4 34122-2 34896-1 34899-5 47048-4 48807-2 68563-6 68630-3 68658-4 68667-5 68692-3 68702-0 68714-5 68724-4 68729-3 68743-4 68754-1 68784-8 68799-6 68809-3 68820-0 68829-1 68836-6 68851-5 68861-4 68868-9 68872-1 68877-0 68890-3 68895-2 75238-6 75426-7 75455-6 77422-4 77425-7 78314-2 78315-9 78316-7 78317-5 78318-3 78319-1 78320-9 78321-7 78322-5 78472-8 78473-6 78474-4 78475-1 78476-9 78477-7 78478-5 78494-2 78654-1 78655-8 78656-6 78657-4 78658-2 78659-0 78660-8 78661-6 78662-4 79267-1 80669-5 80670-3 80798-2 82355-9 82357-5 82366-6 83525-6 83533-0 83577-7 83599-1 83616-3 83617-1 83640-3 83651-0 83728-6 83789-8 83854-0 83891-2 83938-1 84006-6 84015-7 84021-5 84044-7 84053-8 84062-9 84074-4 84081-9 84147-8 84158-5 84374-8 84375-5 84379-7 84391-2 84408-4 85230-1 85236-8 85242-6 85260-8 85261-6 85854-8 85857-1 88347-0 89223-2 89232-3 89796-7 89803-1 89812-2 89814-8 89817-1 89822-1 89826-2 89951-8 90010-0 90350-0 90353-4 90877-2 93086-7 93150-1 94320-9 94810-9 95750-6 95756-3 96333-0 96351-2 96353-8 96736-4 97668-8 97692-8 97706-6 97707-4 97712-4 97716-5 97727-2 99484-8 99491-3'"/>
  <let name="ActEncounterCodes" value="'ACUTE AMB EMER FLD HH IMP NONAC OBSENC PRENC SS VR'"/>
  <let name="ProgressNoteDocumentTypeCode" value="'11506-3 11507-1 11508-9 11509-7 11510-5 11512-1 15507-7 18733-6 28569-2 28575-9 28580-9 28617-9 28623-7 28627-8 28656-7 34124-8 34125-5 34126-3 34127-1 34128-9 34129-7 34130-5 34131-3 34132-1 34900-1 34901-9 34904-3 64055-7 64057-3 64059-9 64061-5 64063-1 64067-2 64071-4 64075-5 64079-7 68472-0 68473-8 68475-3 68478-7 68479-5 68480-3 68481-1 68484-5 68485-2 68554-5 68564-4 68574-3 68582-6 68595-8 68617-0 68631-1 68646-9 68659-2 68668-3 68679-0 68693-1 68703-8 68725-1 68744-2 68755-8 68763-2 68785-5 68800-2 68810-1 68830-9 68840-8 68862-2 68873-9 68878-8 68891-1 68896-0 70238-1 72556-4 75220-4 75221-2 75497-8 77426-5 78323-3 78324-1 78325-8 78326-6 78327-4 78328-2 78479-3 78480-1 78481-9 78482-7 78663-2 78664-0 78665-7 78666-5 78667-3 78668-1 78669-9 78705-1 78710-1 80569-7 80665-3 80667-9 80671-1 80815-4 80819-6 82365-8 85441-4 85515-5 89030-1 89224-0 89233-1 89795-9 89802-3 89807-2 89811-4 89813-0 89816-3 89821-3 90007-6 90011-8 90014-2 90772-5 90876-4 93892-8 93897-7 93900-9 94245-8 94466-0 94467-8 94468-6 94518-8 94749-9 94809-1 95041-0 95134-3 95746-4 95757-1 95802-5 96338-9 96342-1 96350-4 97570-6 97571-4 97572-2 97573-0 97574-8 97575-5 97576-3 97577-1 97578-9 97579-7 97580-5 97669-6 97691-0'"/>
  <let name="GoalAchievement" value="'390801001 390802008 706905005 706906006'"/>
  <let name="ReferralDocumentType" value="'57133-1 57134-9 57135-6 57136-4 57137-2 57138-0 57139-8 57141-4 57142-2 57143-0 57144-8 57145-5 57146-3 57147-1 57148-9 57149-7 57150-5 57151-3 57152-1 57153-9 57154-7 57155-4 57156-2 57157-0 57158-8 57159-6 57160-4 57162-0 57163-8 57164-6 57165-3 57166-1 57167-9 57168-7 57169-5 57170-3 57171-1 57172-9 57173-7 57174-5 57175-2 57176-0 57177-8 57178-6 57179-4 69438-0 77405-9 77427-3 77432-3 78329-0 78330-8 78331-6 78332-4 78483-5 78484-3 78501-4 78670-7 78671-5 78672-3 78673-1 78674-9 78675-6 78676-4 78677-2 78700-2 80419-5 80577-0 80806-3 82358-3 83797-1 83964-7 83971-2 84031-4 84259-1 84271-6 84287-2 85199-8 85205-3 85226-9 86664-0 87250-7 89225-7 89234-9 95747-2 95754-8'"/>
  <let name="XActClassDocumentEntryOrganizer" value="'BATTERY CLUSTER'"/>
  <let name="SpecimenType" value="'110893002 110894008 110896005 110897001 110898006 110899003 110900008 110901007 110902000 110903005 110904004 110905003 110906002 110907006 110908001 110909009 110910004 110912007 110913002 110914008 110915009 110916005 110917001 110918006 110919003 110920009 110921008 110922001 110923006 110924000 110925004 110926003 110927007 110928002 110929005 110930000 110931001 110932008 110933003 110934009 110935005 110936006 110937002 110938007 110939004 110940002 110941003 110942005 110943000 110944006 110945007 110946008 110947004 110948009 110949001 110950001 110951002 110952009 110953004 110954005 110955006 110956007 110957003 110958008 110959000 110960005 110961009 110962002 110963007 110964001 110965000 110966004 110967008 110968003 110969006 110970007 1149105007 116155002 116156001 116157005 116158000 116159008 116160003 116161004 116162006 116213003 1172660005 1173996004 1177151008 119298005 119307008 119323008 119325001 119328004 119329007 119332005 119334006 119335007 119336008 119337004 119339001 119340004 119341000 119342007 119343002 119345009 119347001 119348006 119350003 119361006 119362004 119363009 119373006 119376003 1201985008 122551003 122552005 122554006 122555007 122556008 122557004 122565001 122566000 122567009 122568004 122569007 122571007 122572000 122573005 122574004 122575003 122576002 122577006 122578001 122579009 122580007 122581006 122583009 122587005 122588000 122593002 122594008 122595009 122596005 122597001 122598006 122599003 122600000 122602008 122604009 122605005 122606006 122607002 122608007 122619005 122624008 122625009 122627001 122628006 122629003 122630008 122631007 122632000 122633005 122634004 122635003 122636002 122637006 122638001 122639009 122640006 122641005 122642003 122643008 122644002 122645001 122646000 122647009 122648004 122649007 122650007 122651006 122652004 122653009 122654003 122655002 122656001 122657005 122658000 122659008 122660003 122661004 122662006 122663001 122664007 122665008 122666009 122667000 122668005 122669002 122670001 122672009 122673004 122674005 122675006 122676007 122677003 122678008 122679000 122680002 122681003 122682005 122683000 122684006 122685007 122686008 122687004 122688009 122689001 122690005 122691009 122692002 122693007 122694001 122696004 122697008 122698003 122699006 122700007 122701006 122702004 122703009 122705002 122706001 122707005 122709008 122710003 122711004 122712006 122713001 122714007 122715008 122716009 122717000 122718005 122719002 122720008 122721007 122722000 122723005 122724004 122725003 122726002 122727006 122732007 122733002 122734008 122735009 122736005 122737001 122738006 122739003 122877000 122879002 122880004 127457009 127460002 127461003 127464006 127466008 127468009 127470000 127472008 127474009 127475005 127478007 127480001 127481002 127482009 127483004 128156008 128157004 128158009 128159001 128160006 128161005 128162003 128163008 128164002 128165001 128166000 128167009 128168004 128169007 128170008 128171007 128172000 128173005 128174004 128175003 16209251000119104 16209291000119109 16209331000119103 16210211000119107 16210251000119108 16210291000119103 16210331000119109 16210371000119107 16210411000119108 16210811000119106 16210931000119105 16211371000119102 16211651000119103 16211731000119101 16211771000119103 16212091000119109 16212131000119106 16212171000119109 16212371000119106 16212811000119105 16212971000119107 16213851000119101 16214131000119104 16214171000119101 16214691000119105 16214971000119103 16215051000119107 16215211000119100 16216331000119107 16220931000119104 16220971000119101 16221011000119101 16221251000119108 16221371000119107 16221491000119104 16222091000119100 16222251000119102 16222611000119100 16222771000119104 16223051000119101 16223491000119100 16223531000119100 16223571000119102 16223931000119106 16223971000119109 16224291000119101 167867009 167868004 167869007 167870008 167871007 167872000 167873005 167874004 167875003 167876002 167877006 168136008 168137004 168138009 168139001 168141000 168145009 256889002 258407001 258411007 258412000 258414004 258417006 258418001 258419009 258420003 258422006 258424007 258425008 258426009 258428005 258430007 258432004 258434003 258435002 258436001 258438000 258439008 258440005 258441009 258444001 258446004 258448003 258450006 258452003 258453008 258456000 258457009 258458004 258459007 258461003 258462005 258463000 258466008 258467004 258468009 258469001 258470000 258471001 258472008 258474009 258475005 258476006 258479004 258480001 258481002 258482009 258483004 258484005 258487003 258490009 258492001 258493006 258494000 258495004 258496003 258502009 258538002 258549008 258554004 258555003 258558001 258559009 258560004 258561000 258563002 258574006 258575007 258576008 258577004 258580003 258585008 258608003 258609006 258610001 258611002 264380007 276833005 278020009 303247002 303248007 3040001000004107 309051001 309055005 309058007 309059004 309067007 309072003 309074002 309078004 309079007 309103006 309108002 309110000 309112008 309116006 309119004 309121009 309126004 309127008 309128003 309129006 309133004 309134005 309138008 309143001 309145008 309147000 309150002 309153000 309168004 309170008 309171007 309175003 309176002 309179009 309183009 309186001 309187005 309190004 309199003 309200000 309201001 309205005 309210009 309218002 309220004 309221000 309223002 309224008 309226005 309227001 309263001 309264007 309266009 309267000 309268005 309270001 309272009 309274005 309275006 309276007 309277003 309278008 309285007 309286008 309287004 309288009 309289001 309292002 309476009 309482007 309484008 309485009 309486005 309487001 309488006 309489003 309490007 309491006 309495002 309496001 309497005 309498000 309501000 309503002 309504008 309505009 309506005 309508006 309546004 309547008 30961000087106 33351000087104 33511000087108 33631000087102 33891000087100 33911000087102 33921000087105 363328006 363329003 369611008 369613006 369614000 369615004 369616003 369617007 369618002 370108001 371782000 371783005 373101006 373102004 373103009 373192005 373193000 384744003 384746001 384820007 385338007 385339004 385340002 396273004 396353007 396354001 396355000 396356004 396357008 396358003 396359006 396476009 396477000 396478005 396479002 396480004 396481000 396483002 396526009 396527000 396685001 396804002 396805001 396806000 396807009 396928004 397053005 397055003 397056002 397077004 397078009 397111007 397130007 397131006 397132004 397133009 397134003 397136001 397199005 397232008 397234009 397235005 397245007 397246008 397326000 397333000 397334006 397436009 397462000 397482001 397483006 399388008 399396003 399407000 399440009 399443006 399447007 399451009 399467003 399484009 399486006 399492000 399499009 399502008 399512001 399532000 399541005 399542003 399559008 399572009 399603006 399614009 399619004 399622002 399624001 399629006 399640003 399645008 399649002 399657004 399658009 399661005 399672000 399689008 399693002 399713008 399728008 399731009 399732002 399735000 399741007 399751008 399752001 404643001 406101006 409821005 409876003 410580001 410581002 410729004 415293009 415563002 418564007 421615004 422991009 423696009 427558003 429836002 429901000124102 429921000124107 430117006 430241003 430297000 430309006 430310001 430312009 430318008 430346005 430379005 430386002 430387006 430389009 430408004 430791000124104 430855004 430856003 430861001 430970004 431058008 431196006 431361003 431771004 432825001 432897002 433771000124105 433781000124108 433871000124101 435971000124108 436651000124102 438336007 438351003 438352005 438545007 438595008 438659007 438803004 438804005 439034006 439479000 439895009 440135000 440138003 440469007 440472000 440502004 441479001 441620008 441652008 442043001 442173007 444824001 444832009 444865001 444936006 444937002 444965000 445372002 445383006 445742005 445743000 445744006 445745007 446128003 446129006 446130001 446277003 446299006 446300003 446304007 446305008 446306009 446561003 446562005 446676001 446700001 446817004 446837000 446842008 446846006 446861007 446906004 446907008 446908003 446951004 447104008 447148003 447155001 447158004 447341000 447345009 447375004 447403008 447407009 447488002 447589008 467521000124104 471921000124107 473405009 48469005 57481000052108 57721000052101 57741000052105 57921000052103 57931000052101 608856009 697988001 698276005 699283007 699284001 699285000 699286004 699287008 699874006 703430008 703431007 703432000 703475006 703691002 708048008 708049000 708112008 711171000124105 725372003 725957005 732211001 732217002 732220005 732222002 732226004 732227008 732293002 732295009 732972008 732975005 732976006 733056005 733103005 733105003 733475007 733476008 733482006 734379005 734443003 737016007 737356002 765469005 765470006 788524009 840395001 866032008 866033003 878861003 898205005'"/>
  <let name="ADLResultType" value="'28408-3 28409-1 28413-3 46008-9 46482-6 46484-2'"/>
  <let name="Ability" value="'1091000175109 371150009 371151008 371152001 371153006 371154000 371155004 371157007 385640009 444661000124105 444671000124103 444681000124100 445141000124103 445481000124102 450461000124104 717896003'"/>
  <let name="SensoryStatusProblemType" value="'10625003 128542002 13191003 16476001 22382001 247297002 247310003 247311004 247312006 247313001 247314007 247315008 285567008 286204007 286253007 286300001 286325005 304290007 364019009 373713005 397611008 397624008 397627001 397677003 397686008 397701006 405183003 43410000 47078008 66824009 69744008 9077000'"/>
  <let name="MentalAndFunctionalStatusResponse" value="'11163003 1250004 18043004 18307000 20572008 260379002 272520006 30714006 35105006 41277001'"/>
  <let name="HealthcareServiceLocation" value="'1005-8 1007-4 1008-2 1009-0 1010-8 1011-6 1012-4 1013-2 1014-0 1015-7 1016-5 1017-3 1018-1 1019-9 1020-7 1025-6 1026-4 1027-2 1028-0 1029-8 1030-6 1031-4 1032-2 1033-0 1034-8 1035-5 1038-9 1039-7 1040-5 1041-3 1042-1 1043-9 1044-7 1045-4 1046-2 1047-0 1048-8 1049-6 1051-2 1052-0 1053-8 1054-6 1055-3 1056-1 1057-9 1058-7 1059-5 1060-3 1061-1 1062-9 1063-7 1064-5 1065-2 1066-0 1067-8 1068-6 1069-4 1070-2 1071-0 1072-8 1073-6 1075-1 1076-9 1077-7 1078-5 1079-3 1080-1 1081-9 1082-7 1083-5 1084-3 1085-0 1086-8 1091-8 1092-6 1093-4 1095-9 1096-7 1097-5 1099-1 1100-7 1102-3 1103-1 1104-9 1105-6 1106-4 1108-0 1109-8 1110-6 1112-2 1113-0 1115-5 1116-3 1117-1 1118-9 1119-7 1120-5 1121-3 1122-1 1123-9 1124-7 1125-4 1126-2 1127-0 1128-8 1129-6 1130-4 1131-2 1132-0 1133-8 1134-6 1136-1 1137-9 1138-7 1139-5 1140-3 1141-1 1142-9 1143-7 1144-5 1145-2 1146-0 1147-8 1148-6 1149-4 1150-2 1151-0 1152-8 1153-6 1154-4 1155-1 1156-9 1157-7 1158-5 1159-3 1160-1 1161-9 1162-7 1164-3 1165-0 1169-2 1170-0 1171-8 1172-6 1174-2 1175-9 1176-7 1178-3 1179-1 1180-9 1181-7 1182-5 1183-3 1184-1 1185-8 1186-6 1187-4 1188-2 1189-0 1190-8 1192-4 1194-0 1195-7 1196-5 1198-1 1200-5 1202-1 1203-9 1204-7 1205-4 1207-0 1208-8 1209-6 1210-4 1211-2 1212-0 1214-6 1217-9 1218-7 1219-5 1220-3 1221-1 1222-9 1223-7 1224-5 1225-2 1226-0 1227-8 1228-6 1229-4 1230-2 1231-0 1232-8 1233-6 1234-4 1235-1 1236-9 1242-7 1243-5 1244-3 1245-0 1246-8 1247-6 1248-4 1249-2 1254-2 1255-9 1256-7 1257-5 1258-3 1259-1 1260-9 1261-7 1262-1 1263-3 1264-1 1265-8 1268-2 1269-0 1270-8 1271-6 1272-4'"/>
  <let name="Severity" value="'24484000 255604002 6736007'"/>
  <let name="Sex" value="'184115007 248152002 248153007 33791000087105 asked-declined'"/>
  <let name="SexualOrientationIncludingNullsAndDataAbsentReason" value="'20430005 38628009 42035005 765288000 OTH UNK asked-declined'"/>
  <let name="SmokingStatusType" value="'11367-0 401201003 72166-2 782516008'"/>
  <let name="SmokingStatusComprehensive" value="'100801000119107 105539002 105540000 105541001 10761391000119102 110483000 1137691001 134406006 160603005 160604004 160605003 160606002 160612007 160613002 160614008 160616005 160617001 160619003 160620009 160621008 16090371000119103 16090771000119104 161077003 161078008 161079000 169940006 228491005 228492003 228493008 228494002 228499007 228501004 228502006 228503001 228504007 228509002 228511006 228512004 228513009 228514003 228515002 228516001 228517005 228518000 228523000 228524006 228525007 230059006 230060001 230062009 230063004 230064005 230065006 266919005 266920004 266921000 266922007 266923002 266924008 266925009 266927001 266928006 266929003 275105001 281018007 308438006 35341000087101 35371000087109 360890004 360900008 360918006 360929005 365981007 365982000 365983005 394871007 394872000 394873005 405746006 427189007 428041000124106 428061000124105 428071000124103 428081000124100 428091000124102 43381005 446172000 449345000 449368009 449369001 449867007 449868002 449869005 450811000124104 450821000124107 451371000124109 451381000124107 451881000124101 451891000124103 451901000124104 451911000124101 451921000124109 456711000124105 48031000119106 53896009 56578002 56771006 59978006 65568007 699009004 702975009 702979003 711563001 713914004 722499006 735128000 762296001 77176002 785889008 786063001 81703003 82302008 8392000 8517006 87739003'"/>
  <let name="CompletedOrNullifiedActStatus" value="'completed nullified'"/>
  <let name="SmokingStatus" value="'266919005 266927001 428041000124106 428061000124105 428071000124103 449868002 77176002 8517006'"/>
  <let name="Hl7VSSpecimenCondition" value="'AUT CLOT CON COOL FROZ HEM LIVE ROOM SNR CFU'"/>
  <let name="AllergyAndIntoleranceType" value="'12481000132103 235719002 414285001 416098002 418471000 419511003 420134006 426232007 444316004 59037007 609328004'"/>
  <let name="TobaccoUse" value="'10761391000119102 110483000 134406006 160603005 160604004 160605003 160606002 160612007 160613002 160614008 160616005 160619003 169940006 228494002 228499007 228504007 228509002 228514003 228515002 228516001 228517005 228518000 228523000 228524006 228525007 230059006 230060001 230062009 230063004 230064005 230065006 266920004 266927001 266929003 308438006 365981007 365982000 365983005 394871007 394872000 394873005 427189007 428041000124106 428061000124105 428071000124103 43381005 446172000 449345000 449867007 449868002 449869005 450811000124104 450821000124107 451381000124107 451881000124101 451891000124103 56578002 56771006 59978006 65568007 713914004 77176002 81703003 82302008'"/>
  <let name="TransferDocumentType" value="'18761-7 28616-1 28651-8 34755-9 34770-8 68482-9 68565-1 68569-3 68583-4 68596-6 68618-8 68632-9 68647-7 68660-0 68669-1 68680-8 68704-6 68715-2 68726-9 68737-6 68745-9 68756-6 68764-0 68772-3 68777-2 68786-3 68793-9 68801-0 68811-9 68863-0 68883-8 68884-6 68887-9 77406-7 77414-1 78340-7 78341-5 78488-4 78489-2 78490-0 78491-8 78492-6 78493-4 78502-2 78680-6 78681-4 78682-2 78683-0 78684-8 78729-1 78736-6 80580-4 80735-4 80808-9 80816-2 83526-4 83865-6 83914-2 83950-6 83981-1 84016-5 84083-5 84221-1 84228-6 85181-6 85184-0 85187-3 85219-4 85253-3 88348-8 89226-5 89235-6 97670-4'"/>
  <let name="ADConditionsAndPrognosisScenarios" value="'75777-3 75778-1'"/>
  <let name="TribalEntityUS" value="'338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 1 2 3 4 5 6 7 8 9 10 11 12 33 13 14 15 16 17 18 19 20 21 160 22 23 24 25 26 27 29 28 30 31 32 35 36 37 38 39 40 42 41 43 44 45 46 47 48 49 50 51 52 53 54 55 64 56 57 58 59 60 61 62 63 65 66 67 68 69 71 70 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 127 125 126 128 129 130 131 132 133 134 135 136 137 138 140 141 142 143 139 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 184 183 185 186 188 187 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 212 211 213 214 215 216 217 219 218 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 247 248 246 249 250 251 252 253 254 255 257 256 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 291 290 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 308 307 309 310 311 312 313 314 315 316 317 318 319 320 321 34 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 567 568 569 570 571 572 573 574 575 576 577 578 579'"/>
  <let name="HL7BasicConfidentialityKind" value="'N R V'"/>
  <let name="TelecomUseUSRealmHeader" value="'AS EC HP HV MC PG WP'"/>
  <let name="MaritalStatus" value="'A C D I L M P S T U W'"/>
  <let name="ReligiousAffiliation" value="'1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082'"/>
  <let name="RaceCategoryExcludingNulls" value="'1002-5 2028-9 2054-5 2076-8 2106-3'"/>
  <let name="RaceValueSet" value="'1002-5 1004-1 1006-6 1008-2 1010-8 1011-6 1012-4 1013-2 1014-0 1015-7 1016-5 1017-3 1018-1 1019-9 1021-5 1022-3 1023-1 1024-9 1026-4 1028-0 1030-6 1031-4 1033-0 1035-5 1037-1 1039-7 1041-3 1042-1 1044-7 1045-4 1046-2 1047-0 1048-8 1049-6 1050-4 1051-2 1053-8 1054-6 1055-3 1056-1 1057-9 1058-7 1059-5 1060-3 1061-1 1062-9 1063-7 1064-5 1065-2 1066-0 1068-6 1069-4 1070-2 1071-0 1072-8 1073-6 1074-4 1076-9 1078-5 1080-1 1082-7 1083-5 1084-3 1086-8 1088-4 1089-2 1090-0 1091-8 1092-6 1093-4 1094-2 1095-9 1096-7 1097-5 1098-3 1100-7 1102-3 1103-1 1104-9 1106-4 1108-0 1109-8 1110-6 1112-2 1114-8 1115-5 1116-3 1117-1 1118-9 1119-7 1120-5 1121-3 1123-9 1124-7 1125-4 1126-2 1127-0 1128-8 1129-6 1130-4 1131-2 1132-0 1133-8 1134-6 1135-3 1136-1 1137-9 1138-7 1139-5 1140-3 1141-1 1142-9 1143-7 1144-5 1145-2 1146-0 1147-8 1148-6 1150-2 1151-0 1153-6 1155-1 1156-9 1157-7 1158-5 1159-3 1160-1 1162-7 1163-5 1165-0 1167-6 1169-2 1171-8 1173-4 1175-9 1176-7 1178-3 1180-9 1182-5 1184-1 1186-6 1187-4 1189-0 1191-6 1193-2 1194-0 1195-7 1196-5 1197-3 1198-1 1199-9 1200-5 1201-3 1202-1 1203-9 1204-7 1205-4 1207-0 1209-6 1211-2 1212-0 1214-6 1215-3 1216-1 1217-9 1218-7 1219-5 1220-3 1222-9 1223-7 1224-5 1225-2 1226-0 1227-8 1228-6 1229-4 1230-2 1231-0 1233-6 1234-4 1235-1 1236-9 1237-7 1238-5 1239-3 1240-1 1241-9 1242-7 1243-5 1244-3 1245-0 1246-8 1247-6 1248-4 1250-0 1252-6 1254-2 1256-7 1258-3 1260-9 1262-5 1264-1 1265-8 1267-4 1269-0 1271-6 1272-4 1273-2 1275-7 1277-3 1279-9 1281-5 1282-3 1283-1 1285-6 1286-4 1287-2 1288-0 1289-8 1290-6 1291-4 1292-2 1293-0 1294-8 1295-5 1297-1 1299-7 1301-1 1303-7 1305-2 1306-0 1307-8 1309-4 1310-2 1312-8 1313-6 1314-4 1315-1 1317-7 1319-3 1321-9 1323-5 1325-0 1326-8 1327-6 1328-4 1329-2 1331-8 1332-6 1333-4 1334-2 1335-9 1336-7 1337-5 1338-3 1340-9 1342-5 1344-1 1345-8 1346-6 1348-2 1350-8 1352-4 1354-0 1356-5 1358-1 1359-9 1360-7 1361-5 1363-1 1365-6 1366-4 1368-0 1370-6 1372-2 1374-8 1376-3 1378-9 1380-5 1382-1 1383-9 1384-7 1385-4 1387-0 1389-6 1391-2 1392-0 1393-8 1394-6 1395-3 1396-1 1397-9 1398-7 1399-5 1400-1 1401-9 1403-5 1405-0 1407-6 1409-2 1411-8 1412-6 1413-4 1414-2 1416-7 1417-5 1418-3 1419-1 1420-9 1421-7 1422-5 1423-3 1424-1 1425-8 1426-6 1427-4 1428-2 1429-0 1430-8 1431-6 1432-4 1433-2 1434-0 1435-7 1436-5 1437-3 1439-9 1441-5 1442-3 1443-1 1445-6 1446-4 1448-0 1450-6 1451-4 1453-0 1454-8 1456-3 1457-1 1458-9 1460-5 1462-1 1464-7 1465-4 1466-2 1467-0 1468-8 1469-6 1470-4 1471-2 1472-0 1474-6 1475-3 1476-1 1478-7 1479-5 1480-3 1481-1 1482-9 1483-7 1484-5 1485-2 1487-8 1489-4 1490-2 1491-0 1492-8 1493-6 1494-4 1495-1 1496-9 1497-7 1498-5 1499-3 1500-8 1501-6 1502-4 1503-2 1504-0 1505-7 1506-5 1507-3 1508-1 1509-9 1510-7 1511-5 1512-3 1513-1 1514-9 1515-6 1516-4 1518-0 1519-8 1520-6 1521-4 1522-2 1523-0 1524-8 1525-5 1526-3 1527-1 1528-9 1529-7 1530-5 1531-3 1532-1 1533-9 1534-7 1535-4 1536-2 1537-0 1538-8 1539-6 1541-2 1543-8 1545-3 1547-9 1549-5 1551-1 1552-9 1553-7 1554-5 1556-0 1558-6 1560-2 1562-8 1564-4 1566-9 1567-7 1568-5 1569-3 1570-1 1571-9 1573-5 1574-3 1576-8 1578-4 1579-2 1580-0 1582-6 1584-2 1586-7 1587-5 1588-3 1589-1 1590-9 1591-7 1592-5 1593-3 1594-1 1595-8 1596-6 1597-4 1598-2 1599-0 1600-6 1602-2 1603-0 1604-8 1605-5 1607-1 1609-7 1610-5 1611-3 1612-1 1613-9 1614-7 1615-4 1616-2 1617-0 1618-8 1619-6 1620-4 1621-2 1622-0 1623-8 1624-6 1625-3 1626-1 1627-9 1628-7 1629-5 1630-3 1631-1 1632-9 1633-7 1634-5 1635-2 1636-0 1637-8 1638-6 1639-4 1640-2 1641-0 1643-6 1645-1 1647-7 1649-3 1651-9 1653-5 1654-3 1655-0 1656-8 1657-6 1659-2 1661-8 1663-4 1665-9 1667-5 1668-3 1670-9 1671-7 1672-5 1673-3 1675-8 1677-4 1679-0 1680-8 1681-6 1683-2 1685-7 1687-3 1688-1 1689-9 1690-7 1692-3 1694-9 1696-4 1697-2 1698-0 1700-4 1702-0 1704-6 1705-3 1707-9 1709-5 1711-1 1712-9 1713-7 1715-2 1717-8 1718-6 1719-4 1720-2 1722-8 1724-4 1725-1 1726-9 1727-7 1728-5 1729-3 1730-1 1731-9 1732-7 1733-5 1735-0 1737-6 1739-2 1740-0 1741-8 1742-6 1743-4 1744-2 1745-9 1746-7 1747-5 1748-3 1749-1 1750-9 1751-7 1752-5 1753-3 1754-1 1755-8 1756-6 1757-4 1758-2 1759-0 1760-8 1761-6 1762-4 1763-2 1764-0 1765-7 1766-5 1767-3 1768-1 1769-9 1770-7 1771-5 1772-3 1773-1 1774-9 1775-6 1776-4 1777-2 1778-0 1779-8 1780-6 1781-4 1782-2 1783-0 1784-8 1785-5 1786-3 1787-1 1788-9 1789-7 1790-5 1791-3 1792-1 1793-9 1794-7 1795-4 1796-2 1797-0 1798-8 1799-6 1800-2 1801-0 1802-8 1803-6 1804-4 1805-1 1806-9 1807-7 1808-5 1809-3 1811-9 1813-5 1814-3 1815-0 1816-8 1817-6 1818-4 1819-2 1820-0 1821-8 1822-6 1823-4 1824-2 1825-9 1826-7 1827-5 1828-3 1829-1 1830-9 1831-7 1832-5 1833-3 1834-1 1835-8 1837-4 1838-2 1840-8 1842-4 1844-0 1845-7 1846-5 1847-3 1848-1 1849-9 1850-7 1851-5 1852-3 1853-1 1854-9 1855-6 1856-4 1857-2 1858-0 1859-8 1860-6 1861-4 1862-2 1863-0 1864-8 1865-5 1866-3 1867-1 1868-9 1869-7 1870-5 1871-3 1872-1 1873-9 1874-7 1875-4 1876-2 1877-0 1878-8 1879-6 1880-4 1881-2 1882-0 1883-8 1884-6 1885-3 1886-1 1887-9 1888-7 1889-5 1891-1 1892-9 1893-7 1894-5 1896-0 1897-8 1898-6 1899-4 1900-0 1901-8 1902-6 1903-4 1904-2 1905-9 1906-7 1907-5 1908-3 1909-1 1910-9 1911-7 1912-5 1913-3 1914-1 1915-8 1916-6 1917-4 1918-2 1919-0 1920-8 1921-6 1922-4 1923-2 1924-0 1925-7 1926-5 1927-3 1928-1 1929-9 1930-7 1931-5 1932-3 1933-1 1934-9 1935-6 1936-4 1937-2 1938-0 1939-8 1940-6 1941-4 1942-2 1943-0 1944-8 1945-5 1946-3 1947-1 1948-9 1949-7 1950-5 1951-3 1952-1 1953-9 1954-7 1955-4 1956-2 1957-0 1958-8 1959-6 1960-4 1961-2 1962-0 1963-8 1964-6 1966-1 1968-7 1969-5 1970-3 1972-9 1973-7 1974-5 1975-2 1976-0 1977-8 1978-6 1979-4 1980-2 1981-0 1982-8 1984-4 1985-1 1986-9 1987-7 1988-5 1990-1 1992-7 1993-5 1994-3 1995-0 1996-8 1997-6 1998-4 1999-2 2000-8 2002-4 2004-0 2006-5 2007-3 2008-1 2009-9 2010-7 2011-5 2012-3 2013-1 2014-9 2015-6 2016-4 2017-2 2018-0 2019-8 2020-6 2021-4 2022-2 2023-0 2024-8 2025-5 2026-3 2028-9 2029-7 2030-5 2031-3 2032-1 2033-9 2034-7 2035-4 2036-2 2037-0 2038-8 2039-6 2040-4 2041-2 2042-0 2043-8 2044-6 2045-3 2046-1 2047-9 2048-7 2049-5 2050-3 2051-1 2052-9 2054-5 2056-0 2058-6 2060-2 2061-0 2062-8 2063-6 2064-4 2065-1 2066-9 2067-7 2068-5 2069-3 2070-1 2071-9 2072-7 2073-5 2074-3 2075-0 2076-8 2078-4 2079-2 2080-0 2081-8 2082-6 2083-4 2085-9 2086-7 2087-5 2088-3 2089-1 2090-9 2091-7 2092-5 2093-3 2094-1 2095-8 2096-6 2097-4 2098-2 2100-6 2101-4 2102-2 2103-0 2104-8 2106-3 2108-9 2109-7 2110-5 2111-3 2112-1 2113-9 2114-7 2115-4 2116-2 2118-8 2119-6 2120-4 2121-2 2122-0 2123-8 2124-6 2125-3 2126-1 2127-9 2129-5 2131-1 2500-7'"/>
  <let name="Ethnicity" value="'2135-2 2186-5'"/>
  <let name="DetailedEthnicity" value="'2137-8 2138-6 2139-4 2140-2 2141-0 2142-8 2143-6 2144-4 2145-1 2146-9 2148-5 2149-3 2150-1 2151-9 2152-7 2153-5 2155-0 2156-8 2157-6 2158-4 2159-2 2160-0 2161-8 2162-6 2163-4 2165-9 2166-7 2167-5 2168-3 2169-1 2170-9 2171-7 2172-5 2173-3 2174-1 2175-8 2176-6 2178-2 2180-8 2182-4 2184-0'"/>
  <let name="LanguageAbilityMode" value="'ESGN ESP EWR RSGN RSP RWR'"/>
  <let name="LanguageAbilityProficiency" value="'E F G P'"/>
  <let name="X_ServiceEventPerformer" value="'PPRF PRF SPRF'"/>
  <let name="ParticipationFunction" value="'ADMPHYS ANEST ANRS ASSEMBLER ATTPHYS AUCG AUCOV AUEMROV AULR AUTM AUWA CLMADJ COMPOSER DISPHYS ENROLL FASST FFSMGT FULINRD GRDCON MCMGT MDWF NASST PAYORCNTR PCP POACON PRCON PRISURG PROMSK PROVMGT REINS RETROCES REVIEWER RNDPHYS SASST SELFINRD SNRS SUBCON SUBCTRT TASST UMGT UNDERWRTNG _AuthorizedParticipationFunction _AuthorizedReceiverParticipationFunction _ConsenterParticipationFunction _CoverageParticipationFunction _OverriderParticipationFunction _PayorParticipationFunction _SponsorParticipationFunction _UnderwriterParticipationFunction'"/>
  <let name="VitalSignResultType" value="'2708-6 29463-7 3140-1 3150-0 3151-8 39156-5 59408-5 59575-1 59576-9 77606-2 8287-5 8289-1 8302-2 8306-3 8310-5 8462-4 8478-0 8480-6 8867-4 9279-1 9843-4'"/>
  <let name="ObservationInterpretationHL7" value="'&lt; &gt; A AA AC B CAR Carrier D DET E EX EXP H H&gt; HH HM HU HX I IE IND L L&lt; LL LU LX MS N NCL ND NEG NR NS OBX ObservationInterpretationDetection ObservationInterpretationExpectation POS QCF R RR ReactivityObservationInterpretation S SDD SYN-R SYN-S TOX U UNE VS W WR'"/>
  <let name="WoundCharacteristic" value="'1137684004 15923071000119108 171000161100 201000161104 21000161105 211000161102 221000161109 225540005 225550006 225551005 225917003 225944008 239157004 239159001 239160006 239161005 239164002 239165001 239166000 239189008 239193002 271618001 286613000 298006005 298008006 298010008 298012000 304287001 304288006 307229009 31000161107 310639000 341000161109 371000161102 401000161100 409590008 418115006 418291005 418422005 418780004 419635000 419877002 431231000124104 445916002 447112000 447547000 448194002 448749002 449741007 449743005 449744004 449745003 449746002 449747006 449748001 449749009 449750009 449751008 449752001 449756003 449757007 449760000 449761001 449762008 449891003 531000161108 541000161103 551000161100 561000161102 591000161109 61000161101 651000161101 71000161109 781184005 781185006 781186007 781187003 781188008 781193006 781195004 789507005 827031005 830130002 833287004 866166001 91000161108'"/>
  <let name="WoundMeasurements" value="'39125-0 39126-8 39127-6 72293-4 72296-7'"/>
  <let name="EntityPersonNamePartQualifier" value="'AC AD BR CL IN NB PR SP TITLE VV'"/>
</schema>